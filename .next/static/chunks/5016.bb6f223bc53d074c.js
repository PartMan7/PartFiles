"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5016],{12576:(e,l,a)=>{a.d(l,{A:()=>s});var t=a(84363),n=a(15475),o=a(18729);let r={key:0,class:"text-c-2 text-sm leading-normal text-pretty"},s=(0,t.pM)({__name:"DeleteSidebarListElement",props:{variableName:{},warningMessage:{}},emits:["close","delete"],setup(e,{emit:l}){let a=(0,t.EW)(()=>e.variableName.length>18?e.variableName.slice(0,18)+"â€¦":e.variableName);return(s,i)=>((0,t.uX)(),(0,t.Wv)(o.A,{danger:"",label:`Delete ${a.value}`,onCancel:i[0]||(i[0]=e=>l("close")),onSubmit:i[1]||(i[1]=e=>l("delete"))},{default:(0,t.k6)(()=>[e.warningMessage?((0,t.uX)(),(0,t.CE)("p",r,(0,n.v_)(e.warningMessage),1)):(0,t.Q3)("",!0)]),_:1},8,["label"]))}})},62875:(e,l,a)=>{a.d(l,{A:()=>s});var t=a(84363),n=a(88123),o=a(47547),r=a(18729);let s=(0,t.pM)({__name:"EditSidebarListElement",props:{name:{}},emits:["close","edit"],setup(e,{emit:l}){let a=(0,n.KR)(e.name);return(e,s)=>((0,t.uX)(),(0,t.Wv)(r.A,{onCancel:s[1]||(s[1]=e=>l("close")),onSubmit:s[2]||(s[2]=e=>l("edit",a.value))},{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(o.SB),{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),autofocus:""},null,8,["modelValue"])]),_:1}))}})},18729:(e,l,a)=>{a.d(l,{A:()=>u});var t=a(84363),n=a(61629),o=a(88123),r=a(15475),s=a(47547);let i={class:"flex justify-between gap-10"},u=(0,t.pM)({__name:"SidebarListElementForm",props:{danger:{type:Boolean},label:{}},emits:["cancel","submit"],setup:(e,{emit:l})=>(a,u)=>((0,t.uX)(),(0,t.CE)("form",{class:"flex flex-col gap-4 text-base",onSubmit:u[1]||(u[1]=(0,n.D$)(e=>l("submit"),["prevent"]))},[(0,t.RG)(a.$slots,"default"),(0,t.Lk)("div",i,[(0,t.bF)((0,o.R1)(s.RO),{size:"sm",type:"button",variant:"outlined",onClick:u[0]||(u[0]=e=>l("cancel"))},{default:(0,t.k6)(()=>[...u[2]||(u[2]=[(0,t.eW)(" Cancel ",-1)])]),_:1}),(0,t.bF)((0,o.R1)(s.RO),{"data-testid":"sidebar-list-element-form-submit-button",size:"sm",type:"submit",variant:e.danger?"danger":"solid"},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)(e.label??"Save"),1)]),_:1},8,["variant"])])],32))})},95016:(e,l,a)=>{a.r(l),a.d(l,{default:()=>V});var t=a(84363),n=a(88123),o=a(15475),r=a(47547),s=a(4270),i=a(44833),u=a(12576),c=a(62875),v=a(35028),d=a(81373),m=a(94426),p=a(61629),f=a(12022),b=a(62069),k=a(74917),g=a(91580),h=a(26695),x=a(7162);let C=(0,t.pM)({__name:"EnvironmentForm",props:{collection:{},environment:{},workspace:{},envVariables:{}},setup(e){let{collectionMutators:l}=(0,x.hA)(),a=(0,n.KR)([]),s=(0,n.KR)(new Set),u=(0,n.KR)(new Map),c=(0,n.KR)(!1),v=(0,t.EW)(()=>{if(!e.environment?.value)return[{key:"",value:""}];try{let l=JSON.parse(e.environment.value),a=Object.entries(l).map(([e,l])=>({key:e,value:String(l)}));return 0===a.length?[{key:"",value:""}]:a}catch{return[{key:"",value:""}]}}),d=(0,t.EW)(()=>{let e=a.value[a.value.length-1];return e?e.key||e.value?[...a.value,{key:"",value:""}]:a.value:[{key:"",value:""}]}),m=(0,t.EW)(()=>{let e=new Map;return a.value.forEach((l,a)=>{if(l.key){let t=e.get(l.key)||[];t.push(a),e.set(l.key,t)}}),u.value.forEach((l,a)=>{if(l){let t=e.get(l)||[];t.push(a),e.set(l,t)}}),Array.from(e.values()).filter(e=>e.length>1).flat()});(0,t.wB)(v,e=>{a.value=[...e],s.value=new Set(e.map(e=>e.key).filter(Boolean))},{immediate:!0});let C=async(n,o,r)=>{if(!c.value){if("key"===o){u.value.set(n,r);let e=new Set(s.value),l=a.value[n];if(l&&e.delete(l.key),e.has(r))return}c.value=!0;try{let i=[...a.value],c=i[n];if(!c)return;i[n]={key:"key"===o?r:c.key,value:"value"===o?r:c.value},i[n].key||i[n].value||n===i.length-1||i.splice(n,1);let v=i.reduce((e,{key:l,value:a})=>((l||a)&&(e[l]=a),e),{});if(e.collection){let a={...e.collection["x-scalar-environments"],[e.environment.name]:{...e.collection["x-scalar-environments"]?.[e.environment.name],variables:v}};await l.edit(e.collection.uid,"x-scalar-environments",a)}if(n===a.value.length-1){let e=i[i.length-1];e&&(e.key||e.value)&&await y()}await (0,t.dY)(),a.value=i,"key"===o&&(s.value=new Set(i.map(e=>e.key).filter(Boolean)),u.value.delete(n))}finally{c.value=!1}}},y=async()=>{if(!c.value){c.value=!0;try{let n=[...a.value,{key:"",value:""}],o=n.reduce((e,{key:l,value:a})=>((l||a)&&(e[l]=a),e),{});if(e.collection){let a={...e.collection["x-scalar-environments"],[e.environment.name]:{...e.collection["x-scalar-environments"]?.[e.environment.name],variables:o}};await l.edit(e.collection.uid,"x-scalar-environments",a)}await (0,t.dY)(),a.value=n}finally{c.value=!1}}},F=async n=>{if(!c.value){c.value=!0;try{let o=[...a.value];o.splice(n,1);let r=o.reduce((e,{key:l,value:a})=>((l||a)&&(e[l]=a),e),{});if(e.collection){let a={...e.collection["x-scalar-environments"],[e.environment.name]:{...e.collection["x-scalar-environments"]?.[e.environment.name],variables:r}};await l.edit(e.collection.uid,"x-scalar-environments",a)}await (0,t.dY)(),a.value=o}finally{c.value=!1}}},R=async()=>{if(0===a.value.length)await y();else if(a.value.length>=1){let e=a.value[a.value.length-1];e&&(e.key||e.value)&&await y()}};return(0,t.sV)(()=>{R()}),(0,t.wB)(()=>a.value,()=>{R()}),(l,a)=>((0,t.uX)(),(0,t.Wv)(b.A,{class:"group/table flex-1",columns:["",""]},{default:(0,t.k6)(()=>[(0,t.bF)(h.A,{class:"sr-only !block"},{default:(0,t.k6)(()=>[(0,t.bF)(g.A,null,{default:(0,t.k6)(()=>[...a[0]||(a[0]=[(0,t.eW)("Key",-1)])]),_:1}),(0,t.bF)(g.A,null,{default:(0,t.k6)(()=>[...a[1]||(a[1]=[(0,t.eW)("Value",-1)])]),_:1})]),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.value,(l,a)=>((0,t.uX)(),(0,t.Wv)(h.A,{key:a,class:(0,o.C4)({error:m.value.includes(a)})},{default:(0,t.k6)(()=>[(0,t.bF)(k.A,null,{default:(0,t.k6)(()=>[(0,t.bF)(f.A,{disableCloseBrackets:"",disableEnter:"",disableTabIndent:"",lineWrapping:"",environment:e.environment,envVariables:e.envVariables,modelValue:l.key,placeholder:"Key",workspace:e.workspace,"onUpdate:modelValue":e=>C(a,"key",e)},(0,t.eX)({_:2},[m.value.includes(a)?{name:"icon",fn:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(i.aQ8),{class:"text-red mr-0.75 size-3.5 brightness-[.9]"})]),key:"0"}:void 0]),1032,["environment","envVariables","modelValue","workspace","onUpdate:modelValue"])]),_:2},1024),(0,t.bF)(k.A,null,{default:(0,t.k6)(()=>[(0,t.bF)(f.A,{class:"pr-6 group-hover:pr-10 group-has-[.cm-focused]:pr-10",disableCloseBrackets:"",disableEnter:"",disableTabIndent:"",lineWrapping:"",environment:e.environment,envVariables:e.envVariables,modelValue:l.value,placeholder:"Value",workspace:e.workspace,"onUpdate:modelValue":e=>C(a,"value",e)},{icon:(0,t.k6)(()=>[l.key||l.value?((0,t.uX)(),(0,t.Wv)((0,n.R1)(r.RO),{key:0,class:"text-c-2 hover:text-c-1 hover:bg-b-2 z-context hidden h-fit rounded p-1 group-hover:flex group-has-[.cm-focused]:flex",size:"sm",variant:"ghost",onClick:(0,p.D$)(e=>F(a),["stop"])},{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(i.QIv),{class:"size-3.5"})]),_:1},8,["onClick"])):(0,t.Q3)("",!0)]),_:2},1032,["environment","envVariables","modelValue","workspace","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}))}}),y=(0,a(13077).A)(C,[["__scopeId","data-v-83bfcc8a"]]);var F=a(32695);let R={class:"flex h-full w-full flex-col gap-12 px-1.5 pt-8"},w={class:"flex flex-col gap-4"},_={class:"rounded-lg border"},E={class:"bg-b-2 flex cursor-grab items-center justify-between rounded-t-lg px-1 py-1 text-sm"},W={class:"flex items-center"},A=["onClick"],L={class:"text-c-3 flex h-full items-center justify-center rounded-lg border p-4"},V=(0,t.pM)({__name:"CollectionEnvironment",setup(e){let{activeCollection:l,activeWorkspace:a,activeEnvVariables:p}=(0,F.JC)(),{collectionMutators:f}=(0,x.hA)(),b=(0,r.hS)(),k=(0,r.hS)(),g=(0,r.hS)(),h=(0,r.hS)(),C=(0,n.KR)(""),V=(0,n.KR)(null),D=(0,n.KR)(void 0),I=(0,t.EW)(()=>l.value?.["x-scalar-environments"]?Object.entries(l.value["x-scalar-environments"]).map(([e,l])=>({uid:e,name:e,value:JSON.stringify(l.variables||{}),color:l.color||"#FFFFFF"})):[]),S=()=>{l.value?.uid&&V.value&&(f.removeEnvironment(V.value,l.value.uid),k.hide())},X=e=>{V.value=e,k.show()},K=e=>{l.value?.uid&&(f.addEnvironment(e.name,{variables:{},color:e.color},l.value.uid),g.hide())},z=e=>{V.value=e.name,C.value=e.color||"#FFFFFF",b.show()},M=e=>{if(!l.value?.uid||!V.value)return;let a={...l.value["x-scalar-environments"],[V.value]:{variables:l.value["x-scalar-environments"]?.[V.value]?.variables||{},color:e}};f.edit(l.value.uid,"x-scalar-environments",a),b.hide()},T=e=>{V.value=e,D.value=e,h.show()},B=()=>{V.value=null,D.value=void 0,h.hide()},O=e=>{if(!l.value?.uid||!V.value)return;let a={...l.value["x-scalar-environments"]};if(!a[V.value])return;let t={},n=Object.entries(a),o=n.findIndex(([e])=>e===V.value);n.forEach(([l,a],n)=>{n===o?t[e]=a:t[l]=a}),f.edit(l.value.uid,"x-scalar-environments",t),V.value=null,D.value=void 0,h.hide()},j=(e,a)=>{if(!l.value?.uid)return;let t={...l.value["x-scalar-environments"]},n={},o=Object.entries(t),r=o.findIndex(([l])=>l===e.id),s=o.findIndex(([e])=>e===a.id);if(-1===r||-1===s)return;let i=o[r];i&&(o.splice(r,1),o.splice(s,0,i),o.forEach(([e,l])=>{n[e]=l}),f.edit(l.value.uid,"x-scalar-environments",n))};return(e,f)=>((0,t.uX)(),(0,t.Wv)(v.A,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",R,[(0,t.Lk)("div",w,[f[5]||(f[5]=(0,t.Lk)("div",{class:"flex items-start justify-between gap-2"},[(0,t.Lk)("div",{class:"flex flex-col gap-2"},[(0,t.Lk)("div",{class:"flex h-8 items-center"},[(0,t.Lk)("h3",{class:"font-bold"},"Environment Variables")]),(0,t.Lk)("p",{class:"text-sm"},[(0,t.eW)(" Set environment variables at your collection level. Use "),(0,t.Lk)("code",{class:"font-code text-c-2"},"{{ variable }}"),(0,t.eW)(" to add / search among the selected environment's variables in your request inputs. ")])])],-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(I.value,e=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(s.s),{key:e.name,id:e.name,isDraggable:!0,isDroppable:!0,parentIds:[],onOnDragEnd:j},{default:(0,t.k6)(()=>[(0,t.Lk)("div",_,[(0,t.Lk)("div",E,[(0,t.Lk)("div",W,[(0,t.bF)((0,n.R1)(r.RO),{class:"hover:bg-b-3 flex h-6 w-6 p-1",onClick:l=>z(e),variant:"ghost"},{default:(0,t.k6)(()=>[(0,t.Lk)("span",{style:(0,o.Tr)({backgroundColor:e.color||"#FFFFFF"}),class:"h-2.5 w-2.5 rounded-full"},null,4)]),_:2},1032,["onClick"]),(0,t.Lk)("button",{class:"hover:bg-b-3 rounded px-1 py-0.5 text-sm",onClick:l=>T(e.name)},(0,o.v_)(e.name),9,A)]),(0,t.bF)((0,n.R1)(r.RO),{class:"hover:bg-b-3 hover:text-c-1 h-fit p-1.25",variant:"ghost",onClick:l=>X(e.name)},{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(i.QIv),{class:"size-3.5"})]),_:1},8,["onClick"])]),(0,n.R1)(l)&&(0,n.R1)(a)?((0,t.uX)(),(0,t.Wv)(y,{key:0,collection:(0,n.R1)(l),environment:e,envVariables:(0,n.R1)(p),workspace:(0,n.R1)(a)},null,8,["collection","environment","envVariables","workspace"])):(0,t.Q3)("",!0)])]),_:2},1032,["id"]))),128)),(0,t.Lk)("div",L,[(0,t.bF)((0,n.R1)(r.RO),{class:"hover:bg-b-2 hover:text-c-1 flex items-center gap-2",size:"sm",variant:"ghost",onClick:f[0]||(f[0]=e=>(0,n.R1)(g).show())},{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(r.kv),{class:"inline-flex",icon:"Add",size:"sm",thickness:"1.5"}),f[4]||(f[4]=(0,t.Lk)("span",null,"Add Environment",-1))]),_:1})])]),(0,t.bF)((0,n.R1)(r.uT),{size:"xxs",state:(0,n.R1)(k),title:`Delete ${V.value||"Environment"}`},{default:(0,t.k6)(()=>[(0,t.bF)(u.A,{variableName:"Environment",warningMessage:"Are you sure you want to delete this environment? This action cannot be undone.",onClose:f[1]||(f[1]=e=>(0,n.R1)(k).hide()),onDelete:S})]),_:1},8,["state","title"]),(0,t.bF)(m.A,{activeWorkspaceCollections:(0,n.R1)(l)?[(0,n.R1)(l)]:[],collectionId:n.R1(l)?.uid,state:(0,n.R1)(g),onCancel:f[2]||(f[2]=e=>(0,n.R1)(g).hide()),onSubmit:K},null,8,["activeWorkspaceCollections","collectionId","state"]),(0,t.bF)(d.A,{selectedColor:C.value,state:(0,n.R1)(b),onCancel:f[3]||(f[3]=e=>(0,n.R1)(b).hide()),onSubmit:M},null,8,["selectedColor","state"]),(0,t.bF)((0,n.R1)(r.uT),{size:"xxs",state:(0,n.R1)(h),title:`Edit ${V.value}`},{default:(0,t.k6)(()=>[(0,t.bF)(c.A,{name:D.value??"",onClose:B,onEdit:O},null,8,["name"])]),_:1},8,["state","title"])])]),_:1}))}})},81373:(e,l,a)=>{a.d(l,{A:()=>u});var t=a(84363),n=a(88123),o=a(47547),r=a(18729),s=a(33309);let i={class:"flex flex-col gap-4"},u=(0,t.pM)({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(e,{emit:l}){let a=(0,n.KR)(""),u=e=>{a.value=e},c=()=>{l("submit",a.value),a.value=""};return(v,d)=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(o.uT),{size:"xxs",state:e.state,title:"Edit Environment Color"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",i,[(0,t.bF)(s.A,{activeColor:a.value||e.selectedColor,class:"w-full p-1",onSelect:u},null,8,["activeColor"]),(0,t.bF)(r.A,{onCancel:d[0]||(d[0]=e=>l("cancel")),onSubmit:c})])]),_:1},8,["state"]))}})},33309:(e,l,a)=>{a.d(l,{A:()=>c});var t=a(84363),n=a(88123),o=a(15475),r=a(61629),s=a(47547);let i=["onClick"],u=["placeholder"],c=(0,t.pM)({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:l}){let a=(0,n.KR)(""),c=(0,n.KR)(null),v=(0,n.KR)(!1),d=(0,n.KR)(!1),m=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],p=(0,t.EW)(()=>e.activeColor&&!m.some(l=>l.color===e.activeColor)||a.value?`background-color: ${e.activeColor||a.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),f=()=>{v.value=!v.value,e.selector&&(d.value=!1),(0,t.dY)(()=>{c.value&&c.value.focus()})};(0,t.wB)(a,e=>{e&&!e.startsWith("#")&&(a.value=`#${e}`),v.value=!0});let b=()=>{e.selector&&(d.value=!d.value)},k=a=>{l("select",a),e.selector&&(d.value=!1)};return(l,g)=>((0,t.uX)(),(0,t.CE)("div",null,[v.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[e.selector&&!d.value?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,o.C4)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)({backgroundColor:e.activeColor}),onClick:b},[e.activeColor?((0,t.uX)(),(0,t.Wv)((0,n.R1)(s.kv),{key:0,class:(0,o.C4)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):(0,t.Q3)("",!0)],6)):(0,t.Q3)("",!0),d.value||!e.selector?((0,t.uX)(),(0,t.CE)("div",{key:1,class:(0,o.C4)(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",e.selector?"h-4":"min-h-10 min-w-[296px]"])},[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(m,l=>(0,t.Lk)("div",{key:l.color,class:(0,o.C4)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)({backgroundColor:l.color}),onClick:e=>k(l.color)},[e.activeColor!==l.color||a.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)((0,n.R1)(s.kv),{key:0,class:(0,o.C4)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"]))],14,i)),64)),g[2]||(g[2]=(0,t.Lk)("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),(0,t.Lk)("label",{class:(0,o.C4)(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)(p.value),onClick:f},[v.value||e.activeColor!==a.value&&(!e.activeColor||m.some(l=>l.color===e.activeColor))?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)((0,n.R1)(s.kv),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"}))],6)],2)):(0,t.Q3)("",!0)],64)),v.value?((0,t.uX)(),(0,t.CE)("div",{key:1,class:(0,o.C4)(["color-selector flex flex-1 items-center gap-2 rounded",e.selector?"h-4":"min-h-10"])},[(0,t.Lk)("span",{class:(0,o.C4)(["absolute rounded-full border border-dashed",e.selector?"h-4 w-4":"h-5 w-5"])},null,2),(0,t.Lk)("span",{class:(0,o.C4)(["z-[1] rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)(p.value)},null,6),(0,t.bo)((0,t.Lk)("input",{ref_key:"customColorInputRef",ref:c,"onUpdate:modelValue":g[0]||(g[0]=e=>a.value=e),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:g[1]||(g[1]=e=>k(a.value))},null,40,u),[[r.Jo,a.value]]),(0,t.Lk)("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:f},[(0,t.bF)((0,n.R1)(s.kv),{icon:"Checkmark",size:"xs"})])],2)):(0,t.Q3)("",!0)]))}})},94426:(e,l,a)=>{a.d(l,{A:()=>m});var t=a(84363),n=a(88123),o=a(15475),r=a(47547),s=a(46593),i=a(24500),u=a(43346),c=a(33309),v=a(7162);let d={class:"flex items-start gap-2"},m=(0,t.pM)({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(e,{emit:l}){let{events:a}=(0,v.hA)(),m=(0,n.KR)(""),p=(0,n.KR)("#FFFFFF"),f=(0,t.EW)(()=>[...e.activeWorkspaceCollections.filter(e=>e.info?.title!=="Drafts").map(e=>({id:e.uid,label:e.info?.title??"Untitled Collection"}))]),b=(0,n.KR)(f.value.find(l=>l.id===e.collectionId)),{toast:k}=(0,s.Yf)(),g=e=>{p.value=e};(0,t.wB)(()=>e.state.open,l=>{l&&(m.value="",p.value="#FFFFFF",e.collectionId?b.value=f.value.find(l=>l.id===e.collectionId):b.value=void 0)});let h=()=>{if(!m.value.trim()){k("Please enter a name before adding an environment.","error");return}if(!b.value?.id){k("Please select a collection before adding an environment.","error");return}l("submit",{name:m.value,color:p.value,type:b.value?.id==="global"?"global":"collection",collectionId:b.value?.id!=="global"?b.value?.id:void 0})},x=()=>{e.state.hide(),a.commandPalette.emit({commandName:"Create Collection"})};return(a,s)=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(r.uT),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:(0,t.k6)(()=>[(0,t.bF)(i.A,{disabled:!b.value||!m.value.trim(),onCancel:s[2]||(s[2]=e=>l("cancel")),onSubmit:h},{options:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(r.cy),{modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=e=>b.value=e),options:f.value,placeholder:"Select Type"},{default:(0,t.k6)(()=>[f.value.length>0?((0,t.uX)(),(0,t.Wv)((0,n.R1)(r.RO),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:(0,t.k6)(()=>[(0,t.Lk)("span",{class:(0,o.C4)(b.value?"text-c-1":"text-c-3")},(0,o.v_)(b.value?b.value.label:"Select Collection"),3),(0,t.bF)((0,n.R1)(r.kv),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):((0,t.uX)(),(0,t.Wv)((0,n.R1)(r.RO),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:x},{default:(0,t.k6)(()=>[...s[3]||(s[3]=[(0,t.Lk)("span",{class:"text-c-1"},"Create Collection",-1)])]),_:1}))]),_:1},8,["modelValue","options"])]),submit:(0,t.k6)(()=>[...s[4]||(s[4]=[(0,t.eW)(" Add Environment ",-1)])]),default:(0,t.k6)(()=>[(0,t.Lk)("div",d,[(0,t.bF)(c.A,{activeColor:p.value,class:"peer",selector:"",onSelect:g},null,8,["activeColor"]),(0,t.bF)(u.A,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}})},4270:(e,l,a)=>{a.d(l,{s:()=>v});var t=a(84363),n=a(15475),o=a(61629),r=a(88123);let s=(0,r.KR)(null),i=(0,r.KR)(null),u=(e,l)=>{let a=!1;return(...t)=>{a||(e(...t),a=!0,setTimeout(()=>a=!1,l))}},c=["draggable"],v=((e,l)=>{let a=e.__vccOpts||e;for(let[e,t]of l)a[e]=t;return a})((0,t.pM)({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(e,{expose:l,emit:a}){let v=(0,t.EW)(()=>e.parentIds.at(-1)??null),d=l=>{l.dataTransfer&&l.target instanceof HTMLElement&&e.isDraggable&&(l.target.classList.add("dragging"),l.dataTransfer.dropEffect="move",l.dataTransfer.effectAllowed="move",s.value={id:e.id,parentId:v.value},a("onDragStart",{id:e.id,parentId:v.value}))},m=l=>"function"==typeof e.isDroppable?e.isDroppable(s.value,{id:e.id,parentId:v.value,offset:l}):e.isDroppable,p=u(l=>{if(!s.value||s.value.id===e.id||e.parentIds.includes(s.value?.id??""))return;let a=i.value?.offset,t=l.target.offsetHeight,n=e.floor*t,o=e.ceiling*t,r=3;l.offsetY<=0&&a&&3!==a?r=a:l.offsetY<=n?r=0:l.offsetY>=o?r=1:l.offsetY>n&&l.offsetY<o&&(r=2),m(r)&&(i.value={id:e.id,parentId:v.value,offset:r})},25),f=["above","below","asChild"],b=(0,t.EW)(()=>{let l="sidebar-indent-nested";return e.id===i.value?.id&&(l+=` dragover-${f[i.value.offset]}`),l}),k=()=>{if(!i.value||!s.value)return;let e={...s.value},l={...i.value};s.value=null,i.value=null,document.querySelectorAll("div.dragging").forEach(e=>e.classList.remove("dragging")),e.id!==l.id&&a("onDragEnd",e,l)};return l({draggingItem:s,hoveredItem:i}),(e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:(0,n.C4)(b.value),draggable:e.isDraggable,onDragend:k,onDragover:l[0]||(l[0]=(0,o.D$)((...e)=>(0,r.R1)(p)&&(0,r.R1)(p)(...e),["prevent","stop"])),onDragstart:(0,o.D$)(d,["stop"])},[(0,t.RG)(e.$slots,"default",{},void 0,!0)],42,c))}}),[["__scopeId","data-v-a89d6a6e"]])}}]);