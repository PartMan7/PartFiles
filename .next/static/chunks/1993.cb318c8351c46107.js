"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1993],{12576:(e,l,a)=>{a.d(l,{A:()=>i});var t=a(84363),n=a(15475),o=a(18729);let r={key:0,class:"text-c-2 text-sm leading-normal text-pretty"},i=(0,t.pM)({__name:"DeleteSidebarListElement",props:{variableName:{},warningMessage:{}},emits:["close","delete"],setup(e,{emit:l}){let a=(0,t.EW)(()=>e.variableName.length>18?e.variableName.slice(0,18)+"â€¦":e.variableName);return(i,s)=>((0,t.uX)(),(0,t.Wv)(o.A,{danger:"",label:`Delete ${a.value}`,onCancel:s[0]||(s[0]=e=>l("close")),onSubmit:s[1]||(s[1]=e=>l("delete"))},{default:(0,t.k6)(()=>[e.warningMessage?((0,t.uX)(),(0,t.CE)("p",r,(0,n.v_)(e.warningMessage),1)):(0,t.Q3)("",!0)]),_:1},8,["label"]))}})},62875:(e,l,a)=>{a.d(l,{A:()=>i});var t=a(84363),n=a(88123),o=a(47547),r=a(18729);let i=(0,t.pM)({__name:"EditSidebarListElement",props:{name:{}},emits:["close","edit"],setup(e,{emit:l}){let a=(0,n.KR)(e.name);return(e,i)=>((0,t.uX)(),(0,t.Wv)(r.A,{onCancel:i[1]||(i[1]=e=>l("close")),onSubmit:i[2]||(i[2]=e=>l("edit",a.value))},{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(o.SB),{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=e=>a.value=e),autofocus:""},null,8,["modelValue"])]),_:1}))}})},18729:(e,l,a)=>{a.d(l,{A:()=>u});var t=a(84363),n=a(61629),o=a(88123),r=a(15475),i=a(47547);let s={class:"flex justify-between gap-10"},u=(0,t.pM)({__name:"SidebarListElementForm",props:{danger:{type:Boolean},label:{}},emits:["cancel","submit"],setup:(e,{emit:l})=>(a,u)=>((0,t.uX)(),(0,t.CE)("form",{class:"flex flex-col gap-4 text-base",onSubmit:u[1]||(u[1]=(0,n.D$)(e=>l("submit"),["prevent"]))},[(0,t.RG)(a.$slots,"default"),(0,t.Lk)("div",s,[(0,t.bF)((0,o.R1)(i.RO),{size:"sm",type:"button",variant:"outlined",onClick:u[0]||(u[0]=e=>l("cancel"))},{default:(0,t.k6)(()=>[...u[2]||(u[2]=[(0,t.eW)(" Cancel ",-1)])]),_:1}),(0,t.bF)((0,o.R1)(i.RO),{"data-testid":"sidebar-list-element-form-submit-button",size:"sm",type:"submit",variant:e.danger?"danger":"solid"},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)(e.label??"Save"),1)]),_:1},8,["variant"])])],32))})},31601:(e,l,a)=>{a.d(l,{A:()=>i});var t=a(84363),n=a(88123),o=a(47547),r=a(47495);let i=(0,t.pM)({__name:"SidebarButton",props:{click:{type:Function},hotkey:{}},setup(e){let{layout:l}=(0,r.g)(),a=()=>{e.click()};return(r,i)=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(o.RO),{class:"bg-b-1 text-c-1 hover:bg-b-2 group relative h-auto w-auto border px-2 py-1 md:w-full md:p-1.5",variant:"outlined",onClick:a},{default:(0,t.k6)(()=>[(0,t.RG)(r.$slots,"title"),e.hotkey&&"desktop"===(0,n.R1)(l)?((0,t.uX)(),(0,t.Wv)((0,n.R1)(o.RH),{key:0,class:"text-c-2 add-item-hotkey absolute right-2 hidden group-hover:opacity-80 md:flex",hotkey:e.hotkey},null,8,["hotkey"])):(0,t.Q3)("",!0)]),_:3}))}})},88609:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(84363),n=a(13077);let o={class:"gap-1/2 flex flex-col px-3 pb-[75px]"},r=(0,n.A)({},[["render",function(e,l){return(0,t.uX)(),(0,t.CE)("ul",o,[(0,t.RG)(e.$slots,"default")])}]])},50084:(e,l,a)=>{a.d(l,{A:()=>f});var t=a(84363),n=a(88123),o=a(15475),r=a(61629),i=a(47547),s=a(4270),u=a(89693),c=a(1294),d=a(12576);let v={class:"absolute right-1 flex opacity-0 group-hover:opacity-100"},m=(0,t.pM)({__name:"SidebarListElementActions",props:{variable:{},warningMessage:{},isCopyable:{type:Boolean},isDeletable:{type:Boolean},isRenameable:{type:Boolean}},emits:["delete","rename"],setup(e,{emit:l}){let a=(0,n.KR)({action:"None",name:""}),o=(0,i.hS)(),{copyToClipboard:s}=(0,c.i)();function u(){o.hide(),a.value={action:"None",name:""}}return(c,m)=>((0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",v,[e.isCopyable?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"text-c-3 hover:bg-b-3 hover:text-c-1 rounded p-[5px]",type:"button",onClick:m[0]||(m[0]=l=>(0,n.R1)(s)(e.variable.name))},[(0,t.bF)((0,n.R1)(i.kv),{class:"h-3 w-3",icon:"Clipboard"})])):(0,t.Q3)("",!0),e.isRenameable?((0,t.uX)(),(0,t.CE)("button",{key:1,class:"text-c-3 hover:bg-b-3 hover:text-c-1 rounded p-[5px]",type:"button",onClick:m[1]||(m[1]=a=>l("rename",e.variable.uid))},[(0,t.bF)((0,n.R1)(i.kv),{class:"h-3 w-3",icon:"Edit"})])):(0,t.Q3)("",!0),!e.variable.isDefault&&e.isDeletable?((0,t.uX)(),(0,t.CE)("button",{key:2,class:"text-c-3 hover:bg-b-3 hover:text-c-1 rounded p-1",type:"button",onClick:m[2]||(m[2]=(0,r.D$)(l=>void(a.value={action:"Delete",name:e.variable.name},o.show()),["prevent"]))},[(0,t.bF)((0,n.R1)(i.kv),{class:"h-3.5 w-3.5",icon:"Close"})])):(0,t.Q3)("",!0)]),(0,t.bF)((0,n.R1)(i.uT),{size:"sm",state:(0,n.R1)(o),title:`${a.value.action} ${a.value.name}`},{default:(0,t.k6)(()=>["Delete"===a.value.action?((0,t.uX)(),(0,t.Wv)(d.A,{key:0,variableName:a.value.name,warningMessage:e.warningMessage,onClose:u,onDelete:m[3]||(m[3]=a=>{l("delete",e.variable.uid),u()})},null,8,["variableName","warningMessage"])):(0,t.Q3)("",!0)]),_:1},8,["state","title"])],64))}}),p={class:"empty-variable-name line-clamp-1 text-sm break-all group-hover:pr-5"},b=(0,t.pM)({__name:"SidebarListElement",props:{variable:{},warningMessage:{},to:{},isDeletable:{type:Boolean},isCopyable:{type:Boolean},isRenameable:{type:Boolean},isDraggable:{type:Boolean,default:!1},isDroppable:{type:[Boolean,Function],default:!1},collectionId:{}},emits:["delete","colorModal","rename","onDragEnd"],setup(e,{emit:l}){let a=(0,u.rd)(),c=l=>{l.metaKey?window.open(a.resolve(e.to).href,"_blank"):a.push(e.to)},d=e=>{l("delete",e)},v=e=>{l("colorModal",e)},b=e=>{l("rename",e)},f=(0,n.KR)(null),g=(0,t.EW)(()=>({ceiling:.5,floor:.5}));return(l,a)=>{let u=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("li",null,[(0,t.bF)((0,n.R1)(s.s),{id:e.variable.uid,ref_key:"_draggableRef",ref:f,ceiling:g.value.ceiling,floor:g.value.floor,isDraggable:e.isDraggable,isDroppable:e.isDroppable,parentIds:e.collectionId?[e.collectionId]:[],onOnDragEnd:a[2]||(a[2]=(...e)=>l.$emit("onDragEnd",...e))},{default:(0,t.k6)(()=>[(0,t.bF)(u,{class:(0,o.C4)(["text-c-2 hover:bg-b-2 group relative flex h-8 items-center gap-1.5 rounded py-1 pr-1.5 font-medium no-underline",[e.variable.color?"pl-5":"pl-1.5"]]),exactActiveClass:"bg-b-2 !text-c-1",role:"button",to:e.to,onClick:a[1]||(a[1]=(0,r.D$)(e=>c(e),["prevent"]))},{default:(0,t.k6)(()=>[e.variable.color?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"hover:bg-b-3 rounded p-1.5",type:"button",onClick:a[0]||(a[0]=l=>v(e.variable.uid))},[(0,t.Lk)("div",{class:"h-2.5 w-2.5 rounded-xl",style:(0,o.Tr)({backgroundColor:e.variable.color})},null,4)])):(0,t.Q3)("",!0),e.variable.icon?((0,t.uX)(),(0,t.Wv)((0,n.R1)(i.kv),{key:1,class:"text-sidebar-c-2 size-3.5 stroke-[2.25]",icon:e.variable.icon},null,8,["icon"])):(0,t.Q3)("",!0),(0,t.Lk)("span",p,(0,o.v_)(e.variable.name),1),(0,t.bF)(m,{isCopyable:!!e.isCopyable,isDeletable:!!e.isDeletable,isRenameable:!!e.isRenameable,variable:{...e.variable,isDefault:e.variable.isDefault??!1},warningMessage:e.warningMessage,onDelete:d,onRename:b},null,8,["isCopyable","isDeletable","isRenameable","variable","warningMessage"])]),_:1},8,["class","to"])]),_:1},8,["id","ceiling","floor","isDraggable","isDroppable","parentIds"])])}}}),f=(0,a(13077).A)(b,[["__scopeId","data-v-298ba76d"]])},91993:(e,l,a)=>{a.r(l),a.d(l,{default:()=>A});var t=a(84363),n=a(88123),o=a(15475),r=a(61629),i=a(47547),s=a(91574),u=a(46593),c=a(89693),d=a(12022),v=a(62875),m=a(39502),p=a(31601),b=a(88609),f=a(50084),g=a(62449),k=a(46902),x=a(35028),C=a(11291),h=a(44045),y=a(32695),R=a(81373),E=a(94426),F=a(7162);let w={class:"flex-1"},D=["onClick"],_={class:"flex h-5 max-w-[14px] items-center justify-center"},A=(0,t.pM)({__name:"Environment",setup(e){let l=(0,c.rd)(),a=(0,c.lq)(),{activeWorkspace:A,activeEnvironment:I,activeWorkspaceCollections:W,activeEnvVariables:X}=(0,y.JC)(),{events:M,workspaceMutators:T,collectionMutators:L}=(0,F.hA)(),{collapsedSidebarFolders:S,toggleSidebarFolder:K}=(0,C.cL)(),U=(0,i.hS)(),B=(0,i.hS)(),O=(0,i.hS)(),$=(0,n.KR)(null),j=(0,n.KR)("default"),z=(0,n.KR)(""),N=(0,n.KR)(void 0),Q=(0,n.KR)(void 0),V=(0,n.KR)(void 0),{toast:G}=(0,u.Yf)(),Y=e=>JSON.parse(e);function J(e,l,a){e&&(l.uid===a?G(`Environment name already used in ${l.info?.title}`,"error"):G("Environment name already used in another collection","error"))}let q=(0,t.EW)(()=>W.value.filter(e=>e.info?.title!=="Drafts"));function H(e){q.value.some(l=>{let a=Object.keys(l["x-scalar-environments"]||{}).includes(e.name);return J(a,l,e.collectionId),a})||(e.collectionId&&(L.addEnvironment(e.name,{variables:{},color:e.color},e.collectionId),S[e.collectionId]||K(e.collectionId),l.push({name:"environment.collection",params:{[h.TU.Collection]:e.collectionId,[h.TU.Environment]:e.name}})),B.hide())}function P(e){if(!I)return;let l=Y(e);if("default"===j.value)T.edit(A.value?.uid,"environments",l);else{let e=W.value.find(e=>e["x-scalar-environments"]?.[j.value??""]);if(e?.["x-scalar-environments"]?.[j.value??""]){let a=e["x-scalar-environments"][j.value??""];a&&(a.variables=l,L.edit(e.uid,"x-scalar-environments",e["x-scalar-environments"]))}}}let Z=e=>{N.value=e,B.show()},ee=(e,l)=>{Q.value=e,N.value=l,V.value=e,O.show()},el=e=>{$.value=e,z.value=W.value.find(l=>l["x-scalar-environments"]?.[e])?.["x-scalar-environments"]?.[e]?.color??"",U.show()},ea=e=>{let l=$.value;"string"==typeof l&&(W.value.some(e=>e["x-scalar-environments"]?.[l])&&W.value.forEach(a=>{a["x-scalar-environments"]?.[l]&&(a["x-scalar-environments"][l].color=e,L.edit(a.uid,"x-scalar-environments",a["x-scalar-environments"]))}),U.hide())},et=()=>"default"===j.value?"Global Environment":j.value,en=()=>"default"===j.value?JSON.stringify(A.value?.environments,null,2):JSON.stringify(W.value.find(e=>e["x-scalar-environments"]?.[j.value??""])?.["x-scalar-environments"]?.[j.value??""]?.variables,null,2),eo=e=>S[e],er=e=>{e?.createNew&&"environment"===a.name&&Z()};(0,t.wB)(()=>[a.params[h.TU.Collection],a.params[h.TU.Environment]],([e,l])=>{e?j.value=l:j.value="default"}),(0,t.sV)(()=>{j.value=a.params[h.TU.Environment]||"default",M.hotKeys.on(er);let e=a.params[h.TU.Collection];e&&!S[e]&&K(e)}),(0,t.xo)(()=>M.hotKeys.off(er));let ei=(e,a,t)=>{let n=t?{name:"environment.collection",params:{[h.TU.Workspace]:A.value?.uid,[h.TU.Collection]:t,[h.TU.Environment]:a}}:{name:"environment.default",params:{[h.TU.Workspace]:A.value?.uid,[h.TU.Environment]:a}};e.metaKey?window.open(l.resolve(n).href,"_blank"):l.push(n)};function es(){Q.value=void 0,N.value=void 0,V.value=void 0,O.hide()}function eu(e){q.value.some(l=>{let a=Object.keys(l["x-scalar-environments"]||{}).includes(e);return J(a,l,N.value),a})||(e&&"default"!==Q.value&&W.value.forEach(l=>{if(l["x-scalar-environments"]?.[Q.value??""]){let a=l["x-scalar-environments"],t={};Object.keys(a).forEach(l=>{let n=a[l];n&&(l===Q.value?t[e]=n:t[l]=n)}),l["x-scalar-environments"]=t,L.edit(l.uid,"x-scalar-environments",l["x-scalar-environments"])}}),e&&j.value===Q.value&&(j.value=e),Q.value=void 0,N.value=void 0,V.value=void 0,O.hide())}let{handleDragEnd:ec,isDroppable:ed}={handleDragEnd:(e,l)=>{if(!e||!l)return;let{id:a,parentId:t}=e,{id:n,parentId:o,offset:r}=l;if(t!==o)return;let i=W.value.find(e=>e.uid===t);if(!i||!i["x-scalar-environments"])return;let s=i["x-scalar-environments"],u=Object.keys(s);({...s});let c=u.findIndex(e=>e===a);u.splice(c,1);let d=u.findIndex(e=>e===n)+(1===r?1:0);u.splice(d,0,a);let v=u.reduce((e,l)=>{let a=s[l];return a&&(e[l]=a),e},{});i["x-scalar-environments"]=v,L.edit(i.uid,"x-scalar-environments",i["x-scalar-environments"])},isDroppable:(e,l)=>e.parentId===l.parentId};return(0,t.wB)(()=>a.query.openEnvironmentModal,e=>{"true"===e&&Z()},{immediate:!0}),(e,a)=>((0,t.uX)(),(0,t.Wv)(g.A,null,{default:(0,t.k6)(()=>[(0,t.bF)(m.A,{title:"Collections"},{content:(0,t.k6)(()=>[(0,t.Lk)("div",w,[(0,t.bF)(b.A,null,{default:(0,t.k6)(()=>[((0,t.uX)(),(0,t.Wv)(f.A,{key:"default",class:"text-xs",isCopyable:!1,to:{name:"environment",params:{[(0,n.R1)(h.TU).Environment]:"default"}},type:"environment",variable:{name:"Global Environment",uid:"default",icon:"Globe",isDefault:!0}},null,8,["to"])),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(q.value,e=>((0,t.uX)(),(0,t.CE)("li",{key:e.uid,class:"gap-1/2 flex flex-col"},[(0,t.Lk)("button",{class:"hover:bg-b-2 group flex w-full items-center gap-1.5 rounded p-1.5 text-left text-sm font-medium break-words",type:"button",onClick:l=>(0,n.R1)(K)(e.uid)},[(0,t.Lk)("span",_,[(0,t.bF)((0,n.R1)(s.$n),{class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:e["x-scalar-icon"]||"interface-content-folder"},null,8,["src"]),(0,t.Lk)("div",{class:(0,o.C4)({"rotate-90":(0,n.R1)(S)[e.uid]})},[(0,t.bF)((0,n.R1)(i.kv),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]),(0,t.eW)(" "+(0,o.v_)(e.info?.title??""),1)],8,D),(0,t.bo)((0,t.Lk)("div",{class:(0,o.C4)({"before:bg-border relative mb-[.5px] before:pointer-events-none before:absolute before:top-0 before:left-3 before:z-1 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":Object.keys(e["x-scalar-environments"]||{}).length>0})},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e["x-scalar-environments"],(a,o)=>((0,t.uX)(),(0,t.Wv)(f.A,{key:o,class:"text-xs",collectionId:e.uid,isCopyable:!1,isDeletable:!0,isRenameable:!0,isDraggable:!0,isDroppable:(0,n.R1)(ed),to:{name:"environment.collection",params:{[(0,n.R1)(h.TU).Collection]:e.uid,[(0,n.R1)(h.TU).Environment]:o}},type:"environment",variable:{name:o,uid:o,color:a.color??"#FFFFFF",isDefault:!1},warningMessage:"Are you sure you want to delete this environment?",onClick:(0,r.D$)(l=>ei(l,o,e.uid),["prevent"]),onColorModal:e=>el(o),onDelete:e=>(function(e){q.value.forEach(l=>{L.removeEnvironment(e,l.uid)});let a=q.value.flatMap(e=>Object.keys(e["x-scalar-environments"]||{}));if(a.length>0){let e=a[a.length-1];if(!e)return;let t=W.value.find(l=>Object.keys(l["x-scalar-environments"]||{}).includes(e));j.value=e,l.push({name:"environment.collection",params:{[h.TU.Collection]:t?.uid,[h.TU.Environment]:e}}),t&&!S[t.uid]&&K(t.uid)}else j.value="default",l.push({name:"environment.default",params:{[h.TU.Workspace]:A.value?.uid}})})(o),onRename:l=>ee(o,e.uid),onOnDragEnd:(0,n.R1)(ec)},null,8,["collectionId","isDroppable","to","variable","onClick","onColorModal","onDelete","onRename","onOnDragEnd"]))),128)),0===Object.keys(e["x-scalar-environments"]||{}).length?((0,t.uX)(),(0,t.Wv)((0,n.R1)(i.RO),{key:0,class:"text-c-1 hover:bg-b-2 flex h-8 w-full justify-start gap-1.5 py-0 pl-6 text-xs",variant:"ghost",onClick:l=>Z(e.uid)},{default:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(i.kv),{icon:"Add",size:"sm"}),a[2]||(a[2]=(0,t.Lk)("span",null,"Add Environment",-1))]),_:1},8,["onClick"])):(0,t.Q3)("",!0)],2),[[r.aG,eo(e.uid)]])]))),128))]),_:1})])]),button:(0,t.k6)(()=>[(0,t.bF)(p.A,{click:Z,hotkey:"N"},{title:(0,t.k6)(()=>[...a[3]||(a[3]=[(0,t.eW)(" Add Environment ",-1)])]),_:1})]),_:1}),(0,t.bF)(k.A,{class:"flex-1"},{default:(0,t.k6)(()=>[(0,t.bF)(x.A,null,(0,t.eX)({default:(0,t.k6)(()=>[j.value&&(0,n.R1)(A)?((0,t.uX)(),(0,t.Wv)(d.A,{key:0,class:"py-2 pr-2 pl-px md:px-4",envVariables:(0,n.R1)(X),environment:(0,n.R1)(I),language:"json",lineNumbers:"",lint:"",modelValue:en(),workspace:(0,n.R1)(A),"onUpdate:modelValue":P},null,8,["envVariables","environment","modelValue","workspace"])):(0,t.Q3)("",!0)]),_:2},[j.value?{name:"title",fn:(0,t.k6)(()=>[(0,t.Lk)("span",null,(0,o.v_)(et()),1)]),key:"0"}:void 0]),1024)]),_:1}),(0,t.bF)(R.A,{selectedColor:z.value,state:(0,n.R1)(U),onCancel:a[0]||(a[0]=e=>(0,n.R1)(U).hide()),onSubmit:ea},null,8,["selectedColor","state"]),(0,t.bF)(E.A,{activeWorkspaceCollections:q.value,collectionId:N.value,state:(0,n.R1)(B),onCancel:a[1]||(a[1]=e=>(0,n.R1)(B).hide()),onSubmit:H},null,8,["activeWorkspaceCollections","collectionId","state"]),(0,t.bF)((0,n.R1)(i.uT),{size:"xxs",state:(0,n.R1)(O),title:`Edit ${Q.value}`},{default:(0,t.k6)(()=>[(0,t.bF)(v.A,{name:V.value??"",onClose:es,onEdit:eu},null,8,["name"])]),_:1},8,["state","title"])]),_:1}))}})},81373:(e,l,a)=>{a.d(l,{A:()=>u});var t=a(84363),n=a(88123),o=a(47547),r=a(18729),i=a(33309);let s={class:"flex flex-col gap-4"},u=(0,t.pM)({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(e,{emit:l}){let a=(0,n.KR)(""),u=e=>{a.value=e},c=()=>{l("submit",a.value),a.value=""};return(d,v)=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(o.uT),{size:"xxs",state:e.state,title:"Edit Environment Color"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",s,[(0,t.bF)(i.A,{activeColor:a.value||e.selectedColor,class:"w-full p-1",onSelect:u},null,8,["activeColor"]),(0,t.bF)(r.A,{onCancel:v[0]||(v[0]=e=>l("cancel")),onSubmit:c})])]),_:1},8,["state"]))}})},33309:(e,l,a)=>{a.d(l,{A:()=>c});var t=a(84363),n=a(88123),o=a(15475),r=a(61629),i=a(47547);let s=["onClick"],u=["placeholder"],c=(0,t.pM)({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:l}){let a=(0,n.KR)(""),c=(0,n.KR)(null),d=(0,n.KR)(!1),v=(0,n.KR)(!1),m=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],p=(0,t.EW)(()=>e.activeColor&&!m.some(l=>l.color===e.activeColor)||a.value?`background-color: ${e.activeColor||a.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),b=()=>{d.value=!d.value,e.selector&&(v.value=!1),(0,t.dY)(()=>{c.value&&c.value.focus()})};(0,t.wB)(a,e=>{e&&!e.startsWith("#")&&(a.value=`#${e}`),d.value=!0});let f=()=>{e.selector&&(v.value=!v.value)},g=a=>{l("select",a),e.selector&&(v.value=!1)};return(l,k)=>((0,t.uX)(),(0,t.CE)("div",null,[d.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[e.selector&&!v.value?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,o.C4)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)({backgroundColor:e.activeColor}),onClick:f},[e.activeColor?((0,t.uX)(),(0,t.Wv)((0,n.R1)(i.kv),{key:0,class:(0,o.C4)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):(0,t.Q3)("",!0)],6)):(0,t.Q3)("",!0),v.value||!e.selector?((0,t.uX)(),(0,t.CE)("div",{key:1,class:(0,o.C4)(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",e.selector?"h-4":"min-h-10 min-w-[296px]"])},[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(m,l=>(0,t.Lk)("div",{key:l.color,class:(0,o.C4)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)({backgroundColor:l.color}),onClick:e=>g(l.color)},[e.activeColor!==l.color||a.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)((0,n.R1)(i.kv),{key:0,class:(0,o.C4)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"]))],14,s)),64)),k[2]||(k[2]=(0,t.Lk)("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),(0,t.Lk)("label",{class:(0,o.C4)(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)(p.value),onClick:b},[d.value||e.activeColor!==a.value&&(!e.activeColor||m.some(l=>l.color===e.activeColor))?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)((0,n.R1)(i.kv),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"}))],6)],2)):(0,t.Q3)("",!0)],64)),d.value?((0,t.uX)(),(0,t.CE)("div",{key:1,class:(0,o.C4)(["color-selector flex flex-1 items-center gap-2 rounded",e.selector?"h-4":"min-h-10"])},[(0,t.Lk)("span",{class:(0,o.C4)(["absolute rounded-full border border-dashed",e.selector?"h-4 w-4":"h-5 w-5"])},null,2),(0,t.Lk)("span",{class:(0,o.C4)(["z-[1] rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,o.Tr)(p.value)},null,6),(0,t.bo)((0,t.Lk)("input",{ref_key:"customColorInputRef",ref:c,"onUpdate:modelValue":k[0]||(k[0]=e=>a.value=e),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:k[1]||(k[1]=e=>g(a.value))},null,40,u),[[r.Jo,a.value]]),(0,t.Lk)("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:b},[(0,t.bF)((0,n.R1)(i.kv),{icon:"Checkmark",size:"xs"})])],2)):(0,t.Q3)("",!0)]))}})},94426:(e,l,a)=>{a.d(l,{A:()=>m});var t=a(84363),n=a(88123),o=a(15475),r=a(47547),i=a(46593),s=a(24500),u=a(43346),c=a(33309),d=a(7162);let v={class:"flex items-start gap-2"},m=(0,t.pM)({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(e,{emit:l}){let{events:a}=(0,d.hA)(),m=(0,n.KR)(""),p=(0,n.KR)("#FFFFFF"),b=(0,t.EW)(()=>[...e.activeWorkspaceCollections.filter(e=>e.info?.title!=="Drafts").map(e=>({id:e.uid,label:e.info?.title??"Untitled Collection"}))]),f=(0,n.KR)(b.value.find(l=>l.id===e.collectionId)),{toast:g}=(0,i.Yf)(),k=e=>{p.value=e};(0,t.wB)(()=>e.state.open,l=>{l&&(m.value="",p.value="#FFFFFF",e.collectionId?f.value=b.value.find(l=>l.id===e.collectionId):f.value=void 0)});let x=()=>{if(!m.value.trim()){g("Please enter a name before adding an environment.","error");return}if(!f.value?.id){g("Please select a collection before adding an environment.","error");return}l("submit",{name:m.value,color:p.value,type:f.value?.id==="global"?"global":"collection",collectionId:f.value?.id!=="global"?f.value?.id:void 0})},C=()=>{e.state.hide(),a.commandPalette.emit({commandName:"Create Collection"})};return(a,i)=>((0,t.uX)(),(0,t.Wv)((0,n.R1)(r.uT),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:(0,t.k6)(()=>[(0,t.bF)(s.A,{disabled:!f.value||!m.value.trim(),onCancel:i[2]||(i[2]=e=>l("cancel")),onSubmit:x},{options:(0,t.k6)(()=>[(0,t.bF)((0,n.R1)(r.cy),{modelValue:f.value,"onUpdate:modelValue":i[1]||(i[1]=e=>f.value=e),options:b.value,placeholder:"Select Type"},{default:(0,t.k6)(()=>[b.value.length>0?((0,t.uX)(),(0,t.Wv)((0,n.R1)(r.RO),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:(0,t.k6)(()=>[(0,t.Lk)("span",{class:(0,o.C4)(f.value?"text-c-1":"text-c-3")},(0,o.v_)(f.value?f.value.label:"Select Collection"),3),(0,t.bF)((0,n.R1)(r.kv),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):((0,t.uX)(),(0,t.Wv)((0,n.R1)(r.RO),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:C},{default:(0,t.k6)(()=>[...i[3]||(i[3]=[(0,t.Lk)("span",{class:"text-c-1"},"Create Collection",-1)])]),_:1}))]),_:1},8,["modelValue","options"])]),submit:(0,t.k6)(()=>[...i[4]||(i[4]=[(0,t.eW)(" Add Environment ",-1)])]),default:(0,t.k6)(()=>[(0,t.Lk)("div",v,[(0,t.bF)(c.A,{activeColor:p.value,class:"peer",selector:"",onSelect:k},null,8,["activeColor"]),(0,t.bF)(u.A,{modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=e=>m.value=e),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}})},4270:(e,l,a)=>{a.d(l,{s:()=>d});var t=a(84363),n=a(15475),o=a(61629),r=a(88123);let i=(0,r.KR)(null),s=(0,r.KR)(null),u=(e,l)=>{let a=!1;return(...t)=>{a||(e(...t),a=!0,setTimeout(()=>a=!1,l))}},c=["draggable"],d=((e,l)=>{let a=e.__vccOpts||e;for(let[e,t]of l)a[e]=t;return a})((0,t.pM)({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(e,{expose:l,emit:a}){let d=(0,t.EW)(()=>e.parentIds.at(-1)??null),v=l=>{l.dataTransfer&&l.target instanceof HTMLElement&&e.isDraggable&&(l.target.classList.add("dragging"),l.dataTransfer.dropEffect="move",l.dataTransfer.effectAllowed="move",i.value={id:e.id,parentId:d.value},a("onDragStart",{id:e.id,parentId:d.value}))},m=l=>"function"==typeof e.isDroppable?e.isDroppable(i.value,{id:e.id,parentId:d.value,offset:l}):e.isDroppable,p=u(l=>{if(!i.value||i.value.id===e.id||e.parentIds.includes(i.value?.id??""))return;let a=s.value?.offset,t=l.target.offsetHeight,n=e.floor*t,o=e.ceiling*t,r=3;l.offsetY<=0&&a&&3!==a?r=a:l.offsetY<=n?r=0:l.offsetY>=o?r=1:l.offsetY>n&&l.offsetY<o&&(r=2),m(r)&&(s.value={id:e.id,parentId:d.value,offset:r})},25),b=["above","below","asChild"],f=(0,t.EW)(()=>{let l="sidebar-indent-nested";return e.id===s.value?.id&&(l+=` dragover-${b[s.value.offset]}`),l}),g=()=>{if(!s.value||!i.value)return;let e={...i.value},l={...s.value};i.value=null,s.value=null,document.querySelectorAll("div.dragging").forEach(e=>e.classList.remove("dragging")),e.id!==l.id&&a("onDragEnd",e,l)};return l({draggingItem:i,hoveredItem:s}),(e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:(0,n.C4)(f.value),draggable:e.isDraggable,onDragend:g,onDragover:l[0]||(l[0]=(0,o.D$)((...e)=>(0,r.R1)(p)&&(0,r.R1)(p)(...e),["prevent","stop"])),onDragstart:(0,o.D$)(v,["stop"])},[(0,t.RG)(e.$slots,"default",{},void 0,!0)],42,c))}}),[["__scopeId","data-v-a89d6a6e"]])}}]);