"use strict";exports.id=6239,exports.ids=[6239],exports.modules={6239:(e,t,a)=>{let r,n,s,i,o;a.r(t),a.d(t,{default:()=>up});var l,u,c,d,p,m,h,f,v,g,y,b,_,k,x,w,E,C,S,I,T,A,N,B,O,j,R,P,$,M,V=a(16712),Z=a(75741),D=a(16638),L=new WeakMap,U=0,F=function(){function e(e){void 0===e&&(e=0),this.items=new Map,this.ttl=e}return e.prototype.serializeKey=function(e){return function(e){if("function"==typeof e)try{e=e()}catch(t){e=""}return e=Array.isArray(e)?function(e){if(!e.length)return"";for(var t="arg",a=0;a<e.length;++a){var r=void 0;null===e[a]||"object"!=typeof e[a]&&"function"!=typeof e[a]?r="string"==typeof e[a]?'"'+e[a]+'"':String(e[a]):L.has(e[a])?r=L.get(e[a]):(r=U,L.set(e[a],U++)),t+="@"+r}return t}(e):String(e||"")}(e)},e.prototype.get=function(e){var t=this.serializeKey(e);return this.items.get(t)},e.prototype.set=function(e,t,a){var r=this.serializeKey(e),n=a||this.ttl,s=Date.now(),i={data:t,createdAt:s,expiresAt:n?s+n:1/0};this.dispatchExpire(n,i,r),this.items.set(r,i)},e.prototype.dispatchExpire=function(e,t,a){var r=this;e&&setTimeout(function(){Date.now()>=t.expiresAt&&r.delete(a)},e)},e.prototype.delete=function(e){this.items.delete(e)},e}();let z={isOnline:function(){return void 0===navigator.onLine||navigator.onLine},isDocumentVisible:function(){return"undefined"==typeof document||void 0===document.visibilityState||"hidden"!==document.visibilityState},fetcher:function(e){return fetch(e).then(function(e){return e.json()})}};var q=function(){return(q=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},W=function(e,t,a,r){return new(a||(a=Promise))(function(n,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})},J=function(e,t){var a,r,n,s,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw TypeError("Generator is already executing.");for(;i;)try{if(a=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(6===s[0]&&i.label<n[1]){i.label=n[1],n=s;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(s);break}n[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{a=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},K=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,s=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return i},H=function(e,t,a){if(a||2==arguments.length)for(var r,n=0,s=t.length;n<s;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},G=new F,Y=new F,X=new F,Q={cache:G,refreshInterval:0,ttl:0,serverTTL:1e3,dedupingInterval:2e3,revalidateOnFocus:!0,revalidateDebounce:0,shouldRetryOnError:!0,errorRetryInterval:5e3,errorRetryCount:5,fetcher:z.fetcher,isOnline:z.isOnline,isDocumentVisible:z.isDocumentVisible},ee=function(e,t,a,r){return void 0===a&&(a=G),void 0===r&&(r=Q.ttl),W(void 0,void 0,void 0,function(){var n,s,i,o,l;return J(this,function(u){switch(u.label){case 0:if(!(null!==t&&"object"==typeof t&&"function"==typeof t.then))return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t];case 2:return n=u.sent(),[3,4];case 3:return s=u.sent(),[3,4];case 4:return[3,6];case 5:n=t,u.label=6;case 6:if(i={data:n,error:s,isValidating:!1},void 0!==n)try{a.set(e,i,r)}catch(e){console.error("swrv(mutate): failed to set cache",e)}return(o=Y.get(e))&&o.data.length&&((l=o.data.filter(function(t){return t.key===e})).forEach(function(e,t){void 0!==i.data&&(e.data=i.data),e.error=i.error,e.isValidating=i.isValidating,e.isLoading=i.isValidating,t!==l.length-1&&delete l[t]}),l=l.filter(Boolean)),[2,i]}})})};let et=function(){for(var e,t,a=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=q({},Q),i=!1,o=!1,l=(0,V.getCurrentInstance)(),u=(null==l?void 0:l.proxy)||l;if(!u)return console.error("Could not get current instance, check to make sure that `useSwrv` is declared in the top level of the setup function."),null;var c=(null==u?void 0:u.$isServer)||!1;r.length>=1&&(e=r[0]),r.length>=2&&(t=r[1]),r.length>2&&(s=q(q({},s),r[2]));var d=c?s.serverTTL:s.ttl,p="function"==typeof e?e:(0,V.ref)(e);void 0===t&&(t=s.fetcher);var m=null;m=(0,V.reactive)({data:void 0,error:void 0,isValidating:!0,isLoading:!0,key:null});var h=function(e,r){return W(a,void 0,void 0,function(){var a,n,o,l,u,c,f=this;return J(this,function(v){switch(v.label){case 0:if(a=void 0===m.data,!(n=p.value))return[2];if(l=(o=s.cache.get(n))&&o.data,m.isValidating=!0,m.isLoading=!l,l&&(m.data=l.data,m.error=l.error),!(u=e||t)||!s.isDocumentVisible()&&!a||(null==r?void 0:r.forceRevalidate)!==void 0&&!(null==r?void 0:r.forceRevalidate)||o&&!(Date.now()-o.createdAt>=s.dedupingInterval||(null==r?void 0:r.forceRevalidate)))return m.isValidating=!1,m.isLoading=!1,[2];if(c=function(){return W(f,void 0,void 0,function(){var e,t,a;return J(this,function(o){switch(o.label){case 0:if(e=X.get(n))return[3,2];return t=Array.isArray(n)?n:[n],a=u.apply(void 0,H([],K(t),!1)),X.set(n,a,s.dedupingInterval),[4,ee(n,a,s.cache,d)];case 1:return o.sent(),[3,4];case 2:return[4,ee(n,e.data,s.cache,d)];case 3:o.sent(),o.label=4;case 4:return m.isValidating=!1,m.isLoading=!1,X.delete(n),void 0!==m.error&&!i&&s.shouldRetryOnError&&(!r||r.shouldRetryOnError)&&function(e,t,a){if(a.isDocumentVisible()&&(void 0===a.errorRetryCount||!(t>a.errorRetryCount))){var r=Math.min(t||0,a.errorRetryCount);setTimeout(function(){e(null,{errorRetryCount:r+1,shouldRetryOnError:!0})},r*a.errorRetryInterval)}}(h,r?r.errorRetryCount:1,s),[2]}})})},!(l&&s.revalidateDebounce))return[3,1];return setTimeout(function(){return W(f,void 0,void 0,function(){return J(this,function(e){switch(e.label){case 0:if(i)return[3,2];return[4,c()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},s.revalidateDebounce),[3,3];case 1:return[4,c()];case 2:v.sent(),v.label=3;case 3:return[2]}})})},f=function(){return W(a,void 0,void 0,function(){return J(this,function(e){return[2,h(null,{shouldRetryOnError:!1})]})})},v=null;(0,V.onMounted)(function(){var e=function(){return W(a,void 0,void 0,function(){return J(this,function(t){switch(t.label){case 0:if(!(!m.error&&s.isOnline()))return[3,2];return[4,h()];case 1:return t.sent(),[3,3];case 2:v&&clearTimeout(v),t.label=3;case 3:return s.refreshInterval&&!i&&(v=setTimeout(e,s.refreshInterval)),[2]}})})};s.refreshInterval&&(v=setTimeout(e,s.refreshInterval)),s.revalidateOnFocus&&(document.addEventListener("visibilitychange",f,!1),window.addEventListener("focus",f,!1))}),(0,V.onUnmounted)(function(){i=!0,v&&clearTimeout(v),s.revalidateOnFocus&&(document.removeEventListener("visibilitychange",f,!1),window.removeEventListener("focus",f,!1));var e=Y.get(p.value);e&&(e.data=e.data.filter(function(e){return e!==m}))});try{(0,V.watch)(p,function(e){var t,a,r;(0,V.isReadonly)(p)||(p.value=e),m.key=e,m.isValidating=!!e,t=p.value,a=m,(r=Y.get(t))?r.data.push(a):Y.set(t,[a],d>0?d+5e3:d),c||o||!p.value||h(),o=!1},{immediate:!0})}catch(e){}return q(q({},(0,V.toRefs)(m)),{mutate:function(e,t){return h(e,q(q({},t),{forceRevalidate:!0}))}})};var ea="vercel.ai.error",er=Symbol.for(ea),en=class e extends(u=Error,l=er,u){constructor({name:e,message:t,cause:a}){super(t),this[l]=!0,this.name=e,this.cause=a}static isInstance(t){return e.hasMarker(t,ea)}static hasMarker(e,t){let a=Symbol.for(t);return null!=e&&"object"==typeof e&&a in e&&"boolean"==typeof e[a]&&!0===e[a]}};function es(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var ei="AI_InvalidArgumentError",eo=`vercel.ai.error.${ei}`,el=Symbol.for(eo),eu=class extends(d=en,c=el,d){constructor({message:e,cause:t,argument:a}){super({name:ei,message:e,cause:t}),this[c]=!0,this.argument=a}static isInstance(e){return en.hasMarker(e,eo)}},ec=(Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError"),"AI_JSONParseError"),ed=`vercel.ai.error.${ec}`,ep=Symbol.for(ed),em=class extends(m=en,p=ep,m){constructor({text:e,cause:t}){super({name:ec,message:`JSON parsing failed: Text: ${e}.
Error message: ${es(t)}`,cause:t}),this[p]=!0,this.text=e}static isInstance(e){return en.hasMarker(e,ed)}},eh=(Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),"AI_NoSuchModelError"),ef=`vercel.ai.error.${eh}`,ev=Symbol.for(ef),eg=class extends(f=en,h=ev,f){constructor({errorName:e=eh,modelId:t,modelType:a,message:r=`No such ${a}: ${t}`}){super({name:e,message:r}),this[h]=!0,this.modelId=t,this.modelType=a}static isInstance(e){return en.hasMarker(e,ef)}},ey=(Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError"),"AI_TypeValidationError"),eb=`vercel.ai.error.${ey}`,e_=Symbol.for(eb),ek=class e extends(g=en,v=e_,g){constructor({value:e,cause:t}){super({name:ey,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${es(t)}`,cause:t}),this[v]=!0,this.value=e}static isInstance(e){return en.hasMarker(e,eb)}static wrap({value:t,cause:a}){return e.isInstance(a)&&a.value===t?a:new e({value:t,cause:a})}},ex="AI_UnsupportedFunctionalityError",ew=`vercel.ai.error.${ex}`,eE=Symbol.for(ew),eC=class extends(b=en,y=eE,b){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:ex,message:t}),this[y]=!0,this.functionality=e}static isInstance(e){return en.hasMarker(e,ew)}};function eS(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(eS):"object"==typeof e&&Object.entries(e).every(([e,t])=>"string"==typeof e&&(void 0===t||eS(t))))}var eI=a(17005);(function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let a of e)t[a]=a;return t},e.getValidEnumValues=t=>{let a=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(let e of a)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t},e.find=(e,t)=>{for(let a of e)if(t(a))return a},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(_||(_={})),(k||(k={})).mergeShapes=(e,t)=>({...e,...t});let eT=_.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),eA=e=>{switch(typeof e){case"undefined":return eT.undefined;case"string":return eT.string;case"number":return Number.isNaN(e)?eT.nan:eT.number;case"boolean":return eT.boolean;case"function":return eT.function;case"bigint":return eT.bigint;case"symbol":return eT.symbol;case"object":if(Array.isArray(e))return eT.array;if(null===e)return eT.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return eT.promise;if("undefined"!=typeof Map&&e instanceof Map)return eT.map;if("undefined"!=typeof Set&&e instanceof Set)return eT.set;if("undefined"!=typeof Date&&e instanceof Date)return eT.date;return eT.object;default:return eT.unknown}},eN=_.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class eB extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},a={_errors:[]},r=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(r);else if("invalid_return_type"===n.code)r(n.returnTypeError);else if("invalid_arguments"===n.code)r(n.argumentsError);else if(0===n.path.length)a._errors.push(t(n));else{let e=a,r=0;for(;r<n.path.length;){let a=n.path[r];r===n.path.length-1?(e[a]=e[a]||{_errors:[]},e[a]._errors.push(t(n))):e[a]=e[a]||{_errors:[]},e=e[a],r++}}};return r(this),a}static assert(e){if(!(e instanceof eB))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t=Object.create(null),a=[];for(let r of this.issues)if(r.path.length>0){let a=r.path[0];t[a]=t[a]||[],t[a].push(e(r))}else a.push(e(r));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}}eB.create=e=>new eB(e);let eO=(e,t)=>{let a;switch(e.code){case eN.invalid_type:a=e.received===eT.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case eN.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(e.expected,_.jsonStringifyReplacer)}`;break;case eN.unrecognized_keys:a=`Unrecognized key(s) in object: ${_.joinValues(e.keys,", ")}`;break;case eN.invalid_union:a="Invalid input";break;case eN.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${_.joinValues(e.options)}`;break;case eN.invalid_enum_value:a=`Invalid enum value. Expected ${_.joinValues(e.options)}, received '${e.received}'`;break;case eN.invalid_arguments:a="Invalid function arguments";break;case eN.invalid_return_type:a="Invalid function return type";break;case eN.invalid_date:a="Invalid date";break;case eN.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(a=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(a=`${a} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?a=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?a=`Invalid input: must end with "${e.validation.endsWith}"`:_.assertNever(e.validation):a="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case eN.too_small:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case eN.too_big:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case eN.custom:a="Invalid input";break;case eN.invalid_intersection_types:a="Intersection results could not be merged";break;case eN.not_multiple_of:a=`Number must be a multiple of ${e.multipleOf}`;break;case eN.not_finite:a="Number must be finite";break;default:a=t.defaultError,_.assertNever(e)}return{message:a}},ej=e=>{let{data:t,path:a,errorMaps:r,issueData:n}=e,s=[...a,...n.path||[]],i={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";for(let e of r.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:o}};function eR(e,t){let a=ej({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,eO,eO==eO?void 0:eO].filter(e=>!!e)});e.common.issues.push(a)}class eP{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let a=[];for(let r of t){if("aborted"===r.status)return e$;"dirty"===r.status&&e.dirty(),a.push(r.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,t){let a=[];for(let e of t){let t=await e.key,r=await e.value;a.push({key:t,value:r})}return eP.mergeObjectSync(e,a)}static mergeObjectSync(e,t){let a={};for(let r of t){let{key:t,value:n}=r;if("aborted"===t.status||"aborted"===n.status)return e$;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||r.alwaysSet)&&(a[t.value]=n.value)}return{status:e.value,value:a}}}let e$=Object.freeze({status:"aborted"}),eM=e=>({status:"dirty",value:e}),eV=e=>({status:"valid",value:e}),eZ=e=>"aborted"===e.status,eD=e=>"dirty"===e.status,eL=e=>"valid"===e.status,eU=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(x||(x={}));class eF{constructor(e,t,a,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let ez=(e,t)=>{if(eL(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new eB(e.common.issues);return this._error=t,this._error}}};function eq(e){if(!e)return{};let{errorMap:t,invalid_type_error:a,required_error:r,description:n}=e;if(t&&(a||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??n.defaultError}:void 0===n.data?{message:s??r??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:s??a??n.defaultError}},description:n}}class eW{get description(){return this._def.description}_getType(e){return eA(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:eA(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new eP,ctx:{common:e.parent.common,data:e.data,parsedType:eA(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(eU(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){let a={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eA(e)},r=this._parseSync({data:e,path:a.path,parent:a});return ez(a,r)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eA(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:t});return eL(a)?{value:a.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>eL(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){let a={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:eA(e)},r=this._parse({data:e,path:a.path,parent:a});return ez(a,await (eU(r)?r:Promise.resolve(r)))}refine(e,t){let a=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let n=e(t),s=()=>r.addIssue({code:eN.custom,...a(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((a,r)=>!!e(a)||(r.addIssue("function"==typeof t?t(a,r):t),!1))}_refinement(e){return new tA({schema:this,typeName:w.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return tN.create(this,this._def)}nullable(){return tB.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tp.create(this)}promise(){return tT.create(this,this._def)}or(e){return th.create([this,e],this._def)}and(e){return tg.create(this,e,this._def)}transform(e){return new tA({...eq(this._def),schema:this,typeName:w.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new tO({...eq(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:w.ZodDefault})}brand(){return new tP({typeName:w.ZodBranded,type:this,...eq(this._def)})}catch(e){return new tj({...eq(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:w.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return t$.create(this,e)}readonly(){return tM.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let eJ=/^c[^\s-]{8,}$/i,eK=/^[0-9a-z]+$/,eH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,eG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eY=/^[a-z0-9_-]{21}$/i,eX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,e0=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,e1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,e3=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,e6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,e2=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,e5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,e4=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,e7="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",e9=RegExp(`^${e7}$`);function e8(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let a=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${a}`}class te extends eW{_parse(e){var t,a,n,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==eT.string){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.string,received:t.parsedType}),e$}let o=new eP;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(eR(i=this._getOrReturnCtx(e,i),{code:eN.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(eR(i=this._getOrReturnCtx(e,i),{code:eN.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,a=e.data.length<l.value;(t||a)&&(i=this._getOrReturnCtx(e,i),t?eR(i,{code:eN.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):a&&eR(i,{code:eN.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)e0.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"email",code:eN.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)r||(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:eN.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)eG.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:eN.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)eY.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:eN.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)eJ.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:eN.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)eK.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:eN.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)eH.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:eN.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch{eR(i=this._getOrReturnCtx(e,i),{validation:"url",code:eN.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"regex",code:eN.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(eR(i=this._getOrReturnCtx(e,i),{code:eN.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(eR(i=this._getOrReturnCtx(e,i),{code:eN.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(eR(i=this._getOrReturnCtx(e,i),{code:eN.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?(function(e){let t=`${e7}T${e8(e)}`,a=[];return a.push(e.local?"Z?":"Z"),e.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,RegExp(`^${t}$`)})(l).test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{code:eN.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?e9.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{code:eN.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${e8(l)}$`).test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{code:eN.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?eQ.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"duration",code:eN.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(t=e.data,("v4"===(a=l.version)||!a)&&e1.test(t)||("v6"===a||!a)&&e6.test(t)||(eR(i=this._getOrReturnCtx(e,i),{validation:"ip",code:eN.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!eX.test(e))return!1;try{let[a]=e.split(".");if(!a)return!1;let r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),n=JSON.parse(atob(r));if("object"!=typeof n||null===n||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch{return!1}}(e.data,l.alg)&&(eR(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:eN.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(n=e.data,("v4"===(s=l.version)||!s)&&e3.test(n)||("v6"===s||!s)&&e2.test(n)||(eR(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:eN.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?e5.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"base64",code:eN.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?e4.test(e.data)||(eR(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:eN.invalid_string,message:l.message}),o.dirty()):_.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,a){return this.refinement(t=>e.test(t),{validation:t,code:eN.invalid_string,...x.errToObj(a)})}_addCheck(e){return new te({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...x.errToObj(e)})}url(e){return this._addCheck({kind:"url",...x.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...x.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...x.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...x.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...x.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...x.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...x.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...x.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...x.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...x.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...x.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...x.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...x.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...x.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...x.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...x.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...x.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...x.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...x.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...x.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...x.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...x.errToObj(t)})}nonempty(e){return this.min(1,x.errToObj(e))}trim(){return new te({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new te({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new te({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}te.create=e=>new te({checks:[],typeName:w.ZodString,coerce:e?.coerce??!1,...eq(e)});class tt extends eW{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==eT.number){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.number,received:t.parsedType}),e$}let a=new eP;for(let r of this._def.checks)"int"===r.kind?_.isInteger(e.data)||(eR(t=this._getOrReturnCtx(e,t),{code:eN.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):"multipleOf"===r.kind?0!==function(e,t){let a=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,n=a>r?a:r;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,r.value)&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(eR(t=this._getOrReturnCtx(e,t),{code:eN.not_finite,message:r.message}),a.dirty()):_.assertNever(r);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,a,r){return new tt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:x.toString(r)}]})}_addCheck(e){return new tt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:x.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:x.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:x.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:x.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&_.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let a of this._def.checks){if("finite"===a.kind||"int"===a.kind||"multipleOf"===a.kind)return!0;"min"===a.kind?(null===t||a.value>t)&&(t=a.value):"max"===a.kind&&(null===e||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}}tt.create=e=>new tt({checks:[],typeName:w.ZodNumber,coerce:e?.coerce||!1,...eq(e)});class ta extends eW{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==eT.bigint)return this._getInvalidInput(e);let a=new eP;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):_.assertNever(r);return{status:a.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.bigint,received:t.parsedType}),e$}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,a,r){return new ta({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:x.toString(r)}]})}_addCheck(e){return new ta({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ta.create=e=>new ta({checks:[],typeName:w.ZodBigInt,coerce:e?.coerce??!1,...eq(e)});class tr extends eW{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==eT.boolean){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.boolean,received:t.parsedType}),e$}return eV(e.data)}}tr.create=e=>new tr({typeName:w.ZodBoolean,coerce:e?.coerce||!1,...eq(e)});class tn extends eW{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==eT.date){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.date,received:t.parsedType}),e$}if(Number.isNaN(e.data.getTime()))return eR(this._getOrReturnCtx(e),{code:eN.invalid_date}),e$;let a=new eP;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),a.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(eR(t=this._getOrReturnCtx(e,t),{code:eN.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),a.dirty()):_.assertNever(r);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tn({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:x.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:x.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}tn.create=e=>new tn({checks:[],coerce:e?.coerce||!1,typeName:w.ZodDate,...eq(e)});class ts extends eW{_parse(e){if(this._getType(e)!==eT.symbol){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.symbol,received:t.parsedType}),e$}return eV(e.data)}}ts.create=e=>new ts({typeName:w.ZodSymbol,...eq(e)});class ti extends eW{_parse(e){if(this._getType(e)!==eT.undefined){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.undefined,received:t.parsedType}),e$}return eV(e.data)}}ti.create=e=>new ti({typeName:w.ZodUndefined,...eq(e)});class to extends eW{_parse(e){if(this._getType(e)!==eT.null){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.null,received:t.parsedType}),e$}return eV(e.data)}}to.create=e=>new to({typeName:w.ZodNull,...eq(e)});class tl extends eW{constructor(){super(...arguments),this._any=!0}_parse(e){return eV(e.data)}}tl.create=e=>new tl({typeName:w.ZodAny,...eq(e)});class tu extends eW{constructor(){super(...arguments),this._unknown=!0}_parse(e){return eV(e.data)}}tu.create=e=>new tu({typeName:w.ZodUnknown,...eq(e)});class tc extends eW{_parse(e){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.never,received:t.parsedType}),e$}}tc.create=e=>new tc({typeName:w.ZodNever,...eq(e)});class td extends eW{_parse(e){if(this._getType(e)!==eT.undefined){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.void,received:t.parsedType}),e$}return eV(e.data)}}td.create=e=>new td({typeName:w.ZodVoid,...eq(e)});class tp extends eW{_parse(e){let{ctx:t,status:a}=this._processInputParams(e),r=this._def;if(t.parsedType!==eT.array)return eR(t,{code:eN.invalid_type,expected:eT.array,received:t.parsedType}),e$;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,n=t.data.length<r.exactLength.value;(e||n)&&(eR(t,{code:e?eN.too_big:eN.too_small,minimum:n?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),a.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(eR(t,{code:eN.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),a.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(eR(t,{code:eN.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map((e,a)=>r.type._parseAsync(new eF(t,e,t.path,a)))).then(e=>eP.mergeArray(a,e));let n=[...t.data].map((e,a)=>r.type._parseSync(new eF(t,e,t.path,a)));return eP.mergeArray(a,n)}get element(){return this._def.type}min(e,t){return new tp({...this._def,minLength:{value:e,message:x.toString(t)}})}max(e,t){return new tp({...this._def,maxLength:{value:e,message:x.toString(t)}})}length(e,t){return new tp({...this._def,exactLength:{value:e,message:x.toString(t)}})}nonempty(e){return this.min(1,e)}}tp.create=(e,t)=>new tp({type:e,minLength:null,maxLength:null,exactLength:null,typeName:w.ZodArray,...eq(t)});class tm extends eW{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=_.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==eT.object){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.object,received:t.parsedType}),e$}let{status:t,ctx:a}=this._processInputParams(e),{shape:r,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof tc&&"strip"===this._def.unknownKeys))for(let e in a.data)n.includes(e)||s.push(e);let i=[];for(let e of n){let t=r[e],n=a.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new eF(a,n,a.path,e)),alwaysSet:e in a.data})}if(this._def.catchall instanceof tc){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:a.data[e]}});else if("strict"===e)s.length>0&&(eR(a,{code:eN.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let r=a.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new eF(a,r,a.path,t)),alwaysSet:t in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let a=await t.key,r=await t.value;e.push({key:a,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>eP.mergeObjectSync(t,e)):eP.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return x.errToObj,new tm({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,a)=>{let r=this._def.errorMap?.(t,a).message??a.defaultError;return"unrecognized_keys"===t.code?{message:x.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new tm({...this._def,unknownKeys:"strip"})}passthrough(){return new tm({...this._def,unknownKeys:"passthrough"})}extend(e){return new tm({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new tm({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:w.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new tm({...this._def,catchall:e})}pick(e){let t={};for(let a of _.objectKeys(e))e[a]&&this.shape[a]&&(t[a]=this.shape[a]);return new tm({...this._def,shape:()=>t})}omit(e){let t={};for(let a of _.objectKeys(this.shape))e[a]||(t[a]=this.shape[a]);return new tm({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof tm){let a={};for(let r in t.shape){let n=t.shape[r];a[r]=tN.create(e(n))}return new tm({...t._def,shape:()=>a})}return t instanceof tp?new tp({...t._def,type:e(t.element)}):t instanceof tN?tN.create(e(t.unwrap())):t instanceof tB?tB.create(e(t.unwrap())):t instanceof ty?ty.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};for(let a of _.objectKeys(this.shape)){let r=this.shape[a];e&&!e[a]?t[a]=r:t[a]=r.optional()}return new tm({...this._def,shape:()=>t})}required(e){let t={};for(let a of _.objectKeys(this.shape))if(e&&!e[a])t[a]=this.shape[a];else{let e=this.shape[a];for(;e instanceof tN;)e=e._def.innerType;t[a]=e}return new tm({...this._def,shape:()=>t})}keyof(){return tC(_.objectKeys(this.shape))}}tm.create=(e,t)=>new tm({shape:()=>e,unknownKeys:"strip",catchall:tc.create(),typeName:w.ZodObject,...eq(t)}),tm.strictCreate=(e,t)=>new tm({shape:()=>e,unknownKeys:"strict",catchall:tc.create(),typeName:w.ZodObject,...eq(t)}),tm.lazycreate=(e,t)=>new tm({shape:e,unknownKeys:"strip",catchall:tc.create(),typeName:w.ZodObject,...eq(t)});class th extends eW{_parse(e){let{ctx:t}=this._processInputParams(e),a=this._def.options;if(t.common.async)return Promise.all(a.map(async e=>{let a={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;let a=e.map(e=>new eB(e.ctx.common.issues));return eR(t,{code:eN.invalid_union,unionErrors:a}),e$});{let e;let r=[];for(let n of a){let a={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:a});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:a}),a.common.issues.length&&r.push(a.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=r.map(e=>new eB(e));return eR(t,{code:eN.invalid_union,unionErrors:n}),e$}}get options(){return this._def.options}}th.create=(e,t)=>new th({options:e,typeName:w.ZodUnion,...eq(t)});let tf=e=>{if(e instanceof tw)return tf(e.schema);if(e instanceof tA)return tf(e.innerType());if(e instanceof tE)return[e.value];if(e instanceof tS)return e.options;if(e instanceof tI)return _.objectValues(e.enum);if(e instanceof tO)return tf(e._def.innerType);if(e instanceof ti)return[void 0];else if(e instanceof to)return[null];else if(e instanceof tN)return[void 0,...tf(e.unwrap())];else if(e instanceof tB)return[null,...tf(e.unwrap())];else if(e instanceof tP)return tf(e.unwrap());else if(e instanceof tM)return tf(e.unwrap());else if(e instanceof tj)return tf(e._def.innerType);else return[]};class tv extends eW{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==eT.object)return eR(t,{code:eN.invalid_type,expected:eT.object,received:t.parsedType}),e$;let a=this.discriminator,r=t.data[a],n=this.optionsMap.get(r);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(eR(t,{code:eN.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),e$)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,a){let r=new Map;for(let a of t){let t=tf(a.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(r.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);r.set(n,a)}}return new tv({typeName:w.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...eq(a)})}}class tg extends eW{_parse(e){let{status:t,ctx:a}=this._processInputParams(e),r=(e,r)=>{if(eZ(e)||eZ(r))return e$;let n=function e(t,a){let r=eA(t),n=eA(a);if(t===a)return{valid:!0,data:t};if(r===eT.object&&n===eT.object){let r=_.objectKeys(a),n=_.objectKeys(t).filter(e=>-1!==r.indexOf(e)),s={...t,...a};for(let r of n){let n=e(t[r],a[r]);if(!n.valid)return{valid:!1};s[r]=n.data}return{valid:!0,data:s}}if(r===eT.array&&n===eT.array){if(t.length!==a.length)return{valid:!1};let r=[];for(let n=0;n<t.length;n++){let s=e(t[n],a[n]);if(!s.valid)return{valid:!1};r.push(s.data)}return{valid:!0,data:r}}return r===eT.date&&n===eT.date&&+t==+a?{valid:!0,data:t}:{valid:!1}}(e.value,r.value);return n.valid?((eD(e)||eD(r))&&t.dirty(),{status:t.value,value:n.data}):(eR(a,{code:eN.invalid_intersection_types}),e$)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}tg.create=(e,t,a)=>new tg({left:e,right:t,typeName:w.ZodIntersection,...eq(a)});class ty extends eW{_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eT.array)return eR(a,{code:eN.invalid_type,expected:eT.array,received:a.parsedType}),e$;if(a.data.length<this._def.items.length)return eR(a,{code:eN.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e$;!this._def.rest&&a.data.length>this._def.items.length&&(eR(a,{code:eN.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...a.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new eF(a,e,a.path,t)):null}).filter(e=>!!e);return a.common.async?Promise.all(r).then(e=>eP.mergeArray(t,e)):eP.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ty({...this._def,rest:e})}}ty.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ty({items:e,typeName:w.ZodTuple,rest:null,...eq(t)})};class tb extends eW{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eT.object)return eR(a,{code:eN.invalid_type,expected:eT.object,received:a.parsedType}),e$;let r=[],n=this._def.keyType,s=this._def.valueType;for(let e in a.data)r.push({key:n._parse(new eF(a,e,a.path,e)),value:s._parse(new eF(a,a.data[e],a.path,e)),alwaysSet:e in a.data});return a.common.async?eP.mergeObjectAsync(t,r):eP.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,a){return new tb(t instanceof eW?{keyType:e,valueType:t,typeName:w.ZodRecord,...eq(a)}:{keyType:te.create(),valueType:e,typeName:w.ZodRecord,...eq(t)})}}class t_ extends eW{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eT.map)return eR(a,{code:eN.invalid_type,expected:eT.map,received:a.parsedType}),e$;let r=this._def.keyType,n=this._def.valueType,s=[...a.data.entries()].map(([e,t],s)=>({key:r._parse(new eF(a,e,a.path,[s,"key"])),value:n._parse(new eF(a,t,a.path,[s,"value"]))}));if(a.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let a of s){let r=await a.key,n=await a.value;if("aborted"===r.status||"aborted"===n.status)return e$;("dirty"===r.status||"dirty"===n.status)&&t.dirty(),e.set(r.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let a of s){let r=a.key,n=a.value;if("aborted"===r.status||"aborted"===n.status)return e$;("dirty"===r.status||"dirty"===n.status)&&t.dirty(),e.set(r.value,n.value)}return{status:t.value,value:e}}}}t_.create=(e,t,a)=>new t_({valueType:t,keyType:e,typeName:w.ZodMap,...eq(a)});class tk extends eW{_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==eT.set)return eR(a,{code:eN.invalid_type,expected:eT.set,received:a.parsedType}),e$;let r=this._def;null!==r.minSize&&a.data.size<r.minSize.value&&(eR(a,{code:eN.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&a.data.size>r.maxSize.value&&(eR(a,{code:eN.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let n=this._def.valueType;function s(e){let a=new Set;for(let r of e){if("aborted"===r.status)return e$;"dirty"===r.status&&t.dirty(),a.add(r.value)}return{status:t.value,value:a}}let i=[...a.data.values()].map((e,t)=>n._parse(new eF(a,e,a.path,t)));return a.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new tk({...this._def,minSize:{value:e,message:x.toString(t)}})}max(e,t){return new tk({...this._def,maxSize:{value:e,message:x.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}tk.create=(e,t)=>new tk({valueType:e,minSize:null,maxSize:null,typeName:w.ZodSet,...eq(t)});class tx extends eW{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==eT.function)return eR(t,{code:eN.invalid_type,expected:eT.function,received:t.parsedType}),e$;function a(e,a){return ej({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eO,eO].filter(e=>!!e),issueData:{code:eN.invalid_arguments,argumentsError:a}})}function r(e,a){return ej({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,eO,eO].filter(e=>!!e),issueData:{code:eN.invalid_return_type,returnTypeError:a}})}let n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof tT){let e=this;return eV(async function(...t){let i=new eB([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw i.addIssue(a(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,n).catch(e=>{throw i.addIssue(r(l,e)),i})})}{let e=this;return eV(function(...t){let i=e._def.args.safeParse(t,n);if(!i.success)throw new eB([a(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,n);if(!l.success)throw new eB([r(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new tx({...this._def,args:ty.create(e).rest(tu.create())})}returns(e){return new tx({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,a){return new tx({args:e||ty.create([]).rest(tu.create()),returns:t||tu.create(),typeName:w.ZodFunction,...eq(a)})}}class tw extends eW{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}tw.create=(e,t)=>new tw({getter:e,typeName:w.ZodLazy,...eq(t)});class tE extends eW{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return eR(t,{received:t.data,code:eN.invalid_literal,expected:this._def.value}),e$}return{status:"valid",value:e.data}}get value(){return this._def.value}}function tC(e,t){return new tS({values:e,typeName:w.ZodEnum,...eq(t)})}tE.create=(e,t)=>new tE({value:e,typeName:w.ZodLiteral,...eq(t)});class tS extends eW{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),a=this._def.values;return eR(t,{expected:_.joinValues(a),received:t.parsedType,code:eN.invalid_type}),e$}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),a=this._def.values;return eR(t,{received:t.data,code:eN.invalid_enum_value,options:a}),e$}return eV(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return tS.create(e,{...this._def,...t})}exclude(e,t=this._def){return tS.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}tS.create=tC;class tI extends eW{_parse(e){let t=_.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==eT.string&&a.parsedType!==eT.number){let e=_.objectValues(t);return eR(a,{expected:_.joinValues(e),received:a.parsedType,code:eN.invalid_type}),e$}if(this._cache||(this._cache=new Set(_.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=_.objectValues(t);return eR(a,{received:a.data,code:eN.invalid_enum_value,options:e}),e$}return eV(e.data)}get enum(){return this._def.values}}tI.create=(e,t)=>new tI({values:e,typeName:w.ZodNativeEnum,...eq(t)});class tT extends eW{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==eT.promise&&!1===t.common.async?(eR(t,{code:eN.invalid_type,expected:eT.promise,received:t.parsedType}),e$):eV((t.parsedType===eT.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}tT.create=(e,t)=>new tT({type:e,typeName:w.ZodPromise,...eq(t)});class tA extends eW{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===w.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:a}=this._processInputParams(e),r=this._def.effect||null,n={addIssue:e=>{eR(a,e),e.fatal?t.abort():t.dirty()},get path(){return a.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===r.type){let e=r.transform(a.data,n);if(a.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return e$;let r=await this._def.schema._parseAsync({data:e,path:a.path,parent:a});return"aborted"===r.status?e$:"dirty"===r.status||"dirty"===t.value?eM(r.value):r});{if("aborted"===t.value)return e$;let r=this._def.schema._parseSync({data:e,path:a.path,parent:a});return"aborted"===r.status?e$:"dirty"===r.status||"dirty"===t.value?eM(r.value):r}}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,n);if(a.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==a.common.async)return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(a=>"aborted"===a.status?e$:("dirty"===a.status&&t.dirty(),e(a.value).then(()=>({status:t.value,value:a.value}))));{let r=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===r.status?e$:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==a.common.async)return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(e=>eL(e)?Promise.resolve(r.transform(e.value,n)).then(e=>({status:t.value,value:e})):e$);{let e=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!eL(e))return e$;let s=r.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}_.assertNever(r)}}tA.create=(e,t,a)=>new tA({schema:e,typeName:w.ZodEffects,effect:t,...eq(a)}),tA.createWithPreprocess=(e,t,a)=>new tA({schema:t,effect:{type:"preprocess",transform:e},typeName:w.ZodEffects,...eq(a)});class tN extends eW{_parse(e){return this._getType(e)===eT.undefined?eV(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tN.create=(e,t)=>new tN({innerType:e,typeName:w.ZodOptional,...eq(t)});class tB extends eW{_parse(e){return this._getType(e)===eT.null?eV(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tB.create=(e,t)=>new tB({innerType:e,typeName:w.ZodNullable,...eq(t)});class tO extends eW{_parse(e){let{ctx:t}=this._processInputParams(e),a=t.data;return t.parsedType===eT.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}tO.create=(e,t)=>new tO({innerType:e,typeName:w.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...eq(t)});class tj extends eW{_parse(e){let{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return eU(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new eB(a.common.issues)},input:a.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new eB(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}tj.create=(e,t)=>new tj({innerType:e,typeName:w.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...eq(t)});class tR extends eW{_parse(e){if(this._getType(e)!==eT.nan){let t=this._getOrReturnCtx(e);return eR(t,{code:eN.invalid_type,expected:eT.nan,received:t.parsedType}),e$}return{status:"valid",value:e.data}}}tR.create=e=>new tR({typeName:w.ZodNaN,...eq(e)}),Symbol("zod_brand");class tP extends eW{_parse(e){let{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}}class t$ extends eW{_parse(e){let{status:t,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?e$:"dirty"===e.status?(t.dirty(),eM(e.value)):this._def.out._parseAsync({data:e.value,path:a.path,parent:a})})();{let e=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?e$:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:a.path,parent:a})}}static create(e,t){return new t$({in:e,out:t,typeName:w.ZodPipeline})}}class tM extends eW{_parse(e){let t=this._def.innerType._parse(e),a=e=>(eL(e)&&(e.value=Object.freeze(e.value)),e);return eU(t)?t.then(e=>a(e)):a(t)}unwrap(){return this._def.innerType}}tM.create=(e,t)=>new tM({innerType:e,typeName:w.ZodReadonly,...eq(t)}),tm.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(w||(w={})),te.create,tt.create,tR.create,ta.create,tr.create,tn.create,ts.create,ti.create,to.create,tl.create,tu.create,tc.create,td.create,tp.create,tm.create,tm.strictCreate,th.create,tv.create,tg.create,ty.create,tb.create,t_.create,tk.create,tx.create,tw.create,tE.create,tS.create,tI.create,tT.create,tA.create,tN.create,tB.create,tA.createWithPreprocess,t$.create;class tV extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function tZ(e){}class tD extends TransformStream{constructor({onError:e,onRetry:t,onComment:a}={}){let r;super({start(n){r=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=tZ,onError:a=tZ,onRetry:r=tZ,onComment:n}=e,s="",i=!0,o,l="",u="";function c(e){if(""===e){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u="";return}if(e.startsWith(":")){n&&n(e.slice(e.startsWith(": ")?2:1));return}let a=e.indexOf(":");if(-1!==a){let t=e.slice(0,a),r=" "===e[a+1]?2:1;d(t,e.slice(a+r),e);return}d(e,"",e)}function d(e,t,n){switch(e){case"event":u=t;break;case"data":l=`${l}${t}
`;break;case"id":o=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?r(parseInt(t,10)):a(new tV(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:n}));break;default:a(new tV(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:n}))}}return{feed:function(e){let t=i?e.replace(/^\xEF\xBB\xBF/,""):e,[a,r]=function(e){let t=[],a="",r=0;for(;r<e.length;){let n=e.indexOf("\r",r),s=e.indexOf(`
`,r),i=-1;if(-1!==n&&-1!==s?i=Math.min(n,s):-1!==n?i=n===e.length-1?-1:n:-1!==s&&(i=s),-1===i){a=e.slice(r);break}{let a=e.slice(r,i);t.push(a),"\r"===e[(r=i+1)-1]&&e[r]===`
`&&r++}}return[t,a]}(`${s}${t}`);for(let e of a)c(e);s=r,i=!1},reset:function(e={}){s&&e.consume&&c(s),i=!0,o=void 0,l="",u="",s=""}}}({onEvent:e=>{n.enqueue(e)},onError(t){"terminate"===e?n.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:a})},transform(e){r.feed(e)}})}}var{btoa:tL,atob:tU}=globalThis,tF=Symbol.for("vercel.ai.error.AI_DownloadError"),tz=({prefix:e,size:t=16,alphabet:a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{let n=()=>{let e=a.length,r=Array(t);for(let n=0;n<t;n++)r[n]=a[Math.random()*e|0];return r.join("")};if(null==e)return n;if(a.includes(r))throw new eu({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${a}".`});return()=>`${e}${r}${n()}`},tq=tz();function tW(e=globalThis){var t,a,r;return e.window?"runtime/browser":(null==(t=e.navigator)?void 0:t.userAgent)?`runtime/${e.navigator.userAgent.toLowerCase()}`:(null==(r=null==(a=e.process)?void 0:a.versions)?void 0:r.node)?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function tJ(e){if(null==e)return{};let t={};if(e instanceof Headers)e.forEach((e,a)=>{t[a.toLowerCase()]=e});else for(let[a,r]of(Array.isArray(e)||(e=Object.entries(e)),e))null!=r&&(t[a.toLowerCase()]=r);return t}function tK(e,...t){let a=new Headers(tJ(e)),r=a.get("user-agent")||"";return a.set("user-agent",[r,...t].filter(Boolean).join(" ")),Object.fromEntries(a.entries())}var tH=/"__proto__"\s*:/,tG=/"constructor"\s*:/;function tY(e){let t=JSON.parse(e);return null===t||"object"!=typeof t||!1===tH.test(e)&&!1===tG.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let a of(t=[],e)){if(Object.prototype.hasOwnProperty.call(a,"__proto__")||Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in a){let r=a[e];r&&"object"==typeof r&&t.push(r)}}}return e}(t)}function tX(e){if("object"===e.type||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;let{properties:t}=e;if(null!=t)for(let e of Object.keys(t))t[e]=tQ(t[e])}null!=e.items&&(e.items=Array.isArray(e.items)?e.items.map(tQ):tQ(e.items)),null!=e.anyOf&&(e.anyOf=e.anyOf.map(tQ)),null!=e.allOf&&(e.allOf=e.allOf.map(tQ)),null!=e.oneOf&&(e.oneOf=e.oneOf.map(tQ));let{definitions:t}=e;if(null!=t)for(let e of Object.keys(t))t[e]=tQ(t[e]);return e}function tQ(e){return"boolean"==typeof e?e:tX(e)}var t0=Symbol("Let zodToJsonSchema decide on which parser to use"),t1={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},t3=e=>"string"==typeof e?{...t1,name:e}:{...t1,...e};function t6(e,t){return am(e.type._def,t)}var t2=(e,t)=>am(e.innerType._def,t),t5=e=>{let t={type:"integer",format:"unix-time"};for(let a of e.checks)switch(a.kind){case"min":t.minimum=a.value;break;case"max":t.maximum=a.value}return t},t4=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,t7=void 0,t9={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===t7&&(t7=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t7),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function t8(e,t){let a={type:"string"};if(e.checks)for(let r of e.checks)switch(r.kind){case"min":a.minLength="number"==typeof a.minLength?Math.max(a.minLength,r.value):r.value;break;case"max":a.maxLength="number"==typeof a.maxLength?Math.min(a.maxLength,r.value):r.value;break;case"email":switch(t.emailStrategy){case"format:email":aa(a,"email",r.message,t);break;case"format:idn-email":aa(a,"idn-email",r.message,t);break;case"pattern:zod":ar(a,t9.email,r.message,t)}break;case"url":aa(a,"uri",r.message,t);break;case"uuid":aa(a,"uuid",r.message,t);break;case"regex":ar(a,r.regex,r.message,t);break;case"cuid":ar(a,t9.cuid,r.message,t);break;case"cuid2":ar(a,t9.cuid2,r.message,t);break;case"startsWith":ar(a,RegExp(`^${ae(r.value,t)}`),r.message,t);break;case"endsWith":ar(a,RegExp(`${ae(r.value,t)}$`),r.message,t);break;case"datetime":aa(a,"date-time",r.message,t);break;case"date":aa(a,"date",r.message,t);break;case"time":aa(a,"time",r.message,t);break;case"duration":aa(a,"duration",r.message,t);break;case"length":a.minLength="number"==typeof a.minLength?Math.max(a.minLength,r.value):r.value,a.maxLength="number"==typeof a.maxLength?Math.min(a.maxLength,r.value):r.value;break;case"includes":ar(a,RegExp(ae(r.value,t)),r.message,t);break;case"ip":"v6"!==r.version&&aa(a,"ipv4",r.message,t),"v4"!==r.version&&aa(a,"ipv6",r.message,t);break;case"base64url":ar(a,t9.base64url,r.message,t);break;case"jwt":ar(a,t9.jwt,r.message,t);break;case"cidr":"v6"!==r.version&&ar(a,t9.ipv4Cidr,r.message,t),"v4"!==r.version&&ar(a,t9.ipv6Cidr,r.message,t);break;case"emoji":ar(a,t9.emoji(),r.message,t);break;case"ulid":ar(a,t9.ulid,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":aa(a,"binary",r.message,t);break;case"contentEncoding:base64":a.contentEncoding="base64";break;case"pattern:zod":ar(a,t9.base64,r.message,t)}break;case"nanoid":ar(a,t9.nanoid,r.message,t)}return a}function ae(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let a=0;a<e.length;a++)at.has(e[a])||(t+="\\"),t+=e[a];return t}(e):e}var at=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function aa(e,t,a,r){var n;e.format||(null==(n=e.anyOf)?void 0:n.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...a&&r.errorMessages&&{errorMessage:{format:a}}})):e.format=t}function ar(e,t,a,r){var n;e.pattern||(null==(n=e.allOf)?void 0:n.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:an(t,r),...a&&r.errorMessages&&{errorMessage:{pattern:a}}})):e.pattern=an(t,r)}function an(e,t){var a;if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source,s="",i=!1,o=!1,l=!1;for(let e=0;e<n.length;e++){if(i){s+=n[e],i=!1;continue}if(r.i){if(o){if(n[e].match(/[a-z]/)){l?(s+=n[e],s+=`${n[e-2]}-${n[e]}`.toUpperCase(),l=!1):"-"===n[e+1]&&(null==(a=n[e+2])?void 0:a.match(/[a-z]/))?(s+=n[e],l=!0):s+=`${n[e]}${n[e].toUpperCase()}`;continue}}else if(n[e].match(/[a-z]/)){s+=`[${n[e]}${n[e].toUpperCase()}]`;continue}}if(r.m){if("^"===n[e]){s+=`(^|(?<=[\r
]))`;continue}if("$"===n[e]){s+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===n[e]){s+=o?`${n[e]}\r
`:`[${n[e]}\r
]`;continue}s+=n[e],"\\"===n[e]?i=!0:o&&"]"===n[e]?o=!1:o||"["!==n[e]||(o=!0)}try{new RegExp(s)}catch(a){return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function as(e,t){var a,r,n,s,i,o;let l={type:"object",additionalProperties:null!=(a=am(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))?a:t.allowedAdditionalProperties};if((null==(r=e.keyType)?void 0:r._def.typeName)===w.ZodString&&(null==(n=e.keyType._def.checks)?void 0:n.length)){let{type:a,...r}=t8(e.keyType._def,t);return{...l,propertyNames:r}}if((null==(s=e.keyType)?void 0:s._def.typeName)===w.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if((null==(i=e.keyType)?void 0:i._def.typeName)===w.ZodBranded&&e.keyType._def.type._def.typeName===w.ZodString&&(null==(o=e.keyType._def.type._def.checks)?void 0:o.length)){let{type:a,...r}=t6(e.keyType._def,t);return{...l,propertyNames:r}}return l}var ai={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},ao=(e,t)=>{let a=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,a)=>am(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return a.length?{anyOf:a}:void 0},al=(e,t)=>{var a;if(t.currentPath.toString()===(null==(a=t.propertyPath)?void 0:a.toString()))return am(e.innerType._def,t);let r=am(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},au=(e,t)=>{if("input"===t.pipeStrategy)return am(e.in._def,t);if("output"===t.pipeStrategy)return am(e.out._def,t);let a=am(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=am(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",a?"1":"0"]});return{allOf:[a,r].filter(e=>void 0!==e)}},ac=(e,t)=>am(e.innerType._def,t),ad=(e,t,a)=>{switch(t){case w.ZodString:return t8(e,a);case w.ZodNumber:return function(e){let t={type:"number"};if(!e.checks)return t;for(let a of e.checks)switch(a.kind){case"int":t.type="integer";break;case"min":a.inclusive?t.minimum=a.value:t.exclusiveMinimum=a.value;break;case"max":a.inclusive?t.maximum=a.value:t.exclusiveMaximum=a.value;break;case"multipleOf":t.multipleOf=a.value}return t}(e);case w.ZodObject:return function(e,t){let a={type:"object",properties:{}},r=[],n=e.shape();for(let e in n){let s=n[e];if(void 0===s||void 0===s._def)continue;let i=function(e){try{return e.isOptional()}catch(e){return!0}}(s),o=am(s._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==o&&(a.properties[e]=o,i||r.push(e))}r.length&&(a.required=r);let s=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return am(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==s&&(a.additionalProperties=s),a}(e,a);case w.ZodBigInt:return function(e){let t={type:"integer",format:"int64"};if(!e.checks)return t;for(let a of e.checks)switch(a.kind){case"min":a.inclusive?t.minimum=a.value:t.exclusiveMinimum=a.value;break;case"max":a.inclusive?t.maximum=a.value:t.exclusiveMaximum=a.value;break;case"multipleOf":t.multipleOf=a.value}return t}(e);case w.ZodBoolean:return{type:"boolean"};case w.ZodDate:return function e(t,a,r){let n=null!=r?r:a.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,n)=>e(t,a,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return t5(t)}}(e,a);case w.ZodUndefined:return{not:{}};case w.ZodNull:return{type:"null"};case w.ZodArray:return function(e,t){var a,r,n;let s={type:"array"};return(null==(a=e.type)?void 0:a._def)&&(null==(n=null==(r=e.type)?void 0:r._def)?void 0:n.typeName)!==w.ZodAny&&(s.items=am(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}(e,a);case w.ZodUnion:case w.ZodDiscriminatedUnion:return function(e,t){let a=e.options instanceof Map?Array.from(e.options.values()):e.options;if(a.every(e=>e._def.typeName in ai&&(!e._def.checks||!e._def.checks.length))){let e=a.reduce((e,t)=>{let a=ai[t._def.typeName];return a&&!e.includes(a)?[...e,a]:e},[]);return{type:e.length>1?e:e[0]}}if(a.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=a.reduce((e,t)=>{let a=typeof t._def.value;switch(a){case"string":case"number":case"boolean":return[...e,a];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===a.length){let t=e.filter((e,t,a)=>a.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:a.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(a.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:a.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return ao(e,t)}(e,a);case w.ZodIntersection:return function(e,t){let a=[am(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),am(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),r=[];return a.forEach(e=>{if(t4(e))r.push(...e.allOf);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:a,...r}=e;t=r}r.push(t)}}),r.length?{allOf:r}:void 0}(e,a);case w.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,a)=>am(e._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:am(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,a)=>am(e._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,a);case w.ZodRecord:return as(e,a);case w.ZodLiteral:return function(e){let t=typeof e.value;return"bigint"!==t&&"number"!==t&&"boolean"!==t&&"string"!==t?{type:Array.isArray(e.value)?"array":"object"}:{type:"bigint"===t?"integer":t,const:e.value}}(e);case w.ZodEnum:return{type:"string",enum:Array.from(e.values)};case w.ZodNativeEnum:return function(e){let t=e.values,a=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),r=Array.from(new Set(a.map(e=>typeof e)));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:a}}(e);case w.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[ai[e.innerType._def.typeName],"null"]};let a=am(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return a&&{anyOf:[a,{type:"null"}]}}(e,a);case w.ZodOptional:return al(e,a);case w.ZodMap:return function(e,t){return"record"===t.mapStrategy?as(e,t):{type:"array",maxItems:125,items:{type:"array",items:[am(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},am(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,a);case w.ZodSet:return function(e,t){let a={type:"array",uniqueItems:!0,items:am(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(a.minItems=e.minSize.value),e.maxSize&&(a.maxItems=e.maxSize.value),a}(e,a);case w.ZodLazy:return()=>e.getter()._def;case w.ZodPromise:return am(e.type._def,a);case w.ZodNaN:case w.ZodNever:return{not:{}};case w.ZodEffects:return function(e,t){return"input"===t.effectStrategy?am(e.schema._def,t):{}}(e,a);case w.ZodAny:case w.ZodUnknown:return{};case w.ZodDefault:return function(e,t){return{...am(e.innerType._def,t),default:e.defaultValue()}}(e,a);case w.ZodBranded:return t6(e,a);case w.ZodReadonly:return ac(e,a);case w.ZodCatch:return t2(e,a);case w.ZodPipeline:return au(e,a);case w.ZodFunction:case w.ZodVoid:case w.ZodSymbol:default:return}},ap=(e,t)=>{let a=0;for(;a<e.length&&a<t.length&&e[a]===t[a];a++);return[(e.length-a).toString(),...t.slice(a)].join("/")};function am(e,t,a=!1){var r;let n=t.seen.get(e);if(t.override){let s=null==(r=t.override)?void 0:r.call(t,e,t,n,a);if(s!==t0)return s}if(n&&!a){let e=ah(n,t);if(void 0!==e)return e}let s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);let i=ad(e,e.typeName,t),o="function"==typeof i?am(i(),t):i;if(o&&af(e,t,o),t.postProcess){let a=t.postProcess(o,e,t);return s.jsonSchema=o,a}return s.jsonSchema=o,o}var ah=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:ap(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,a)=>t.currentPath[a]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},af=(e,t,a)=>(e.description&&(a.description=e.description),a),av=e=>{let t=t3(e),a=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:a,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}},ag=(e,t)=>{var a;let r=av(t),n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>{var n;return{...e,[t]:null!=(n=am(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0))?n:{}}},{}):void 0,s="string"==typeof t?t:(null==t?void 0:t.nameStrategy)==="title"?void 0:null==t?void 0:t.name,i=null!=(a=am(e._def,void 0===s?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1))?a:{},o="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==o&&(i.title=o);let l=void 0===s?n?{...i,[r.definitionPath]:n}:i:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...n,[s]:i}};return l.$schema="http://json-schema.org/draft-07/schema#",l},ay=Symbol.for("vercel.ai.schema");function ab(e){let t;return()=>(null==t&&(t=e()),t)}function a_(e,{validate:t}={}){return{[ay]:!0,_type:void 0,get jsonSchema(){return"function"==typeof e&&(e=e()),e},validate:t}}function ak(e){return null==e?a_({properties:{},additionalProperties:!1}):"object"==typeof e&&null!==e&&ay in e&&!0===e[ay]&&"jsonSchema"in e&&"validate"in e?e:"~standard"in e?"zod"===e["~standard"].vendor?ax(e):a_(()=>tX(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{let a=await e["~standard"].validate(t);return"value"in a?{success:!0,value:a.value}:{success:!1,error:new ek({value:t,cause:a.issues})}}}):e()}function ax(e,t){return"_zod"in e?function(e,t){var a;let r=null!=(a=null==t?void 0:t.useReferences)&&a;return a_(()=>tX(eI.toJSONSchema(e,{target:"draft-7",io:"input",reused:r?"ref":"inline"})),{validate:async t=>{let a=await eI.safeParseAsync(e,t);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}(e,t):function(e,t){var a;let r=null!=(a=null==t?void 0:t.useReferences)&&a;return a_(()=>ag(e,{$refStrategy:r?"root":"none"}),{validate:async t=>{let a=await e.safeParseAsync(t);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}(e,t)}async function aw({value:e,schema:t}){let a=await aE({value:e,schema:t});if(!a.success)throw ek.wrap({value:e,cause:a.error});return a.value}async function aE({value:e,schema:t}){let a=ak(t);try{if(null==a.validate)return{success:!0,value:e,rawValue:e};let t=await a.validate(e);if(t.success)return{success:!0,value:t.value,rawValue:e};return{success:!1,error:ek.wrap({value:e,cause:t.error}),rawValue:e}}catch(t){return{success:!1,error:ek.wrap({value:e,cause:t}),rawValue:e}}}async function aC({text:e,schema:t}){try{let a=function(e){let{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch(t){return tY(e)}try{return tY(e)}finally{Error.stackTraceLimit=t}}(e);if(null==t)return{success:!0,value:a,rawValue:a};return await aE({value:a,schema:t})}catch(t){return{success:!1,error:em.isInstance(t)?t:new em({text:e,cause:t}),rawValue:void 0}}}async function aS(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var aI=Object.defineProperty,aT="AI_InvalidArgumentError",aA=`vercel.ai.error.${aT}`,aN=Symbol.for(aA),aB=class extends en{constructor({parameter:e,value:t,message:a}){super({name:aT,message:`Invalid argument for parameter ${e}: ${a}`}),this[E]=!0,this.parameter=e,this.value=t}static isInstance(e){return en.hasMarker(e,aA)}};E=aN,Symbol.for("vercel.ai.error.AI_InvalidStreamPartError");var aO="AI_InvalidToolApprovalError",aj=`vercel.ai.error.${aO}`,aR=Symbol.for(aj),aP=class extends en{constructor({approvalId:e}){super({name:aO,message:`Tool approval response references unknown approvalId: "${e}". No matching tool-approval-request found in message history.`}),this[C]=!0,this.approvalId=e}static isInstance(e){return en.hasMarker(e,aj)}};C=aR;var a$="AI_InvalidToolInputError",aM=`vercel.ai.error.${a$}`,aV=Symbol.for(aM),aZ=class extends en{constructor({toolInput:e,toolName:t,cause:a,message:r=`Invalid input for tool ${t}: ${es(a)}`}){super({name:a$,message:r,cause:a}),this[S]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return en.hasMarker(e,aM)}};S=aV;var aD="AI_ToolCallNotFoundForApprovalError",aL=`vercel.ai.error.${aD}`,aU=Symbol.for(aL),aF=class extends en{constructor({toolCallId:e,approvalId:t}){super({name:aD,message:`Tool call "${e}" not found for approval request "${t}".`}),this[I]=!0,this.toolCallId=e,this.approvalId=t}static isInstance(e){return en.hasMarker(e,aL)}};I=aU,Symbol.for("vercel.ai.error.AI_NoImageGeneratedError");var az="AI_NoObjectGeneratedError",aq=`vercel.ai.error.${az}`,aW=Symbol.for(aq),aJ=class extends en{constructor({message:e="No object generated.",cause:t,text:a,response:r,usage:n,finishReason:s}){super({name:az,message:e,cause:t}),this[A]=!0,this.text=a,this.response=r,this.usage=n,this.finishReason=s}static isInstance(e){return en.hasMarker(e,aq)}};A=aW;var aK="AI_NoOutputGeneratedError",aH=`vercel.ai.error.${aK}`,aG=Symbol.for(aH),aY=class extends en{constructor({message:e="No output generated.",cause:t}={}){super({name:aK,message:e,cause:t}),this[N]=!0}static isInstance(e){return en.hasMarker(e,aH)}};N=aG;var aX="AI_NoSuchToolError",aQ=`vercel.ai.error.${aX}`,a0=Symbol.for(aQ),a1=class extends en{constructor({toolName:e,availableTools:t,message:a=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:aX,message:a}),this[B]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return en.hasMarker(e,aQ)}};B=a0;var a3="AI_ToolCallRepairError",a6=`vercel.ai.error.${a3}`,a2=Symbol.for(a6),a5=class extends en{constructor({cause:e,originalError:t,message:a=`Error repairing tool call: ${es(e)}`}){super({name:a3,message:a,cause:e}),this[O]=!0,this.originalError=t}static isInstance(e){return en.hasMarker(e,a6)}};O=a2;var a4=class extends en{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},a7="AI_InvalidDataContentError",a9=`vercel.ai.error.${a7}`;j=Symbol.for(a9);var a8="AI_InvalidMessageRoleError",re=`vercel.ai.error.${a8}`,rt=Symbol.for(re),ra=class extends en{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:a8,message:t}),this[R]=!0,this.role=e}static isInstance(e){return en.hasMarker(e,re)}};R=rt;var rr="AI_MessageConversionError",rn=`vercel.ai.error.${rr}`,rs=Symbol.for(rn),ri=class extends en{constructor({originalMessage:e,message:t}){super({name:rr,message:t}),this[P]=!0,this.originalMessage=e}static isInstance(e){return en.hasMarker(e,rn)}};P=rs;var ro="AI_RetryError",rl=`vercel.ai.error.${ro}`,ru=Symbol.for(rl),rc=class extends en{constructor({message:e,reason:t,errors:a}){super({name:ro,message:e}),this[$]=!0,this.reason=t,this.errors=a,this.lastError=a[a.length-1]}static isInstance(e){return en.hasMarker(e,rl)}};$=ru;var rd=!1,rp=e=>{if(0===e.warnings.length)return;let t=globalThis.AI_SDK_LOG_WARNINGS;if(!1!==t){if("function"==typeof t){t(e);return}for(let t of(rd||(rd=!0,console.info("AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.")),e.warnings))console.warn(function({warning:e,provider:t,model:a}){let r=`AI SDK Warning (${t} / ${a}):`;switch(e.type){case"unsupported":{let t=`${r} The feature "${e.feature}" is not supported.`;return e.details&&(t+=` ${e.details}`),t}case"compatibility":{let t=`${r} The feature "${e.feature}" is used in a compatibility mode.`;return e.details&&(t+=` ${e.details}`),t}case"other":return`${r} ${e.message}`;default:return`${r} ${JSON.stringify(e,null,2)}`}}({warning:t,provider:e.provider,model:e.model}))}};function rm({provider:e,modelId:t}){rp({warnings:[{type:"compatibility",feature:"specificationVersion",details:"Using v2 specification compatibility mode. Some features may not be available."}],provider:e,model:t})}function rh(e){return{unified:"unknown"===e?"other":e,raw:void 0}}function rf(e){return{inputTokens:{total:e.inputTokens,noCache:void 0,cacheRead:e.cachedInputTokens,cacheWrite:void 0},outputTokens:{total:e.outputTokens,text:void 0,reasoning:e.reasoningTokens}}}var rv=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],rg=e=>{let t="string"==typeof e?convertBase64ToUint8Array(e):e,a=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(a+10)},ry="6.0.33",rb=async({url:e})=>{var t;let a=e.toString();try{let e=await fetch(a,{headers:withUserAgentSuffix({},`ai-sdk/${ry}`,getRuntimeEnvironmentUserAgent())});if(!e.ok)throw new DownloadError2({url:a,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mediaType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(e){if(DownloadError2.isInstance(e))throw e;throw new DownloadError2({url:a,cause:e})}},r_=(e=rb)=>t=>Promise.all(t.map(async t=>t.isUrlSupportedByModel?null:e(t))),rk=eI.union([eI.string(),eI.instanceof(Uint8Array),eI.instanceof(ArrayBuffer),eI.custom(e=>{var t,a;return null!=(a=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&a},{message:"Must be a Buffer"})]);function rx(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if("string"==typeof e)try{e=new URL(e)}catch(e){}if(e instanceof URL&&"data:"===e.protocol){let{mediaType:t,base64Content:a}=function(e){try{let[t,a]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:a}}catch(e){return{mediaType:void 0,base64Content:void 0}}}(e.toString());if(null==t||null==a)throw new AISDKError18({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:a,mediaType:t}}return{data:e,mediaType:void 0}}function rw(e){return void 0===e?[]:Array.isArray(e)?e:[e]}async function rE(e,t,a){let r=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).map(e=>{var t;let a=null!=(t=e.mediaType)?t:"image"===e.type?"image/*":void 0,r="image"===e.type?e.image:e.data;if("string"==typeof r)try{r=new URL(r)}catch(e){}return{mediaType:a,data:r}}).filter(e=>e.data instanceof URL).map(e=>({url:e.data,isUrlSupportedByModel:null!=e.mediaType&&isUrlSupported({url:e.data.toString(),mediaType:e.mediaType,supportedUrls:a})}));return Object.fromEntries((await t(r)).map((e,t)=>null==e?null:[r[t].url.toString(),{data:e.data,mediaType:e.mediaType}]).filter(e=>null!=e))}function rC(e){return"content"!==e.type?e:{type:"content",value:e.value.map(e=>"media"!==e.type?e:e.mediaType.startsWith("image/")?{type:"image-data",data:e.data,mediaType:e.mediaType}:{type:"file-data",data:e.data,mediaType:e.mediaType})}}async function rS({toolCallId:e,input:t,output:a,tool:r,errorMode:n}){return"text"===n?{type:"error-text",value:getErrorMessage3(a)}:"json"===n?{type:"error-json",value:rI(a)}:(null==r?void 0:r.toModelOutput)?await r.toModelOutput({toolCallId:e,input:t,output:a}):"string"==typeof a?{type:"text",value:a}:{type:"json",value:rI(a)}}function rI(e){return void 0===e?null:e}var rT=eI.lazy(()=>eI.union([eI.null(),eI.string(),eI.number(),eI.boolean(),eI.record(eI.string(),rT.optional()),eI.array(rT)])),rA=eI.record(eI.string(),eI.record(eI.string(),rT.optional())),rN=eI.object({type:eI.literal("text"),text:eI.string(),providerOptions:rA.optional()}),rB=eI.object({type:eI.literal("image"),image:eI.union([rk,eI.instanceof(URL)]),mediaType:eI.string().optional(),providerOptions:rA.optional()}),rO=eI.object({type:eI.literal("file"),data:eI.union([rk,eI.instanceof(URL)]),filename:eI.string().optional(),mediaType:eI.string(),providerOptions:rA.optional()}),rj=eI.object({type:eI.literal("reasoning"),text:eI.string(),providerOptions:rA.optional()}),rR=eI.object({type:eI.literal("tool-call"),toolCallId:eI.string(),toolName:eI.string(),input:eI.unknown(),providerOptions:rA.optional(),providerExecuted:eI.boolean().optional()}),rP=eI.discriminatedUnion("type",[eI.object({type:eI.literal("text"),value:eI.string(),providerOptions:rA.optional()}),eI.object({type:eI.literal("json"),value:rT,providerOptions:rA.optional()}),eI.object({type:eI.literal("execution-denied"),reason:eI.string().optional(),providerOptions:rA.optional()}),eI.object({type:eI.literal("error-text"),value:eI.string(),providerOptions:rA.optional()}),eI.object({type:eI.literal("error-json"),value:rT,providerOptions:rA.optional()}),eI.object({type:eI.literal("content"),value:eI.array(eI.union([eI.object({type:eI.literal("text"),text:eI.string(),providerOptions:rA.optional()}),eI.object({type:eI.literal("media"),data:eI.string(),mediaType:eI.string()}),eI.object({type:eI.literal("file-data"),data:eI.string(),mediaType:eI.string(),filename:eI.string().optional(),providerOptions:rA.optional()}),eI.object({type:eI.literal("file-url"),url:eI.string(),providerOptions:rA.optional()}),eI.object({type:eI.literal("file-id"),fileId:eI.union([eI.string(),eI.record(eI.string(),eI.string())]),providerOptions:rA.optional()}),eI.object({type:eI.literal("image-data"),data:eI.string(),mediaType:eI.string(),providerOptions:rA.optional()}),eI.object({type:eI.literal("image-url"),url:eI.string(),providerOptions:rA.optional()}),eI.object({type:eI.literal("image-file-id"),fileId:eI.union([eI.string(),eI.record(eI.string(),eI.string())]),providerOptions:rA.optional()}),eI.object({type:eI.literal("custom"),providerOptions:rA.optional()})]))})]),r$=eI.object({type:eI.literal("tool-result"),toolCallId:eI.string(),toolName:eI.string(),output:rP,providerOptions:rA.optional()}),rM=eI.object({type:eI.literal("tool-approval-request"),approvalId:eI.string(),toolCallId:eI.string()}),rV=eI.object({type:eI.literal("tool-approval-response"),approvalId:eI.string(),approved:eI.boolean(),reason:eI.string().optional()}),rZ=eI.object({role:eI.literal("system"),content:eI.string(),providerOptions:rA.optional()}),rD=eI.object({role:eI.literal("user"),content:eI.union([eI.string(),eI.array(eI.union([rN,rB,rO]))]),providerOptions:rA.optional()}),rL=eI.object({role:eI.literal("assistant"),content:eI.union([eI.string(),eI.array(eI.union([rN,rO,rj,rR,r$,rM]))]),providerOptions:rA.optional()}),rU=eI.object({role:eI.literal("tool"),content:eI.array(eI.union([r$,rV])),providerOptions:rA.optional()}),rF=eI.union([rZ,rD,rL,rU]),rz={startSpan:()=>rq,startActiveSpan:(e,t,a,r)=>"function"==typeof t?t(rq):"function"==typeof a?a(rq):"function"==typeof r?r(rq):void 0},rq={spanContext:()=>rW,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},rW={traceId:"",spanId:"",traceFlags:0};async function rJ({name:e,tracer:t,attributes:a,fn:r,endWhenDone:n=!0}){return t.startActiveSpan(e,{attributes:await a},async e=>{try{let t=await r(e);return n&&e.end(),t}catch(t){try{rK(e,t)}finally{e.end()}throw t}})}function rK(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:SpanStatusCode.ERROR,message:t.message})):e.setStatus({code:SpanStatusCode.ERROR})}async function rH({telemetry:e,attributes:t}){if((null==e?void 0:e.isEnabled)!==!0)return{};let a={};for(let[r,n]of Object.entries(t))if(null!=n){if("object"==typeof n&&"input"in n&&"function"==typeof n.input){if((null==e?void 0:e.recordInputs)===!1)continue;let t=await n.input();null!=t&&(a[r]=t);continue}if("object"==typeof n&&"output"in n&&"function"==typeof n.output){if((null==e?void 0:e.recordOutputs)===!1)continue;let t=await n.output();null!=t&&(a[r]=t);continue}a[r]=n}return a}function rG(e,t){return null==e&&null==t?void 0:(null!=e?e:0)+(null!=t?t:0)}var rY=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:a=2,abortSignal:r}={})=>async n=>rX(n,{maxRetries:e,delayInMs:t,backoffFactor:a,abortSignal:r});async function rX(e,{maxRetries:t,delayInMs:a,backoffFactor:r,abortSignal:n},s=[]){try{return await e()}catch(u){if(isAbortError(u)||0===t)throw u;let i=getErrorMessage4(u),o=[...s,u],l=o.length;if(l>t)throw new rc({message:`Failed after ${l} attempts. Last error: ${i}`,reason:"maxRetriesExceeded",errors:o});if(u instanceof Error&&APICallError2.isInstance(u)&&!0===u.isRetryable&&l<=t)return await delay(function({error:e,exponentialBackoffDelay:t}){let a;let r=e.responseHeaders;if(!r)return t;let n=r["retry-after-ms"];if(n){let e=parseFloat(n);Number.isNaN(e)||(a=e)}let s=r["retry-after"];if(s&&void 0===a){let e=parseFloat(s);a=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}return null!=a&&!Number.isNaN(a)&&0<=a&&(a<6e4||a<t)?a:t}({error:u,exponentialBackoffDelay:a}),{abortSignal:n}),rX(e,{maxRetries:t,delayInMs:r*a,backoffFactor:r,abortSignal:n},o);if(1===l)throw u;throw new rc({message:`Failed after ${l} attempts with non-retryable error: '${i}'`,reason:"errorNotRetryable",errors:o})}}async function rQ({toolCall:e,tools:t,tracer:a,telemetry:r,messages:n,abortSignal:s,experimental_context:i,onPreliminaryToolResult:o}){let{toolName:l,toolCallId:u,input:c}=e,d=null==t?void 0:t[l];if((null==d?void 0:d.execute)!=null)return rJ({name:"ai.toolCall",attributes:rH({telemetry:r,attributes:{...function({operationId:e,telemetry:t}){return{"operation.name":`${e}${(null==t?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":l,"ai.toolCall.id":u,"ai.toolCall.args":{output:()=>JSON.stringify(c)}}}),tracer:a,fn:async t=>{let a;try{for await(let t of executeTool({execute:d.execute.bind(d),input:c,options:{toolCallId:u,messages:n,abortSignal:s,experimental_context:i}}))"preliminary"===t.type?null==o||o({...e,type:"tool-result",output:t.output,preliminary:!0}):a=t.output}catch(a){return rK(t,a),{type:"tool-error",toolCallId:u,toolName:l,input:c,error:a,dynamic:"dynamic"===d.type,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}}}try{t.setAttributes(await rH({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(a)}}}))}catch(e){}return{type:"tool-result",toolCallId:u,toolName:l,input:c,output:a,dynamic:"dynamic"===d.type,...null!=e.providerMetadata?{providerMetadata:e.providerMetadata}:{}}}})}var r0=class{constructor({data:e,mediaType:t}){let a=e instanceof Uint8Array;this.base64Data=a?void 0:e,this.uint8ArrayData=a?e:void 0,this.mediaType=t}get base64(){return null==this.base64Data&&(this.base64Data=function(e){let t="";for(let a=0;a<e.length;a++)t+=String.fromCodePoint(e[a]);return tL(t)}(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=function(e){let t=tU(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}(this.base64Data)),this.uint8ArrayData}};async function r1(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await aC({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await aC({text:function(e){let t=["ROOT"],a=-1,r=null;function n(e,n,s){switch(e){case'"':a=n,t.pop(),t.push(s),t.push("INSIDE_STRING");break;case"f":case"t":case"n":a=n,r=n,t.pop(),t.push(s),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":a=n,t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"{":a=n,t.pop(),t.push(s),t.push("INSIDE_OBJECT_START");break;case"[":a=n,t.pop(),t.push(s),t.push("INSIDE_ARRAY_START")}}function s(e,r){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":a=r,t.pop()}}function i(e,r){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":a=r,t.pop()}}for(let o=0;o<e.length;o++){let l=e[o];switch(t[t.length-1]){case"ROOT":n(l,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":a=o,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":n(l,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":s(l,o);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),a=o;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:a=o}break;case"INSIDE_ARRAY_START":"]"===l?(a=o,t.pop()):(a=o,n(l,o,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":a=o,t.pop();break;default:a=o}break;case"INSIDE_ARRAY_AFTER_COMMA":n(l,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),a=o;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":a=o;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o);break;default:t.pop()}break;case"INSIDE_LITERAL":{let n=e.substring(r,o+1);"false".startsWith(n)||"true".startsWith(n)||"null".startsWith(n)?a=o:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?s(l,o):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o))}}}let o=e.slice(0,a+1);for(let a=t.length-1;a>=0;a--)switch(t[a]){case"INSIDE_STRING":o+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":o+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":o+="]";break;case"INSIDE_LITERAL":{let t=e.substring(r,e.length);"true".startsWith(t)?o+="true".slice(t.length):"false".startsWith(t)?o+="false".slice(t.length):"null".startsWith(t)&&(o+="null".slice(t.length))}}return o}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}((e,t)=>{for(var a in t)aI(e,a,{get:t[a],enumerable:!0})})({},{array:()=>r2,choice:()=>r5,json:()=>r4,object:()=>r6,text:()=>r3});var r3=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),parseCompleteOutput:async({text:e})=>e,parsePartialOutput:async({text:e})=>({partial:e}),createElementStreamTransform(){}}),r6=({schema:e,name:t,description:a})=>{let r=ak(e);return{name:"object",responseFormat:aS(r.jsonSchema).then(e=>({type:"json",schema:e,...null!=t&&{name:t},...null!=a&&{description:a}})),async parseCompleteOutput({text:e},t){let a=await aC({text:e});if(!a.success)throw new aJ({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});let n=await aE({value:a.value,schema:r});if(!n.success)throw new aJ({message:"No object generated: response did not match schema.",cause:n.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});return n.value},async parsePartialOutput({text:e}){let t=await r1(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value}}},createElementStreamTransform(){}}},r2=({element:e,name:t,description:a})=>{let r=ak(e);return{name:"array",responseFormat:aS(r.jsonSchema).then(e=>{let{$schema:r,...n}=e;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:n}},required:["elements"],additionalProperties:!1},...null!=t&&{name:t},...null!=a&&{description:a}}}),async parseCompleteOutput({text:e},t){let a=await aC({text:e});if(!a.success)throw new aJ({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});let n=a.value;if(null==n||"object"!=typeof n||!("elements"in n)||!Array.isArray(n.elements))throw new aJ({message:"No object generated: response did not match schema.",cause:new ek({value:n,cause:"response must be an object with an elements array"}),text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});for(let a of n.elements){let n=await aE({value:a,schema:r});if(!n.success)throw new aJ({message:"No object generated: response did not match schema.",cause:n.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason})}return n.elements},async parsePartialOutput({text:e}){let t=await r1(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let e=t.value;if(null==e||"object"!=typeof e||!("elements"in e)||!Array.isArray(e.elements))return;let a="repaired-parse"===t.state&&e.elements.length>0?e.elements.slice(0,-1):e.elements,n=[];for(let e of a){let t=await aE({value:e,schema:r});t.success&&n.push(t.value)}return{partial:n}}}},createElementStreamTransform(){let e=0;return new TransformStream({transform({partialOutput:t},a){if(null!=t)for(;e<t.length;e++)a.enqueue(t[e])}})}}},r5=({options:e,name:t,description:a})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...null!=t&&{name:t},...null!=a&&{description:a}}),async parseCompleteOutput({text:t},a){let r=await aC({text:t});if(!r.success)throw new aJ({message:"No object generated: could not parse the response.",cause:r.error,text:t,response:a.response,usage:a.usage,finishReason:a.finishReason});let n=r.value;if(null==n||"object"!=typeof n||!("result"in n)||"string"!=typeof n.result||!e.includes(n.result))throw new aJ({message:"No object generated: response did not match schema.",cause:new ek({value:n,cause:"response must be an object that contains a choice value."}),text:t,response:a.response,usage:a.usage,finishReason:a.finishReason});return n.result},async parsePartialOutput({text:t}){let a=await r1(t);switch(a.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{let t=a.value;if(null==t||"object"!=typeof t||!("result"in t)||"string"!=typeof t.result)return;let r=e.filter(e=>e.startsWith(t.result));if("successful-parse"===a.state)return r.includes(t.result)?{partial:t.result}:void 0;return 1===r.length?{partial:r[0]}:void 0}}},createElementStreamTransform(){}}),r4=({name:e,description:t}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...null!=e&&{name:e},...null!=t&&{description:t}}),async parseCompleteOutput({text:e},t){let a=await aC({text:e});if(!a.success)throw new aJ({message:"No object generated: could not parse the response.",cause:a.error,text:e,response:t.response,usage:t.usage,finishReason:t.finishReason});return a.value},async parsePartialOutput({text:e}){let t=await r1(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return void 0===t.value?void 0:{partial:t.value}}},createElementStreamTransform(){}});async function r7(e){let t=""===e.input.trim()?{success:!0,value:{}}:await safeParseJSON3({text:e.input});if(!1===t.success)throw new aZ({toolName:e.toolName,toolInput:e.input,cause:t.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:t.value,providerExecuted:!0,dynamic:!0,providerMetadata:e.providerMetadata}}async function r9({toolCall:e,tools:t}){let a=e.toolName,r=t[a];if(null==r){if(e.providerExecuted&&e.dynamic)return await r7(e);throw new a1({toolName:e.toolName,availableTools:Object.keys(t)})}let n=asSchema3(r.inputSchema),s=""===e.input.trim()?await safeValidateTypes3({value:{},schema:n}):await safeParseJSON3({text:e.input,schema:n});if(!1===s.success)throw new aZ({toolName:a,toolInput:e.input,cause:s.error});return"dynamic"===r.type?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:s.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0,title:r.title}:{type:"tool-call",toolCallId:e.toolCallId,toolName:a,input:s.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:r.title}}tz({prefix:"aitxt",size:24});function r8(e,t){let a=new Headers(null!=e?e:{});for(let[e,r]of Object.entries(t))a.has(e)||a.set(e,r);return a}TransformStream;var ne=ab(()=>ax(eI.union([eI.strictObject({type:eI.literal("text-start"),id:eI.string(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("text-delta"),id:eI.string(),delta:eI.string(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("text-end"),id:eI.string(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("error"),errorText:eI.string()}),eI.strictObject({type:eI.literal("tool-input-start"),toolCallId:eI.string(),toolName:eI.string(),providerExecuted:eI.boolean().optional(),dynamic:eI.boolean().optional(),title:eI.string().optional()}),eI.strictObject({type:eI.literal("tool-input-delta"),toolCallId:eI.string(),inputTextDelta:eI.string()}),eI.strictObject({type:eI.literal("tool-input-available"),toolCallId:eI.string(),toolName:eI.string(),input:eI.unknown(),providerExecuted:eI.boolean().optional(),providerMetadata:rA.optional(),dynamic:eI.boolean().optional(),title:eI.string().optional()}),eI.strictObject({type:eI.literal("tool-input-error"),toolCallId:eI.string(),toolName:eI.string(),input:eI.unknown(),providerExecuted:eI.boolean().optional(),providerMetadata:rA.optional(),dynamic:eI.boolean().optional(),errorText:eI.string(),title:eI.string().optional()}),eI.strictObject({type:eI.literal("tool-approval-request"),approvalId:eI.string(),toolCallId:eI.string()}),eI.strictObject({type:eI.literal("tool-output-available"),toolCallId:eI.string(),output:eI.unknown(),providerExecuted:eI.boolean().optional(),dynamic:eI.boolean().optional(),preliminary:eI.boolean().optional()}),eI.strictObject({type:eI.literal("tool-output-error"),toolCallId:eI.string(),errorText:eI.string(),providerExecuted:eI.boolean().optional(),dynamic:eI.boolean().optional()}),eI.strictObject({type:eI.literal("tool-output-denied"),toolCallId:eI.string()}),eI.strictObject({type:eI.literal("reasoning-start"),id:eI.string(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("reasoning-delta"),id:eI.string(),delta:eI.string(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("reasoning-end"),id:eI.string(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("source-url"),sourceId:eI.string(),url:eI.string(),title:eI.string().optional(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("source-document"),sourceId:eI.string(),mediaType:eI.string(),title:eI.string(),filename:eI.string().optional(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.literal("file"),url:eI.string(),mediaType:eI.string(),providerMetadata:rA.optional()}),eI.strictObject({type:eI.custom(e=>"string"==typeof e&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:eI.string().optional(),data:eI.unknown(),transient:eI.boolean().optional()}),eI.strictObject({type:eI.literal("start-step")}),eI.strictObject({type:eI.literal("finish-step")}),eI.strictObject({type:eI.literal("start"),messageId:eI.string().optional(),messageMetadata:eI.unknown().optional()}),eI.strictObject({type:eI.literal("finish"),finishReason:eI.enum(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:eI.unknown().optional()}),eI.strictObject({type:eI.literal("abort"),reason:eI.string().optional()}),eI.strictObject({type:eI.literal("message-metadata"),messageMetadata:eI.unknown()})])));function nt(e){return e.type.startsWith("data-")}function na(e){return"text"===e.type}function nr(e){return"file"===e.type}function nn(e){return"reasoning"===e.type}function ns(e){return e.type.startsWith("tool-")}function ni(e){return"dynamic-tool"===e.type}function no(e){return ns(e)||ni(e)}function nl(e){return e.type.split("-").slice(1).join("-")}function nu(e){return ni(e)?e.toolName:nl(e)}async function nc({stream:e,onError:t}){let a=e.getReader();try{for(;;){let{done:e}=await a.read();if(e)break}}catch(e){null==t||t(e)}finally{a.releaseLock()}}function nd(){let e,t;return{promise:new Promise((a,r)=>{e=a,t=r}),resolve:e,reject:t}}tz({prefix:"aitxt",size:24});var np=ab(()=>ax(eI.array(eI.object({id:eI.string(),role:eI.enum(["system","user","assistant"]),metadata:eI.unknown().optional(),parts:eI.array(eI.union([eI.object({type:eI.literal("text"),text:eI.string(),state:eI.enum(["streaming","done"]).optional(),providerMetadata:rA.optional()}),eI.object({type:eI.literal("reasoning"),text:eI.string(),state:eI.enum(["streaming","done"]).optional(),providerMetadata:rA.optional()}),eI.object({type:eI.literal("source-url"),sourceId:eI.string(),url:eI.string(),title:eI.string().optional(),providerMetadata:rA.optional()}),eI.object({type:eI.literal("source-document"),sourceId:eI.string(),mediaType:eI.string(),title:eI.string(),filename:eI.string().optional(),providerMetadata:rA.optional()}),eI.object({type:eI.literal("file"),mediaType:eI.string(),filename:eI.string().optional(),url:eI.string(),providerMetadata:rA.optional()}),eI.object({type:eI.literal("step-start")}),eI.object({type:eI.string().startsWith("data-"),id:eI.string().optional(),data:eI.unknown()}),eI.object({type:eI.literal("dynamic-tool"),toolName:eI.string(),toolCallId:eI.string(),state:eI.literal("input-streaming"),input:eI.unknown().optional(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.never().optional(),approval:eI.never().optional()}),eI.object({type:eI.literal("dynamic-tool"),toolName:eI.string(),toolCallId:eI.string(),state:eI.literal("input-available"),input:eI.unknown(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.never().optional()}),eI.object({type:eI.literal("dynamic-tool"),toolName:eI.string(),toolCallId:eI.string(),state:eI.literal("approval-requested"),input:eI.unknown(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.never().optional(),reason:eI.never().optional()})}),eI.object({type:eI.literal("dynamic-tool"),toolName:eI.string(),toolCallId:eI.string(),state:eI.literal("approval-responded"),input:eI.unknown(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.boolean(),reason:eI.string().optional()})}),eI.object({type:eI.literal("dynamic-tool"),toolName:eI.string(),toolCallId:eI.string(),state:eI.literal("output-available"),input:eI.unknown(),providerExecuted:eI.boolean().optional(),output:eI.unknown(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),preliminary:eI.boolean().optional(),approval:eI.object({id:eI.string(),approved:eI.literal(!0),reason:eI.string().optional()}).optional()}),eI.object({type:eI.literal("dynamic-tool"),toolName:eI.string(),toolCallId:eI.string(),state:eI.literal("output-error"),input:eI.unknown(),rawInput:eI.unknown().optional(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.string(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.literal(!0),reason:eI.string().optional()}).optional()}),eI.object({type:eI.literal("dynamic-tool"),toolName:eI.string(),toolCallId:eI.string(),state:eI.literal("output-denied"),input:eI.unknown(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.literal(!1),reason:eI.string().optional()})}),eI.object({type:eI.string().startsWith("tool-"),toolCallId:eI.string(),state:eI.literal("input-streaming"),providerExecuted:eI.boolean().optional(),input:eI.unknown().optional(),output:eI.never().optional(),errorText:eI.never().optional(),approval:eI.never().optional()}),eI.object({type:eI.string().startsWith("tool-"),toolCallId:eI.string(),state:eI.literal("input-available"),providerExecuted:eI.boolean().optional(),input:eI.unknown(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.never().optional()}),eI.object({type:eI.string().startsWith("tool-"),toolCallId:eI.string(),state:eI.literal("approval-requested"),input:eI.unknown(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.never().optional(),reason:eI.never().optional()})}),eI.object({type:eI.string().startsWith("tool-"),toolCallId:eI.string(),state:eI.literal("approval-responded"),input:eI.unknown(),providerExecuted:eI.boolean().optional(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.boolean(),reason:eI.string().optional()})}),eI.object({type:eI.string().startsWith("tool-"),toolCallId:eI.string(),state:eI.literal("output-available"),providerExecuted:eI.boolean().optional(),input:eI.unknown(),output:eI.unknown(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),preliminary:eI.boolean().optional(),approval:eI.object({id:eI.string(),approved:eI.literal(!0),reason:eI.string().optional()}).optional()}),eI.object({type:eI.string().startsWith("tool-"),toolCallId:eI.string(),state:eI.literal("output-error"),providerExecuted:eI.boolean().optional(),input:eI.unknown(),rawInput:eI.unknown().optional(),output:eI.never().optional(),errorText:eI.string(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.literal(!0),reason:eI.string().optional()}).optional()}),eI.object({type:eI.string().startsWith("tool-"),toolCallId:eI.string(),state:eI.literal("output-denied"),providerExecuted:eI.boolean().optional(),input:eI.unknown(),output:eI.never().optional(),errorText:eI.never().optional(),callProviderMetadata:rA.optional(),approval:eI.object({id:eI.string(),approved:eI.literal(!1),reason:eI.string().optional()})})])).nonempty("Message must contain at least one part")})).nonempty("Messages array must not be empty")));async function nm({messages:e,metadataSchema:t,dataSchemas:a,tools:r}){try{if(null==e)return{success:!1,error:new aB({parameter:"messages",value:e,message:"messages parameter must be provided"})};let n=await validateTypes2({value:e,schema:np});if(t)for(let e of n)await validateTypes2({value:e.metadata,schema:t});if(a)for(let e of n)for(let t of e.parts.filter(e=>e.type.startsWith("data-"))){let e=t.type.slice(5),r=a[e];if(!r)return{success:!1,error:new TypeValidationError3({value:t.data,cause:`No data schema found for data part ${e}`})};await validateTypes2({value:t.data,schema:r})}if(r)for(let e of n)for(let t of e.parts.filter(e=>e.type.startsWith("tool-"))){let e=t.type.slice(5),a=r[e];if(!a)return{success:!1,error:new TypeValidationError3({value:t.input,cause:`No tool schema found for tool part ${e}`})};("input-available"===t.state||"output-available"===t.state||"output-error"===t.state&&void 0!==t.input)&&await validateTypes2({value:t.input,schema:a.inputSchema}),"output-available"===t.state&&a.outputSchema&&await validateTypes2({value:t.output,schema:a.outputSchema})}return{success:!0,data:n}}catch(e){return{success:!1,error:e}}}async function nh(e,t,a){let r=await safeParseJSON4({text:e});if(!r.success)throw new aJ({message:"No object generated: could not parse the response.",cause:r.error,text:e,response:a.response,usage:a.usage,finishReason:a.finishReason});let n=await t.validateFinalResult(r.value,{text:e,response:a.response,usage:a.usage});if(!n.success)throw new aJ({message:"No object generated: response did not match schema.",cause:n.error,text:e,response:a.response,usage:a.usage,finishReason:a.finishReason});return n.value}tz({prefix:"aiobj",size:24});var nf=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,a)=>{this.queue.push(async()=>{try{await e(),t()}catch(e){a(e)}}),this.processQueue()})}};tz({prefix:"aiobj",size:24});var nv=({model:e,middleware:{transformParams:t,wrapGenerate:a,wrapStream:r,overrideProvider:n,overrideModelId:s,overrideSupportedUrls:i},modelId:o,providerId:l})=>{var u,c,d;async function p({params:a,type:r}){return t?await t({params:a,type:r,model:e}):a}return{specificationVersion:"v3",provider:null!=(u=null!=l?l:null==n?void 0:n({model:e}))?u:e.provider,modelId:null!=(c=null!=o?o:null==s?void 0:s({model:e}))?c:e.modelId,supportedUrls:null!=(d=null==i?void 0:i({model:e}))?d:e.supportedUrls,async doGenerate(t){let r=await p({params:t,type:"generate"}),n=async()=>e.doGenerate(r),s=async()=>e.doStream(r);return a?a({doGenerate:n,doStream:s,params:r,model:e}):n()},async doStream(t){let a=await p({params:t,type:"stream"}),n=async()=>e.doGenerate(a),s=async()=>e.doStream(a);return r?r({doGenerate:n,doStream:s,params:a,model:e}):s()}}},ng=({model:e,middleware:{transformParams:t,wrapGenerate:a,overrideProvider:r,overrideModelId:n,overrideMaxImagesPerCall:s},modelId:i,providerId:o})=>{var l,u,c;async function d({params:a}){return t?await t({params:a,model:e}):a}let p=null!=(l=null==s?void 0:s({model:e}))?l:e.maxImagesPerCall,m=p instanceof Function?p.bind(e):p;return{specificationVersion:"v3",provider:null!=(u=null!=o?o:null==r?void 0:r({model:e}))?u:e.provider,modelId:null!=(c=null!=i?i:null==n?void 0:n({model:e}))?c:e.modelId,maxImagesPerCall:m,async doGenerate(t){let r=await d({params:t}),n=async()=>e.doGenerate(r);return a?a({doGenerate:n,params:r,model:e}):n()}}},ny="AI_NoSuchProviderError",nb=`vercel.ai.error.${ny}`;async function n_(e){if(null==e)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async e=>{let{name:t,type:a}=e;return{type:"file",mediaType:a,filename:t,url:await new Promise((t,a)=>{let r=new FileReader;r.onload=e=>{var a;t(null==(a=e.target)?void 0:a.result)},r.onerror=e=>a(e),r.readAsDataURL(e)})}}))}M=Symbol.for(nb);var nk=class{constructor({api:e="/api/chat",credentials:t,headers:a,body:r,fetch:n,prepareSendMessagesRequest:s,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=a,this.body=r,this.fetch=n,this.prepareSendMessagesRequest=s,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var a,r,n,s,i;let o=await aS(this.body),l=await aS(this.headers),u=await aS(this.credentials),c={...tJ(l),...tJ(t.headers)},d=await (null==(a=this.prepareSendMessagesRequest)?void 0:a.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...o,...t.body},headers:c,credentials:u,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),p=null!=(r=null==d?void 0:d.api)?r:this.api,m=(null==d?void 0:d.headers)!==void 0?tJ(d.headers):c,h=(null==d?void 0:d.body)!==void 0?d.body:{...o,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},f=null!=(n=null==d?void 0:d.credentials)?n:u,v=null!=(s=this.fetch)?s:globalThis.fetch,g=await v(p,{method:"POST",headers:tK({"Content-Type":"application/json",...m},`ai-sdk/${ry}`,tW()),body:JSON.stringify(h),credentials:f,signal:e});if(!g.ok)throw Error(null!=(i=await g.text())?i:"Failed to fetch the chat response.");if(!g.body)throw Error("The response body is empty.");return this.processResponseStream(g.body)}async reconnectToStream(e){var t,a,r,n,s;let i=await aS(this.body),o=await aS(this.headers),l=await aS(this.credentials),u={...tJ(o),...tJ(e.headers)},c=await (null==(t=this.prepareReconnectToStreamRequest)?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:u,credentials:l,requestMetadata:e.metadata})),d=null!=(a=null==c?void 0:c.api)?a:`${this.api}/${e.chatId}/stream`,p=(null==c?void 0:c.headers)!==void 0?tJ(c.headers):u,m=null!=(r=null==c?void 0:c.credentials)?r:l,h=null!=(n=this.fetch)?n:globalThis.fetch,f=await h(d,{method:"GET",headers:tK(p,`ai-sdk/${ry}`,tW()),credentials:m});if(204===f.status)return null;if(!f.ok)throw Error(null!=(s=await f.text())?s:"Failed to fetch the chat response.");if(!f.body)throw Error("The response body is empty.");return this.processResponseStream(f.body)}},nx=class extends nk{constructor(e={}){super(e)}processResponseStream(e){return(function({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new tD).pipeThrough(new TransformStream({async transform({data:e},a){"[DONE]"!==e&&a.enqueue(await aC({text:e,schema:t}))}}))})({stream:e,schema:ne}).pipeThrough(new TransformStream({async transform(e,t){if(!e.success)throw e.error;t.enqueue(e.value)}}))}},nw=class{constructor({generateId:e=tq,id:t=e(),transport:a=new nx,messageMetadataSchema:r,dataPartSchemas:n,state:s,onError:i,onToolCall:o,onFinish:l,onData:u,sendAutomaticallyWhen:c}){this.activeResponse=void 0,this.jobExecutor=new nf,this.sendMessage=async(e,t)=>{var a,r,n,s;let i;if(null==e){await this.makeRequest({trigger:"submit-message",messageId:null==(a=this.lastMessage)?void 0:a.id,...t});return}if(i="text"in e||"files"in e?{parts:[...Array.isArray(e.files)?e.files:await n_(e.files),..."text"in e&&null!=e.text?[{type:"text",text:e.text}]:[]]}:e,null!=e.messageId){let t=this.state.messages.findIndex(t=>t.id===e.messageId);if(-1===t)throw Error(`message with id ${e.messageId} not found`);if("user"!==this.state.messages[t].role)throw Error(`message with id ${e.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,t+1),this.state.replaceMessage(t,{...i,id:e.messageId,role:null!=(r=i.role)?r:"user",metadata:e.metadata})}else this.state.pushMessage({...i,id:null!=(n=i.id)?n:this.generateId(),role:null!=(s=i.role)?s:"user",metadata:e.metadata});await this.makeRequest({trigger:"submit-message",messageId:e.messageId,...t})},this.regenerate=async({messageId:e,...t}={})=>{let a=null==e?this.state.messages.length-1:this.state.messages.findIndex(t=>t.id===e);if(-1===a)throw Error(`message ${e} not found`);this.state.messages=this.state.messages.slice(0,"assistant"===this.messages[a].role?a:a+1),await this.makeRequest({trigger:"regenerate-message",messageId:e,...t})},this.resumeStream=async(e={})=>{await this.makeRequest({trigger:"resume-stream",...e})},this.clearError=()=>{"error"===this.status&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolApprovalResponse=async({id:e,approved:t,reason:a})=>this.jobExecutor.run(async()=>{var r,n;let s=this.state.messages,i=s[s.length-1],o=r=>no(r)&&"approval-requested"===r.state&&r.approval.id===e?{...r,state:"approval-responded",approval:{id:e,approved:t,reason:a}}:r;this.state.replaceMessage(s.length-1,{...i,parts:i.parts.map(o)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(o)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(r=this.sendAutomaticallyWhen)?void 0:r.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(n=this.lastMessage)?void 0:n.id})}),this.addToolOutput=async({state:e="output-available",tool:t,toolCallId:a,output:r,errorText:n})=>this.jobExecutor.run(async()=>{var t,s;let i=this.state.messages,o=i[i.length-1],l=t=>no(t)&&t.toolCallId===a?{...t,state:e,output:r,errorText:n}:t;this.state.replaceMessage(i.length-1,{...o,parts:o.parts.map(l)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(l)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(t=this.sendAutomaticallyWhen)?void 0:t.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(s=this.lastMessage)?void 0:s.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var e;("streaming"===this.status||"submitted"===this.status)&&(null==(e=this.activeResponse)?void 0:e.abortController)&&this.activeResponse.abortController.abort()},this.id=t,this.transport=a,this.generateId=e,this.messageMetadataSchema=r,this.dataPartSchemas=n,this.state=s,this.onError=i,this.onToolCall=o,this.onFinish=l,this.onData=u,this.sendAutomaticallyWhen=c}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:a,body:r,messageId:n}){var s,i,o,l;this.setStatus({status:"submitted",error:void 0});let u=this.lastMessage,c=!1,d=!1,p=!1;try{let s;let i={state:function({lastMessage:e,messageId:t}){return{message:(null==e?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}({lastMessage:this.state.snapshot(u),messageId:this.generateId()}),abortController:new AbortController};if(i.abortController.signal.addEventListener("abort",()=>{c=!0}),this.activeResponse=i,"resume-stream"===e){let e=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:a,body:r});if(null==e){this.setStatus({status:"ready"});return}s=e}else s=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:i.abortController.signal,metadata:t,headers:a,body:r,trigger:e,messageId:n});await nc({stream:function({stream:e,messageMetadataSchema:t,dataPartSchemas:a,runUpdateMessageJob:r,onError:n,onToolCall:s,onData:i}){return e.pipeThrough(new TransformStream({async transform(e,o){await r(async({state:r,write:l})=>{var u,c,d,p;function m(e){let t=r.message.parts.filter(no).find(t=>t.toolCallId===e);if(null==t)throw Error(`no tool invocation found for tool call ${e}`);return t}function h(e){var t;let a=r.message.parts.find(t=>ns(t)&&t.toolCallId===e.toolCallId);null!=a?(a.state=e.state,a.input=e.input,a.output=e.output,a.errorText=e.errorText,a.rawInput=e.rawInput,a.preliminary=e.preliminary,void 0!==e.title&&(a.title=e.title),a.providerExecuted=null!=(t=e.providerExecuted)?t:a.providerExecuted,null!=e.providerMetadata&&"input-available"===a.state&&(a.callProviderMetadata=e.providerMetadata)):r.message.parts.push({type:`tool-${e.toolName}`,toolCallId:e.toolCallId,state:e.state,title:e.title,input:e.input,output:e.output,rawInput:e.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted,preliminary:e.preliminary,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}function f(e){var t,a;let n=r.message.parts.find(t=>"dynamic-tool"===t.type&&t.toolCallId===e.toolCallId);null!=n?(n.state=e.state,n.toolName=e.toolName,n.input=e.input,n.output=e.output,n.errorText=e.errorText,n.rawInput=null!=(t=e.rawInput)?t:n.rawInput,n.preliminary=e.preliminary,void 0!==e.title&&(n.title=e.title),n.providerExecuted=null!=(a=e.providerExecuted)?a:n.providerExecuted,null!=e.providerMetadata&&"input-available"===n.state&&(n.callProviderMetadata=e.providerMetadata)):r.message.parts.push({type:"dynamic-tool",toolName:e.toolName,toolCallId:e.toolCallId,state:e.state,input:e.input,output:e.output,errorText:e.errorText,preliminary:e.preliminary,providerExecuted:e.providerExecuted,title:e.title,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}async function v(e){if(null!=e){let a=null!=r.message.metadata?function e(t,a){if(void 0===t&&void 0===a)return;if(void 0===t)return a;if(void 0===a)return t;let r={...t};for(let n in a)if(Object.prototype.hasOwnProperty.call(a,n)){let s=a[n];if(void 0===s)continue;let i=n in t?t[n]:void 0,o=null!==s&&"object"==typeof s&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp),l=null!=i&&"object"==typeof i&&!Array.isArray(i)&&!(i instanceof Date)&&!(i instanceof RegExp);o&&l?r[n]=e(i,s):r[n]=s}return r}(r.message.metadata,e):e;null!=t&&await aw({value:a,schema:t}),r.message.metadata=a}}switch(e.type){case"text-start":{let t={type:"text",text:"",providerMetadata:e.providerMetadata,state:"streaming"};r.activeTextParts[e.id]=t,r.message.parts.push(t),l();break}case"text-delta":{let t=r.activeTextParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(u=e.providerMetadata)?u:t.providerMetadata,l();break}case"text-end":{let t=r.activeTextParts[e.id];t.state="done",t.providerMetadata=null!=(c=e.providerMetadata)?c:t.providerMetadata,delete r.activeTextParts[e.id],l();break}case"reasoning-start":{let t={type:"reasoning",text:"",providerMetadata:e.providerMetadata,state:"streaming"};r.activeReasoningParts[e.id]=t,r.message.parts.push(t),l();break}case"reasoning-delta":{let t=r.activeReasoningParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(d=e.providerMetadata)?d:t.providerMetadata,l();break}case"reasoning-end":{let t=r.activeReasoningParts[e.id];t.providerMetadata=null!=(p=e.providerMetadata)?p:t.providerMetadata,t.state="done",delete r.activeReasoningParts[e.id],l();break}case"file":r.message.parts.push({type:"file",mediaType:e.mediaType,url:e.url}),l();break;case"source-url":r.message.parts.push({type:"source-url",sourceId:e.sourceId,url:e.url,title:e.title,providerMetadata:e.providerMetadata}),l();break;case"source-document":r.message.parts.push({type:"source-document",sourceId:e.sourceId,mediaType:e.mediaType,title:e.title,filename:e.filename,providerMetadata:e.providerMetadata}),l();break;case"tool-input-start":{let t=r.message.parts.filter(ns);r.partialToolCalls[e.toolCallId]={text:"",toolName:e.toolName,index:t.length,dynamic:e.dynamic,title:e.title},e.dynamic?f({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted,title:e.title}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted,title:e.title}),l();break}case"tool-input-delta":{let t=r.partialToolCalls[e.toolCallId];t.text+=e.inputTextDelta;let{value:a}=await r1(t.text);t.dynamic?f({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:a,title:t.title}):h({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:a,title:t.title}),l();break}case"tool-input-available":e.dynamic?f({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:e.title}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:e.title}),l(),s&&!e.providerExecuted&&await s({toolCall:e});break;case"tool-input-error":e.dynamic?f({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}):h({toolCallId:e.toolCallId,toolName:e.toolName,state:"output-error",input:void 0,rawInput:e.input,errorText:e.errorText,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),l();break;case"tool-approval-request":{let t=m(e.toolCallId);t.state="approval-requested",t.approval={id:e.approvalId},l();break}case"tool-output-denied":m(e.toolCallId).state="output-denied",l();break;case"tool-output-available":{let t=m(e.toolCallId);"dynamic-tool"===t.type?f({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-available",input:t.input,output:e.output,preliminary:e.preliminary,providerExecuted:e.providerExecuted,title:t.title}):h({toolCallId:e.toolCallId,toolName:nl(t),state:"output-available",input:t.input,output:e.output,providerExecuted:e.providerExecuted,preliminary:e.preliminary,title:t.title}),l();break}case"tool-output-error":{let t=m(e.toolCallId);"dynamic-tool"===t.type?f({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-error",input:t.input,errorText:e.errorText,providerExecuted:e.providerExecuted,title:t.title}):h({toolCallId:e.toolCallId,toolName:nl(t),state:"output-error",input:t.input,rawInput:t.rawInput,errorText:e.errorText,providerExecuted:e.providerExecuted,title:t.title}),l();break}case"start-step":r.message.parts.push({type:"step-start"});break;case"finish-step":r.activeTextParts={},r.activeReasoningParts={};break;case"start":null!=e.messageId&&(r.message.id=e.messageId),await v(e.messageMetadata),(null!=e.messageId||null!=e.messageMetadata)&&l();break;case"finish":null!=e.finishReason&&(r.finishReason=e.finishReason),await v(e.messageMetadata),null!=e.messageMetadata&&l();break;case"message-metadata":await v(e.messageMetadata),null!=e.messageMetadata&&l();break;case"error":null==n||n(Error(e.errorText));break;default:if(e.type.startsWith("data-")){if((null==a?void 0:a[e.type])!=null&&await aw({value:e.data,schema:a[e.type]}),e.transient){null==i||i(e);break}let t=null!=e.id?r.message.parts.find(t=>e.type===t.type&&e.id===t.id):void 0;null!=t?t.data=e.data:r.message.parts.push(e),null==i||i(e),l()}}o.enqueue(e)})}}))}({stream:s,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:e=>this.jobExecutor.run(()=>e({state:i.state,write:()=>{var e;this.setStatus({status:"streaming"}),i.state.message.id===(null==(e=this.lastMessage)?void 0:e.id)?this.state.replaceMessage(this.state.messages.length-1,i.state.message):this.state.pushMessage(i.state.message)}})),onError:e=>{throw e}}),onError:e=>{throw e}}),this.setStatus({status:"ready"})}catch(e){if(c||"AbortError"===e.name)return c=!0,this.setStatus({status:"ready"}),null;p=!0,e instanceof TypeError&&(e.message.toLowerCase().includes("fetch")||e.message.toLowerCase().includes("network"))&&(d=!0),this.onError&&e instanceof Error&&this.onError(e),this.setStatus({status:"error",error:e})}finally{try{null==(i=this.onFinish)||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:c,isDisconnect:d,isError:p,finishReason:null==(s=this.activeResponse)?void 0:s.state.finishReason})}catch(e){console.error(e)}this.activeResponse=void 0}(null==(o=this.sendAutomaticallyWhen)?void 0:o.call(this,{messages:this.state.messages}))&&!p&&await this.makeRequest({trigger:"submit-message",messageId:null==(l=this.lastMessage)?void 0:l.id,metadata:t,headers:a,body:r})}};function nE({messages:e}){let t=e[e.length-1];if(!t||"assistant"!==t.role)return!1;let a=t.parts.reduce((e,t,a)=>"step-start"===t.type?a:e,-1),r=t.parts.slice(a+1).filter(no).filter(e=>!e.providerExecuted);return r.length>0&&r.every(e=>"output-available"===e.state||"output-error"===e.state)}et.default;var nC=class{constructor(e){this.statusRef=(0,V.ref)("ready"),this.errorRef=(0,V.ref)(void 0),this.pushMessage=e=>{this.messagesRef.value=[...this.messagesRef.value,e]},this.popMessage=()=>{this.messagesRef.value=this.messagesRef.value.slice(0,-1)},this.replaceMessage=(e,t)=>{this.messagesRef.value[e]={...t}},this.snapshot=e=>e,this.messagesRef=(0,V.ref)(null!=e?e:[])}get messages(){return this.messagesRef.value}set messages(e){this.messagesRef.value=e}get status(){return this.statusRef.value}set status(e){this.statusRef.value=e}get error(){return this.errorRef.value}set error(e){this.errorRef.value=e}},nS=class extends nw{constructor({messages:e,...t}){super({...t,state:new nC(e)})}},nI=(et.default,a(4081)),nT=a(6281),nA=a(66832),nN=a(87992);let nB={safeFn:function(e,t){let a=e=>({success:!1,error:t?.(e)??null});return(...t)=>{try{let r=e(...t);if(r instanceof Promise)return r.catch(a);return r}catch(e){return a(e)}}},fromUnsafe:function(e,t){let a=e=>({success:!1,error:t?.(e)??null}),r=e=>({success:!0,data:e});try{let t=e();if(t instanceof Promise)return t.then(r).catch(a);return r(t)}catch(e){return a(e)}}};var nO=a(71224);function nj(e,t){return{code:e,detail:t}}let nR=nO.Ay$.object({id:nO.Ay$.string(),title:nO.Ay$.string(),namespace:nO.Ay$.string(),currentVersion:nO.Ay$.string(),logoUrl:nO.Ay$.url().nullable(),slug:nO.Ay$.string()});var nP=a(27877),n$=a(6292),nM=a(61746),nV=a(86941),nZ=a(79944),nD=a(15720);function nL(e){return Object.fromEntries(Object.entries(e.workspace.documents).map(([t,a])=>{var r;let n=(0,nM.V)(a.servers,{documentUrl:a?.["x-scalar-original-source-url"]});return[t,{activeServer:(0,n$.rd)(a,n),securitySchemes:(r=e.auth,Object.values((0,nP.p2)(a?.components?.securitySchemes,{},r,t)))}]}))}let nU=(0,nV.Ar)(),nF=()=>{let e=e=>`${nV.n_.AUTH}-${e}`;return{getAuth:t=>{let a=JSON.parse(nU.getItem(e(t))??"{}");return(0,nD.v)(nZ.wF,a)},setAuth:(t,a)=>{nU.setItem(e(t),JSON.stringify(a))}}},nz=({documentName:e,workspaceStore:t})=>{let a=nF().getAuth(e);t.auth.load({[e]:a})};function nq(e){try{if(e.startsWith("/")||e.startsWith("http://localhost"))return e;let t=new URLSearchParams({scalar_url:e});return new URL(`https://proxy.scalar.com/?${t}`).toString()}catch{return console.error(`Invalid URL provided: ${e}`),e}}function nW({getAccessToken:e,getAgentKey:t}){let a=e?.(),r=t?.();return{...a&&{Authorization:`Bearer ${a}`},...r&&{"x-scalar-agent-key":r}}}var nJ=a(92289),nK=a(69637);let nH=e=>{let t=nG(e,0);if(void 0===t||!nX(e[t]))return;let a=nG(e,t+1);if(void 0!==a)return nQ(e,t,a)},nG=(e,t)=>{for(let a=t;a<e.length;a+=1)if(!nY(e[a]))return a},nY=e=>" "===e||"	"===e||"\n"===e||"\r"===e,nX=e=>"{"===e||"["===e,nQ=(e,t,a)=>{let r;for(let n=a-1;n>t;n-=1){let t=e[n];if("\r"===t)return;if("\n"===t)return n0(r);if(void 0===r)r=t;else{if(r[0]!==t)return;r+=t}}},n0=e=>void 0===e?0:" "===e[0]?e.length:e,n1=(e,t)=>{let a=n3(e,"toPrecision",t,t);return void 0===a?n3(e,"toExponential",t,t):a},n3=(e,t,a,r)=>{let n=e[t](r).replace(n6,"$1").replace(n2,"$1");return n.length<=a?n:1===r?void 0:n3(e,t,a,r-1)},n6=/(e)\+/iu,n2=/\.?0*($|e)/iu,n5=(e,t)=>{if("string"!=typeof e)throw TypeError(`Input must be a JSON string: ${e}`);n4(t)},n4=e=>{if(n7(e),e<0)throw TypeError(`"maxSize" argument must be positive: ${e}`);if(e<n9)throw TypeError(`"maxSize" argument must be at least ${n9}: ${e}`)},n7=e=>{if(void 0===e)throw TypeError('"maxSize" argument must be defined');if(!Number.isInteger(e))throw TypeError(`"maxSize" argument must be an integer: ${e}`)},n9=7,n8=(e,t,a)=>{let r=si(t,a);return se(e,t,r)},se=(e,t,a)=>{if(a>=t)return a;let r=e[a];return r>=sd&&r<=sp?se(e,t,a+1):a},st=(e,t,a)=>void 0===a?a:sa(e,si(t,a)),sa=(e,t)=>sr(e,t)?t-3:sn(e,t)?t-2:ss(e,t)?t-1:t,sr=(e,t)=>t>=3&&e[t-3]>=so&&e[t-3]<=sl,sn=(e,t)=>t>=2&&e[t-2]>=su,ss=(e,t)=>t>=1&&e[t-1]>=sc,si=(e,t)=>t<0||Object.is(t,-0)?Math.max(e+t,0):t,so=240,sl=244,su=224,sc=194,sd=128,sp=191,sm=(e,t,a)=>{let r=globalThis.Buffer.from(e),n=n8(r,r.length,t),s=st(r,r.length,a);return 0===n&&s>=r.length?r.toString():r.toString("utf8",n,s)},sh=/[\uD800-\uDFFF]/gu,sf=e=>sv(e)?e.replace(sh,""):e,sv=e=>{for(let t=0;t<e.length;t+=1){let a=e.codePointAt(t);if(a>=55296&&a<=57343)return!0}return!1},sg=({input:e,targetByteCount:t,firstStartSurrogate:a,lastStartSurrogate:r,firstEndSurrogate:n,lastEndSurrogate:s,increment:i,canBacktrack:o,shift:l,charIndexInit:u})=>{let c=u,d=c,p=0;for(;p<t;c+=i){d=c;let t=e.charCodeAt(c);if(Number.isNaN(t))break;if(t<=127){p+=1;continue}if(t<=2047){p+=2;continue}if(p+=3,t<a||t>r)continue;let o=e.charCodeAt(c+i);Number.isNaN(o)||o<n||o>s||(p+=1,c+=i)}return(o&&p>t?d:c)+l},sy=(e,t,a)=>t<0||Object.is(t,-0)?s_(e,t,a):sb(e,t,a),sb=(e,t,a)=>sg({input:e,targetByteCount:t,firstStartSurrogate:55296,lastStartSurrogate:56319,firstEndSurrogate:56320,lastEndSurrogate:57343,increment:1,canBacktrack:a,shift:0,charIndexInit:0}),s_=(e,t,a)=>sg({input:e,targetByteCount:-t,firstStartSurrogate:56320,lastStartSurrogate:57343,firstEndSurrogate:55296,lastEndSurrogate:56319,increment:-1,canBacktrack:!a,shift:1,charIndexInit:e.length-1}),sk=(e,t,a)=>{let r=sy(e,t,!1),n=sx(e,a);return sf(0===r&&void 0===n?e:e.slice(r,n))},sx=(e,t)=>{if(void 0===t)return t;let a=sy(e,t,!0);return a===e.length?void 0:a},sw=(e,t,a)=>{let{textEncoder:r,textDecoder:n}=sE(),s=sC(e),{written:i}=r.encodeInto(e,s),o=n8(s,i,t),l=st(s,i,a),u=void 0===l?i:Math.min(l,i),c=s.subarray(o,u);return n.decode(c)},sE=()=>(void 0===n&&(n=new globalThis.TextEncoder,s=new globalThis.TextDecoder("utf8",{fatal:!1})),{textEncoder:n,textDecoder:s}),sC=e=>{let t=3*e.length;return t>sS?new Uint8Array(t):((void 0===i||i.length<t)&&(i=new Uint8Array(t)),i)},sS=1e5,sI=(e,t)=>{if(void 0===t)return t;let a=sT(e,t);return a>=e.length*sA?void 0:a},sT=(e,t)=>t<=-(e.length*sA)?0:t,sA=4,sN=(e,t,a)=>{if("string"!=typeof e)throw TypeError(`First argument must be a string: ${e}`);sB(t),sO(a)},sB=e=>{if(void 0===e)throw TypeError("Second argument is required.");sj("Second",e)},sO=e=>{void 0!==e&&sj("Third",e)},sj=(e,t)=>{if(!Number.isInteger(t))throw TypeError(`${e} argument must be an integer: ${t}`)},sR=e=>{let t=!0,a=0;for(let r=0;r<s$;r+=1){let n=sP(e,r);!(n<=127)&&(t&&(t=!1),n>2047&&(a+=1))}return{asciiOnly:t,longCharsPercentage:a/s$}},sP=(e,t)=>{let a=s$-1,r=Math.round((1-(a-t)/a)*(e.length-1));return e.charCodeAt(r)},s$=50,sM=(e,t,a)=>{if(sN(e,t,a),""===e)return e;let r=sT(e,t),n=sI(e,a);return void 0===n&&Object.is(r,0)?sf(e):sV(e,r,n)},sV=(e,t,a)=>{if(e.length<=sZ)return sk(e,t,a);let{asciiOnly:r,longCharsPercentage:n}=sR(e);return r?sL(e,t,a):n>=sD?sk(e,t,a):sU(e,t,a)},sZ=200,sD=.4,sL=(e,t,a)=>"Buffer"in globalThis&&"from"in globalThis.Buffer?sm(e,t,a):sU(e,t,a),sU=(e,t,a)=>"TextEncoder"in globalThis?sw(e,t,a):sk(e,t,a),sF=(e,t)=>{let a=sz(sM(sW(JSON.stringify(e)),0,t-sH.length-2*sK.length));return sJ(`${a}${sH}`)},sz=e=>e.replace(sq,""),sq=/(\\|\\u[0-9a-fA-F]{0,3})$/u,sW=e=>e.slice(sK.length,-sK.length),sJ=e=>`${sK}${e}${sK}`,sK='"',sH="...",sG=e=>{let t=e.length,a=t;for(let r=0;r<t;r+=1){let t=e.charCodeAt(r);if(t<=sY)continue;if(t<=sX){a+=1;continue}if(a+=2,t<sQ||t>s0)continue;let n=e.charCodeAt(r+1);n<s1||n>s3||(r+=1)}return a},sY=127,sX=2047,sQ=55296,s0=56319,s1=56320,s3=57343,s6=e=>{let t=3*e.length;return t>s2?new Uint8Array(t):((void 0===o||o.length<t)&&(o=new Uint8Array(t)),o)},s2=1e5,s5="Buffer"in globalThis&&"byteLength"in globalThis.Buffer?e=>globalThis.Buffer.byteLength(e):"TextEncoder"in globalThis?((e,t)=>t.length<100?sG(t):e(t)).bind(void 0,((e,t)=>{let a=s6(t);return e.encodeInto(t,a).written}).bind(void 0,new TextEncoder)):sG,s4=e=>{if(null===e)return s7;if(!0===e)return s9;if(!1===e)return s8;let t=typeof e;return"object"===t?ie:"number"===t?JSON.stringify(e).length:it(e)},s7=4,s9=4,s8=5,ie=2,it=e=>s5(JSON.stringify(e)),ia=({size:e,increment:t,maxSize:a,truncatedProps:r,path:n,value:s})=>{let i=e+t,o=i>a;return o?{size:e,stop:o,truncatedProps:[...r,{path:n,value:s}]}:{size:i,stop:o,truncatedProps:r}},ir=e=>s4(e),is=(e,t,a)=>il({empty:e,indent:t,depth:a,keySpaceSize:0})+ic(e),ii=({key:e,empty:t,indent:a,depth:r})=>il({empty:t,indent:a,depth:r,keySpaceSize:1})+it(e)+io+ic(t),io=1,il=({empty:e,indent:t,depth:a,keySpaceSize:r})=>void 0===t?0:r+(iu+t*(a+1))+(e?iu+t*a:0),iu=1,ic=e=>e?0:id,id=1,ip=({parent:e,truncatedProps:t,path:a,increment:r,maxSize:n,key:s,empty:i,size:o,truncateValue:l,indent:u,depth:c})=>{let d=e[s],p=[...a,s],{size:m,stop:h,truncatedProps:f}=ia({size:o,increment:r,maxSize:n,truncatedProps:t,path:p,value:d});return h?{empty:i,size:m,truncatedProps:f}:im({value:d,truncatedProps:t,path:p,maxSize:n,empty:i,size:o,newSize:m,truncateValue:l,indent:u,depth:c})},im=({value:e,truncatedProps:t,path:a,maxSize:r,empty:n,size:s,newSize:i,truncateValue:o,indent:l,depth:u})=>{let{value:c,size:d,truncatedProps:p}=o({value:e,truncatedProps:t,path:a,size:i,maxSize:r,indent:l,depth:u+1});return void 0===c?{empty:n,size:s,truncatedProps:p}:{empty:!1,size:d,value:c,truncatedProps:p}},ih=({array:e,truncatedProps:t,path:a,size:r,maxSize:n,truncateValue:s,indent:i,depth:o})=>{let l=[],u={empty:!0,size:r,truncatedProps:t};for(let t=0;t<e.length;t+=1){let r=is(u.empty,i,o);void 0!==(u=ip({parent:e,truncatedProps:u.truncatedProps,path:a,increment:r,maxSize:n,key:t,empty:u.empty,size:u.size,truncateValue:s,indent:i,depth:o})).value&&l.push(u.value)}return{value:l,size:u.size,truncatedProps:u.truncatedProps}},iv=({object:e,truncatedProps:t,path:a,size:r,maxSize:n,truncateValue:s,indent:i,depth:o})=>{let l={},u={empty:!0,size:r,truncatedProps:t};for(let t in e){let r=ii({key:t,empty:u.empty,indent:i,depth:o});void 0!==(u=ip({parent:e,truncatedProps:u.truncatedProps,path:a,increment:r,maxSize:n,key:t,empty:u.empty,size:u.size,truncateValue:s,indent:i,depth:o})).value&&(l[t]=u.value)}return{value:l,size:u.size,truncatedProps:u.truncatedProps}},ig=({value:e,truncatedProps:t,path:a,size:r,maxSize:n,indent:s,depth:i})=>{let{size:o,stop:l,truncatedProps:u}=ia({size:r,increment:ir(e),maxSize:n,truncatedProps:t,path:a,value:e});return l?{value:void 0,size:o,truncatedProps:u}:iy({value:e,truncatedProps:u,path:a,size:o,maxSize:n,indent:s,depth:i})},iy=({value:e,truncatedProps:t,path:a,size:r,maxSize:n,indent:s,depth:i})=>"object"!=typeof e||null===e?{value:e,size:r,truncatedProps:t}:Array.isArray(e)?ih({array:e,truncatedProps:t,path:a,size:r,maxSize:n,truncateValue:ig,indent:s,depth:i}):iv({object:e,truncatedProps:t,path:a,size:r,maxSize:n,truncateValue:ig,indent:s,depth:i}),ib=(e,t)=>{n5(e,t);let a=i_(e),r=ik(e),{value:n,truncatedProps:s}=ig({value:r,truncatedProps:[],path:[],size:0,maxSize:t,indent:a,depth:0});return{jsonString:ix({newValue:n,value:r,maxSize:t,indent:a}),truncatedProps:s}},i_=e=>{let t=nH(e);return"string"==typeof t?t.length:t},ik=e=>{try{return JSON.parse(e)}catch(t){throw TypeError(`Invalid JSON string: "${e}"
${t.message}`)}},ix=({newValue:e,value:t,maxSize:a,indent:r})=>void 0!==e?JSON.stringify(e,void 0,r):"number"==typeof t?n1(t,a):sF(t,a);function iw(e,t){return`${e}/${t}`}let iE="execute-request";eI.object({method:eI.string(),path:eI.string(),headers:eI.record(eI.string(),eI.string()).optional(),body:eI.string().optional(),documentIdentifier:eI.string()});let iC=nB.safeFn(async e=>"application/json"===e.headers.get("content-type")?{success:!0,data:await e.json()}:{success:!0,data:await e.text()},e=>nj("FAILED_TO_PARSE_RESPONSE_BODY",{originalError:e})),iS=e=>JSON.parse(ib(JSON.stringify(e),5e4).jsonString),iI=nB.safeFn(async(e,t)=>{let a=await fetch(e,t),r=await iC(a);return a.ok?r.success?{success:!0,data:{status:a.status,responseBody:iS(r.data),headers:Object.fromEntries(a.headers.entries())}}:r:{success:!1,error:nj("REQUEST_NOT_OK",{status:a.status,url:a.url,responseBody:iS(r.success?r.data:void 0),headers:Object.fromEntries(a.headers.entries())})}},e=>nj("FAILED_TO_FETCH",{originalError:e})),iT=nB.safeFn(async({documentSettings:e,toolCallId:t,chat:a,input:{method:r,path:n,body:s,headers:i,documentIdentifier:o}})=>{let[l,u]=o.split("---");if(!l||!u)return{success:!1,error:nj("FAILED_TO_DETERMINE_DOCUMENT",{namespace:l,slug:u,documentIdentifier:o})};let c=iw(l,u),d=e[c];if(!d)return{success:!1,error:nj("DOCUMENT_SETTINGS_COULD_NOT_BE_DETERMINED",{documentName:c,namespace:l,slug:u})};let p=(0,nJ.Ag)(d.securitySchemes),m={method:r,body:s,...p,headers:{...i,...p.headers}},h=function({path:e,activeServer:t}){let a=(0,nJ._2)({path:e,server:t,pathVariables:{},environment:{color:"",variables:[]}});return(0,nK.m)("https://proxy.scalar.com",a)}({path:n,activeServer:d.activeServer}),f=await iI(h,m);return a.addToolOutput({tool:iE,toolCallId:t,output:f,state:"output-available"}),f},e=>nj("FAILED_TO_EXECUTE_REQUEST",e)),iA="scalar/agent-terms-accepted";var iN=a(88108);let iB=({debounceDelay:e=500,maxWait:t=1e4,persistAuth:a=!1})=>{let{execute:r}=(0,iN.s)({delay:e,maxWait:t}),n=nF(),s=()=>"function"==typeof a?a():a;return{hooks:{onWorkspaceStateChanges(e){s()&&"auth"===e.type&&r("auth",()=>n.setAuth(e.documentName,e.value))}}}};var iO=a(81375),ij=a(85255);let iR=nB.safeFn(async({namespace:e,slug:t,workspaceStore:a,registryDocuments:r,registryUrl:n,config:s,api:i,removable:o})=>{let l=await i.getDocument({namespace:e,slug:t});if(!l.success)return l;r.value.push({...l.data,removable:o});let u=new URL(`/@${e}/apis/${t}/latest`,n),c=await (0,iO.l)(u.toString(),{plugins:[(0,ij.Z6)()],treeShake:!1}),d=iw(e,t);return await a.addDocument({name:d,document:c},s),a.update("x-scalar-active-document",d),nz({documentName:d,workspaceStore:a}),{success:!0,data:l.data}},e=>nj("UNABLE_TO_LOAD_DOCUMENT",e)),iP=Symbol("STATE_SYMBOL"),{toast:i$}=(0,D.Yf)();function iM(){let e=(0,V.inject)(iP);if(!e)throw Error("No state provided.");return e}var iV=a(98907),iZ=a(31599);let iD=iV.$constructor("ZodMiniType",(e,t)=>{if(!e._zod)throw Error("Uninitialized schema in ZodMiniType.");iV.$ZodType.init(e,t),e.def=t,e.type=t.type,e.parse=(t,a)=>iV.parse(e,t,a,{callee:e.parse}),e.safeParse=(t,a)=>iV.safeParse(e,t,a),e.parseAsync=async(t,a)=>iV.parseAsync(e,t,a,{callee:e.parseAsync}),e.safeParseAsync=async(t,a)=>iV.safeParseAsync(e,t,a),e.check=(...a)=>e.clone({...t,checks:[...t.checks??[],...a.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]},{parent:!0}),e.with=e.check,e.clone=(t,a)=>iV.clone(e,t,a),e.brand=()=>e,e.register=(t,a)=>(t.add(e,a),e),e.apply=t=>t(e)}),iL=iV.$constructor("ZodMiniString",(e,t)=>{iV.$ZodString.init(e,t),iD.init(e,t)});function iU(e){return iV._string(iL,e)}let iF=iV.$constructor("ZodMiniStringFormat",(e,t)=>{iV.$ZodStringFormat.init(e,t),iL.init(e,t)}),iz=((e,t)=>{iV.$ZodEmail.init(e,t),iF.init(e,t)},iV.$constructor("ZodMiniNumber",(e,t)=>{iV.$ZodNumber.init(e,t),iD.init(e,t)})),iq=iV.$constructor("ZodMiniBigInt",(e,t)=>{iV.$ZodBigInt.init(e,t),iD.init(e,t)});(e,t)=>{iV.$ZodBigIntFormat.init(e,t),iq.init(e,t)},(e,t)=>{iV.$ZodUnknown.init(e,t),iD.init(e,t)};(e,t)=>{iV.$ZodArray.init(e,t),iD.init(e,t)};let iW=iV.$constructor("ZodMiniObject",(e,t)=>{iV.$ZodObject.init(e,t),iD.init(e,t),iZ.defineLazy(e,"shape",()=>t.shape)});function iJ(e,t){return new iW({type:"object",shape:e??{},...iZ.normalizeParams(t)})}let iK=iV.$constructor("ZodMiniUnion",(e,t)=>{iV.$ZodUnion.init(e,t),iD.init(e,t)}),iH=((e,t)=>{iK.init(e,t),iV.$ZodXor.init(e,t)},iV.$constructor("ZodMiniOptional",(e,t)=>{iV.$ZodOptional.init(e,t),iD.init(e,t)})),iG=iV.$constructor("ZodMiniPipe",(e,t)=>{iV.$ZodPipe.init(e,t),iD.init(e,t)});iV.describe,iV.meta,a(76955),a(47358),(e,t)=>{iV.$ZodISODuration.init(e,t),iF.init(e,t)};let iY="scalar-tmp-doc",iX="ask-for-authentication";eI.object({uniqueIdentifier:eI.string()}),eI.object({question:eI.string()});var iQ=a(19919);let i0=(e,t)=>{let a=e.__vccOpts||e;for(let[e,r]of t)a[e]=r;return a},i1={class:"authenticationProvided"},i3=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",i1,[...t[0]||(t[0]=[(0,V.createStaticVNode)('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-e3416cd5><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-e3416cd5></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-e3416cd5></rect><g clip-path="url(#clip0_74_840)" data-v-e3416cd5><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="currentColor" data-v-e3416cd5></path></g><defs data-v-e3416cd5><clipPath id="clip0_74_840" data-v-e3416cd5><rect height="8" rx="4" width="8" x="4" y="4" data-v-e3416cd5></rect></clipPath></defs></svg> Authorized ',2)])])}],["__scopeId","data-v-e3416cd5"]]),i6={class:"authenticationRequired"},i2=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",i6,[...t[0]||(t[0]=[(0,V.createStaticVNode)('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-d15ef40b><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-d15ef40b></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.5" width="14.25" x="0.875" y="0.875" data-v-d15ef40b></rect><g clip-path="url(#clip0_74_585)" data-v-d15ef40b><path d="M10.75 5.5V10.5C10.75 10.6326 10.6973 10.7598 10.6036 10.8536C10.5098 10.9473 10.3826 11 10.25 11H9C8.86739 11 8.74021 10.9473 8.64645 10.8536C8.55268 10.7598 8.5 10.6326 8.5 10.5V5.5C8.5 5.36739 8.55268 5.24021 8.64645 5.14645C8.74021 5.05268 8.86739 5 9 5H10.25C10.3826 5 10.5098 5.05268 10.6036 5.14645C10.6973 5.24021 10.75 5.36739 10.75 5.5ZM7 5H5.75C5.61739 5 5.49021 5.05268 5.39645 5.14645C5.30268 5.24021 5.25 5.36739 5.25 5.5V10.5C5.25 10.6326 5.30268 10.7598 5.39645 10.8536C5.49021 10.9473 5.61739 11 5.75 11H7C7.13261 11 7.25979 10.9473 7.35355 10.8536C7.44732 10.7598 7.5 10.6326 7.5 10.5V5.5C7.5 5.36739 7.44732 5.24021 7.35355 5.14645C7.25979 5.05268 7.13261 5 7 5Z" fill="currentColor" data-v-d15ef40b></path></g><defs data-v-d15ef40b><clipPath id="clip0_74_585" data-v-d15ef40b><rect height="8" rx="4" width="8" x="4" y="4" data-v-d15ef40b></rect></clipPath></defs></svg> Authentication required ',2)])])}],["__scopeId","data-v-d15ef40b"]]);var i5=a(52919);let i4=(0,V.defineComponent)({__name:"Auth",props:{options:{},name:{},authStore:{},document:{},eventBus:{},selectedServer:{},environment:{}},setup(e){let{workspaceStore:t}=iM(),a=(0,V.computed)(()=>(0,n$.Pb)(e.document?.security)),r=(0,V.computed)(()=>(0,n$.Yr)(e.authStore.getAuthSelectedSchemas({type:"document",documentName:e.name}),void 0,a.value)),n=(0,V.shallowRef)(),{focused:s}=(0,i5.RbW)(n),i=(0,V.computed)(()=>(0,nP.p2)(e.document?.components?.securitySchemes??{},e.options.authentication?.securitySchemes,e.authStore,e.name));return(0,V.watch)(s,a=>{a&&t.update("x-scalar-active-document",e.name)}),(t,s)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{ref_key:"focusRef",ref:n,tabindex:"0"},[Object.keys(i.value).length?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nP.at),{key:0,authStore:e.authStore,documentSlug:e.name,environment:e.environment,eventBus:e.eventBus,isReadOnly:"",isStatic:"",layout:"reference",meta:{type:"document"},persistAuth:e.options.persistAuth,proxyUrl:e.options.proxyUrl??"",securityRequirements:a.value,securitySchemes:i.value,selectedSecurity:r.value,server:e.selectedServer,title:"Authentication"},null,8,["authStore","documentSlug","environment","eventBus","persistAuth","proxyUrl","securityRequirements","securitySchemes","selectedSecurity","server"])):(0,V.createCommentVNode)("",!0)],512))}}),i7={class:"toggleButton"},i9={class:"authContent"},i8={class:"authContentInner"},oe=i0((0,V.defineComponent)({__name:"AskForAuthentication",props:{messagePart:{}},setup(e){let{workspaceStore:t,eventBus:a,config:r,chat:n}=iM(),s=(0,V.computed)(()=>{if(!e.messagePart.value.input?.uniqueIdentifier||"input-available"!==e.messagePart.value.state)return;let[t,a]=e.messagePart.value.input.uniqueIdentifier.split("---");if(!(!t||!a))return iw(t,a)}),i=(0,V.computed)(()=>{if(s.value)return t.workspace.documents[s.value]}),o=(0,V.computed)(()=>{if(i.value)return(0,nM.O)(t,i.value)}),l=(0,V.computed)(()=>{if(!i.value)return;let e=(0,nM.V)(i.value.servers,{documentUrl:i.value["x-scalar-original-source-url"]});return(0,n$.rd)(i.value,e)}),u=(0,V.computed)(()=>s.value&&o.value&&l.value);async function c(){await n.addToolOutput({toolCallId:e.messagePart.value.toolCallId,output:"Authentication provided.",tool:iX,state:"output-available"})}return(n,d)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{class:(0,V.normalizeClass)(["askForAuthentication",{open:u.value}])},[(0,V.createElementVNode)("div",i7,["output-available"===e.messagePart.value.state?((0,V.openBlock)(),(0,V.createBlock)(i3,{key:0})):(0,V.createCommentVNode)("",!0),"input-available"===e.messagePart.value.state?((0,V.openBlock)(),(0,V.createBlock)(i2,{key:1})):(0,V.createCommentVNode)("",!0),"input-available"===e.messagePart.value.state?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.RO),{key:2,class:"authorizeButton",size:"xs",onClick:c},{default:(0,V.withCtx)(()=>[d[0]||(d[0]=(0,V.createTextVNode)(" Authorize ",-1)),(0,V.createVNode)((0,V.unref)(iQ.tSc),{weight:"bold"})]),_:1})):(0,V.createCommentVNode)("",!0)]),(0,V.createElementVNode)("div",i9,[(0,V.createElementVNode)("div",i8,[s.value&&i.value&&o.value&&l.value?((0,V.openBlock)(),(0,V.createBlock)(i4,{key:0,authStore:(0,V.unref)(t).auth,document:i.value,environment:o.value,eventBus:(0,V.unref)(a),name:s.value,options:(0,V.unref)(r),selectedServer:l.value},null,8,["authStore","document","environment","eventBus","name","options","selectedServer"])):(0,V.createCommentVNode)("",!0)])])],2))}}),[["__scopeId","data-v-169d0bc0"]]),ot={class:"autosendPaused"},oa=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",ot,[...t[0]||(t[0]=[(0,V.createStaticVNode)('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-d08225db><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-d08225db></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.5" width="14.25" x="0.875" y="0.875" data-v-d08225db></rect><g clip-path="url(#clip0_74_585)" data-v-d08225db><path d="M10.75 5.5V10.5C10.75 10.6326 10.6973 10.7598 10.6036 10.8536C10.5098 10.9473 10.3826 11 10.25 11H9C8.86739 11 8.74021 10.9473 8.64645 10.8536C8.55268 10.7598 8.5 10.6326 8.5 10.5V5.5C8.5 5.36739 8.55268 5.24021 8.64645 5.14645C8.74021 5.05268 8.86739 5 9 5H10.25C10.3826 5 10.5098 5.05268 10.6036 5.14645C10.6973 5.24021 10.75 5.36739 10.75 5.5ZM7 5H5.75C5.61739 5 5.49021 5.05268 5.39645 5.14645C5.30268 5.24021 5.25 5.36739 5.25 5.5V10.5C5.25 10.6326 5.30268 10.7598 5.39645 10.8536C5.49021 10.9473 5.61739 11 5.75 11H7C7.13261 11 7.25979 10.9473 7.35355 10.8536C7.44732 10.7598 7.5 10.6326 7.5 10.5V5.5C7.5 5.36739 7.44732 5.24021 7.35355 5.14645C7.25979 5.05268 7.13261 5 7 5Z" fill="currentColor" data-v-d08225db></path></g><defs data-v-d08225db><clipPath id="clip0_74_585" data-v-d08225db><rect height="8" rx="4" width="8" x="4" y="4" data-v-d08225db></rect></clipPath></defs></svg> Accept Request to Continue ',2)])])}],["__scopeId","data-v-d08225db"]]),or={class:"requestApproved"},on=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",or,[...t[0]||(t[0]=[(0,V.createStaticVNode)('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-bb311586><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-bb311586></rect><rect height="14.25" rx="7.125" stroke="var(--scalar-color-green)" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-bb311586></rect><g clip-path="url(#clip0_74_840)" data-v-bb311586><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="var(--scalar-color-green)" data-v-bb311586></path></g><defs data-v-bb311586><clipPath id="clip0_74_840" data-v-bb311586><rect height="8" rx="4" width="8" x="4" y="4" data-v-bb311586></rect></clipPath></defs></svg> Request Approved ',2)])])}],["__scopeId","data-v-bb311586"]]),os={class:"requestFailed"},oi=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",os,[...t[0]||(t[0]=[(0,V.createElementVNode)("i",{class:"requestFailedIcon"},[(0,V.createElementVNode)("svg",{fill:"currentColor",height:"100%",viewBox:"0 0 256 256",width:"100%",xmlns:"http://www.w3.org/2000/svg"},[(0,V.createElementVNode)("path",{d:"M216,48V208a16,16,0,0,1-16,16H160a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h40A16,16,0,0,1,216,48ZM96,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V48A16,16,0,0,0,96,32Z"})])],-1),(0,V.createTextVNode)(" Request Failed ",-1)])])}],["__scopeId","data-v-bc27e533"]]),oo={class:"requestRejected"},ol=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",oo,[...t[0]||(t[0]=[(0,V.createElementVNode)("svg",{fill:"currentColor",height:"16",viewBox:"0 0 256 256",width:"16",xmlns:"http://www.w3.org/2000/svg"},[(0,V.createElementVNode)("path",{d:"M56.88,31.93A12,12,0,1,0,39.12,48.07l7.81,8.59A108,108,0,0,0,31.85,177.23L21,209.66A20,20,0,0,0,46.34,235l32.43-10.81a108.08,108.08,0,0,0,112.55-8.66l7.8,8.58a12,12,0,0,0,17.76-16.14ZM128,212a83.91,83.91,0,0,1-42-11.27,12,12,0,0,0-9.82-1l-29.79,9.93,9.93-29.79a12,12,0,0,0-1-9.82,84,84,0,0,1,7.94-95.49l111.84,123A83.83,83.83,0,0,1,128,212Zm108-84a107.22,107.22,0,0,1-8.65,42.4A12,12,0,0,1,205.28,161a84.07,84.07,0,0,0-102.77-113,12,12,0,0,1-7.27-22.87A108.08,108.08,0,0,1,236,128Z"})],-1),(0,V.createTextVNode)(" Request Rejected ",-1)])])}],["__scopeId","data-v-9803a54c"]]),ou={class:"requestSuccess"},oc=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",ou,[...t[0]||(t[0]=[(0,V.createStaticVNode)('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-acc2c0d8><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-acc2c0d8></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-acc2c0d8></rect><g clip-path="url(#clip0_74_840)" data-v-acc2c0d8><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="currentColor" data-v-acc2c0d8></path></g><defs data-v-acc2c0d8><clipPath id="clip0_74_840" data-v-acc2c0d8><rect height="8" rx="4" width="8" x="4" y="4" data-v-acc2c0d8></rect></clipPath></defs></svg> Request Succeeded ',2)])])}],["__scopeId","data-v-acc2c0d8"]]),od={"application/epub+zip":{extension:".epub"},"application/gzip":{extension:".gz"},"application/java-archive":{extension:".jar"},"application/javascript":{extension:".js",raw:!0},"application/json":{extension:".json",raw:!0,language:"json"},"application/ld+json":{extension:".jsonld",raw:!0,language:"json"},"application/problem+json":{extension:".json",raw:!0,language:"json"},"application/vnd.api+json":{extension:".json",raw:!0,language:"json"},"application/dns-json":{extension:".json",raw:!0,language:"json"},"application/msword":{extension:".doc"},"application/octet-stream":{extension:".bin"},"application/ogg":{extension:".ogx"},"application/pdf":{extension:".pdf",preview:"object"},"application/rtf":{extension:".rtf",raw:!0},"application/vnd.amazon.ebook":{extension:".azw"},"application/vnd.apple.installer+xml":{extension:".mpkg",raw:!0,language:"xml"},"application/vnd.mozilla.xul+xml":{extension:".xul",raw:!0,language:"xml"},"application/vnd.ms-excel":{extension:".xls"},"application/vnd.ms-fontobject":{extension:".eot"},"application/vnd.ms-powerpoint":{extension:".ppt"},"application/vnd.oasis.opendocument.presentation":{extension:".odp"},"application/vnd.oasis.opendocument.spreadsheet":{extension:".ods"},"application/vnd.oasis.opendocument.text":{extension:".odt"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{extension:".pptx"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{extension:".xlsx"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{extension:".docx"},"application/vnd.rar":{extension:".rar"},"application/vnd.visio":{extension:".vsd"},"application/x-7z-compressed":{extension:".7z"},"application/x-abiword":{extension:".abw"},"application/x-bzip":{extension:".bz"},"application/x-bzip2":{extension:".bz2"},"application/x-cdf":{extension:".cda"},"application/x-csh":{extension:".csh"},"application/x-freearc":{extension:".arc"},"application/x-httpd-php":{extension:".php",raw:!0},"application/x-sh":{extension:".sh",raw:!0},"application/x-tar":{extension:".tar"},"application/xhtml+xml":{extension:".xhtml",raw:!0,language:"html"},"application/xml":{extension:".xml",raw:!0,language:"xml"},"application/yaml":{extension:".yaml",raw:!0,language:"yaml"},"application/zip":{extension:".zip"},"audio/aac":{extension:".aac"},"audio/midi":{extension:".midi"},"audio/mpeg":{extension:".mp3",preview:"audio"},"audio/ogg":{extension:".oga"},"audio/wav":{extension:".wav"},"audio/webm":{extension:".weba"},"font/otf":{extension:".otf"},"font/ttf":{extension:".ttf"},"font/woff":{extension:".woff"},"font/woff2":{extension:".woff2"},"image/apng":{extension:".apng",preview:"image",alpha:!0},"image/avif":{extension:".avif",preview:"image"},"image/bmp":{extension:".bmp",preview:"image"},"image/gif":{extension:".gif",preview:"image",alpha:!0},"image/jpeg":{extension:".jpg",preview:"image"},"image/png":{extension:".png",preview:"image",alpha:!0},"image/svg+xml":{extension:".svg",raw:!0,language:"xml",preview:"image",alpha:!0},"image/tiff":{extension:".tiff"},"image/vnd.microsoft.icon":{extension:".ico",preview:"image"},"image/webp":{extension:".webp",preview:"image",alpha:!0},"text/calendar":{extension:".ics",raw:!0},"text/css":{extension:".css",raw:!0,language:"css"},"text/csv":{extension:".csv",raw:!0},"text/html":{extension:".html",raw:!0,language:"html",preview:"object"},"text/javascript":{extension:".js",raw:!0},"text/plain":{extension:".txt",raw:!0},"text/xml":{extension:".xml",raw:!0,language:"xml"},"text/yaml":{extension:".yaml",raw:!0,language:"yaml"},"video/3gpp":{extension:".3gp"},"audio/3gpp":{extension:".3gp"},"video/3gpp2":{extension:".3g2"},"audio/3gpp2":{extension:".3g2"},"video/mp2t":{extension:".ts"},"video/mp4":{extension:".mp4",preview:"video"},"video/mpeg":{extension:".mpeg"},"video/ogg":{extension:".ogv"},"video/webm":{extension:".webm",preview:"video"},"video/x-msvideo":{extension:".avi"}};var op=a(37795);let om=e=>{try{return decodeURIComponent(e)}catch{return e}},oh=e=>e instanceof Blob,of=e=>e?Object.keys(e).map(t=>({name:t,value:e[t]??""})):[],ov={class:"flex justify-center px-2 py-3"},og={class:"text-c-3 p-2 text-sm"},oy=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",ov,[(0,V.createElementVNode)("div",og,[(0,V.renderSlot)(e.$slots,"default")])])}]]),ob=["src"],o_=["src","type"],ok=["src","type"],ox=["data","type"],ow=i0((0,V.defineComponent)({__name:"ResponseBodyPreview",props:{src:{},type:{},mode:{},alpha:{type:Boolean,default:!1}},setup(e){let t=(0,V.ref)(!1);return(0,V.watch)(()=>e.src,()=>{t.value=!1}),(a,r)=>!t.value&&e.src?((0,V.openBlock)(),(0,V.createElementBlock)("div",{key:0,class:(0,V.normalizeClass)(["flex justify-center overflow-auto rounded-b",{"bg-preview p-2":e.alpha}])},["image"===e.mode?((0,V.openBlock)(),(0,V.createElementBlock)("img",{key:0,class:(0,V.normalizeClass)(["h-full max-w-full",{rounded:e.alpha}]),src:e.src,onError:r[0]||(r[0]=e=>t.value=!0)},null,42,ob)):"video"===e.mode?((0,V.openBlock)(),(0,V.createElementBlock)("video",{key:1,autoplay:"",controls:"",width:"100%",onError:r[1]||(r[1]=e=>t.value=!0)},[(0,V.createElementVNode)("source",{src:e.src,type:e.type},null,8,o_)],32)):"audio"===e.mode?((0,V.openBlock)(),(0,V.createElementBlock)("audio",{key:2,class:"my-12",controls:"",onError:r[2]||(r[2]=e=>t.value=!0)},[(0,V.createElementVNode)("source",{src:e.src,type:e.type},null,8,ok)],32)):((0,V.openBlock)(),(0,V.createElementBlock)("object",{key:3,class:"aspect-[4/3] w-full",data:e.src,type:e.type,onError:r[3]||(r[3]=e=>t.value=!0)},null,40,ox))],2)):((0,V.openBlock)(),(0,V.createBlock)(oy,{key:1},{default:(0,V.withCtx)(()=>[...r[4]||(r[4]=[(0,V.createTextVNode)("Preview unavailable",-1)])]),_:1}))}}),[["__scopeId","data-v-92f84612"]]),oE=(0,V.defineComponent)({__name:"ResponseBodyRaw",props:{content:{},language:{}},setup:e=>(t,a)=>((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.z5),{class:"codeBlock",content:e.content,lang:e.language},null,8,["content","lang"]))}),oC=(0,V.defineComponent)({__name:"ResponseBody",props:{data:{},responseBody:{},mediaConfig:{},display:{}},setup:e=>((0,V.watch)(()=>e.display,e=>console.log(e)),(t,a)=>((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,null,[e.mediaConfig?.raw&&"raw"===e.display&&e.mediaConfig.language?((0,V.openBlock)(),(0,V.createBlock)(oE,{key:e.responseBody.dataUrl,content:e.data,language:e.mediaConfig.language},null,8,["content","language"])):(0,V.createCommentVNode)("",!0),e.mediaConfig?.preview&&"preview"===e.display?((0,V.openBlock)(),(0,V.createBlock)(ow,{key:e.responseBody.dataUrl,alpha:e.mediaConfig.alpha,mode:e.mediaConfig.preview,src:e.responseBody.dataUrl,type:e.responseBody.mimeType?.essence??""},null,8,["alpha","mode","src","type"])):(0,V.createCommentVNode)("",!0),e.mediaConfig?.raw||e.mediaConfig?.preview?(0,V.createCommentVNode)("",!0):((0,V.openBlock)(),(0,V.createBlock)(oy,{key:2},{default:(0,V.withCtx)(()=>[...a[0]||(a[0]=[(0,V.createTextVNode)(" Binary file ",-1)])]),_:1}))],64)))}),oS={class:"text-c-3 text-xxs -my-1 flex justify-center gap-0.5 rounded p-0.5"},oI=(0,V.defineComponent)({__name:"ResponseBodyToggle",props:{modelValue:{}},emits:["toggle"],setup:(e,{emit:t})=>(a,r)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",oS,[(0,V.createElementVNode)("button",{class:(0,V.normalizeClass)(["hover:bg-b-3 rounded px-1",{"bg-b-3 text-c-1 cursor-default":"preview"===e.modelValue}]),type:"button",onClick:r[0]||(r[0]=(0,V.withModifiers)(e=>t("toggle","preview"),["stop"]))}," Preview ",2),(0,V.createElementVNode)("button",{class:(0,V.normalizeClass)(["hover:bg-b-3 rounded px-1",{"bg-b-3 text-c-1 cursor-default":"raw"===e.modelValue}]),type:"button",onClick:r[1]||(r[1]=(0,V.withModifiers)(e=>t("toggle","raw"),["stop"]))}," Raw ",2)]))}),oT={class:"sendingRequest"},oA=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",oT,[...t[0]||(t[0]=[(0,V.createElementVNode)("div",{class:"playIcon"},[(0,V.createElementVNode)("svg",{fill:"currentColor",height:"32",viewBox:"0 0 256 256",width:"32",xmlns:"http://www.w3.org/2000/svg"},[(0,V.createElementVNode)("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"})])],-1),(0,V.createTextVNode)(" Sending Request to Endpoint ",-1)])])}],["__scopeId","data-v-65dc6dfb"]]),oN={key:1,class:"autosendContainer"},oB={class:"requestContent"},oO={class:"requestContentInner"},oj={key:0,class:"code"},oR={key:1,class:"code"},oP={class:"requestHeaderContainer"},o$=i0((0,V.defineComponent)({__name:"RequestPreview",props:{request:{},response:{},state:{}},setup(e){let t=(0,V.computed)(()=>e.response?.success?{data:e.response.data.responseBody,headers:e.response.data.headers}:e.response?.error?.code==="REQUEST_NOT_OK"?{data:e.response.error.detail.responseBody,headers:e.response.error.detail.headers}:void 0),a=(0,V.ref)(!1),r=(0,V.computed)(()=>"requestFailed"===e.state||"requiresApproval"===e.state||a.value),n=(0,V.computed)(()=>(function({data:e,headers:t}){let a=of(t),r=a.find(e=>"content-type"===e.name.toLowerCase()),n=r?.value?new op(r.value):void 0,s=function(e){let t="";if(e){let a=e.match(/filename\*=UTF-8''([^;]+)/)?.[1]??e.match(/filename\s*=\s*"?([^";]+)"?/)?.[1];a&&(t=om(a.trim()))}return t}(a.find(e=>"content-disposition"===e.name.toLowerCase())?.value??""),i=oh(e)?URL.createObjectURL(e):"string"==typeof e?URL.createObjectURL(new Blob([e],{type:n?n.toString():void 0})):e instanceof Object&&Object.keys(e).length?URL.createObjectURL(new Blob([JSON.stringify(e)],{type:n?n.toString():void 0})):"";return{mimeType:n,attachmentFilename:s,dataUrl:i}})({data:t.value?.data,headers:t.value?.headers})),s=(0,V.computed)(()=>{var e;return od[e=n.value.mimeType?.essence??""]||(e.endsWith("+json")?{extension:".json",raw:!0,language:"json"}:void 0)}),i=(0,V.ref)();function o(e){i.value=e}let l=(0,V.computed)(()=>i.value?i.value:s.value?.raw&&!s.value.preview?"raw":s.value?.preview?"preview":"raw");return(i,u)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{class:(0,V.normalizeClass)(["requestPreview",{open:r.value,succeeded:"requestSucceeded"===e.state}])},["approved"===e.state?((0,V.openBlock)(),(0,V.createBlock)(on,{key:0})):"requiresApproval"===e.state?((0,V.openBlock)(),(0,V.createElementBlock)("div",oN,[(0,V.createVNode)(oa)])):"sendingRequest"===e.state?((0,V.openBlock)(),(0,V.createElementBlock)("button",{key:2,class:"toggleButton",type:"button",onClick:u[0]||(u[0]=e=>a.value=!a.value)},[(0,V.createVNode)(oA),r.value?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.zqX),{key:0})):((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.TA3),{key:1}))])):"requestSucceeded"===e.state?((0,V.openBlock)(),(0,V.createElementBlock)("button",{key:3,class:"toggleButton",type:"button",onClick:u[1]||(u[1]=e=>a.value=!a.value)},[(0,V.createVNode)(oc),r.value?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.zqX),{key:0})):((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.TA3),{key:1}))])):"rejected"===e.state?((0,V.openBlock)(),(0,V.createElementBlock)("button",{key:4,class:"toggleButton",type:"button",onClick:u[2]||(u[2]=e=>a.value=!a.value)},[(0,V.createVNode)(ol),r.value?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.zqX),{key:0})):((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.TA3),{key:1}))])):"requestFailed"===e.state?((0,V.openBlock)(),(0,V.createBlock)(oi,{key:5})):(0,V.createCommentVNode)("",!0),(0,V.createElementVNode)("div",oB,[(0,V.createElementVNode)("div",oO,[e.request?((0,V.openBlock)(),(0,V.createElementBlock)("div",oj,[u[4]||(u[4]=(0,V.createElementVNode)("div",{class:"requestHeaderContainer"},[(0,V.createElementVNode)("h1",null,"Request")],-1)),(0,V.createVNode)((0,V.unref)(nI.z5),{class:"codeBlock",content:JSON.stringify(e.request,null,2),lang:"json"},null,8,["content"])])):(0,V.createCommentVNode)("",!0),t.value?((0,V.openBlock)(),(0,V.createElementBlock)("div",oR,[(0,V.createElementVNode)("div",oP,[u[5]||(u[5]=(0,V.createElementVNode)("h1",null,"Response",-1)),s.value?.raw&&s.value.preview?((0,V.openBlock)(),(0,V.createBlock)(oI,{key:0,modelValue:l.value,"onUpdate:modelValue":u[3]||(u[3]=e=>l.value=e),onToggle:o},null,8,["modelValue"])):(0,V.createCommentVNode)("",!0)]),(0,V.createVNode)(oC,{data:t.value.data,display:l.value,mediaConfig:s.value,responseBody:n.value},null,8,["data","display","mediaConfig","responseBody"])])):(0,V.createCommentVNode)("",!0)])])],2))}}),[["__scopeId","data-v-f4245586"]]);function oM(e){return e.type===`tool-${iE}`&&"input-available"===e.state&&e.input?.method?.toLowerCase()!=="get"}let oV={class:"executeRequestTool"},oZ=i0((0,V.defineComponent)({__name:"ExecuteRequestTool",props:{messagePart:{}},setup(e){let t=iM(),a=(0,V.computed)(()=>"input-available"===e.messagePart.value.state&&"streaming"===t.chat.status||"approval-responded"===e.messagePart.value.state&&"submitted"===t.chat.status?"sendingRequest":oM(e.messagePart.value)?"requiresApproval":"output-available"===e.messagePart.value.state?e.messagePart.value.output.success?"requestSucceeded":"requestFailed":"output-error"===e.messagePart.value.state?"rejected":null);return(t,r)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",oV,[a.value?((0,V.openBlock)(),(0,V.createBlock)(o$,{key:0,request:e.messagePart.value.input,response:e.messagePart.value.output,state:a.value},null,8,["request","response","state"])):(0,V.createCommentVNode)("",!0)]))}}),[["__scopeId","data-v-49d28052"]]),oD=i0((0,V.defineComponent)({__name:"ContextItem",props:{loading:{type:Boolean}},setup:e=>(t,a)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{class:(0,V.normalizeClass)(["contextItem",{shimmer:e.loading}])},[(0,V.renderSlot)(t.$slots,"default",{},void 0,!0)],2))}),[["__scopeId","data-v-b6e5aa96"]]),oL={class:"sendingRequest"},oU=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",oL,[...t[0]||(t[0]=[(0,V.createElementVNode)("div",{class:"playIcon"},null,-1),(0,V.createTextVNode)(" Retrieving relevant information... ",-1)])])}],["__scopeId","data-v-653c66b3"]]),oF={key:0},oz={key:1,class:"operations"},oq=i0((0,V.defineComponent)({__name:"GetMiniOpenAPIDocTool",props:{messagePart:{},message:{}},setup(e){let t=(0,V.ref)(!1);(0,V.watch)(()=>e.message,()=>{let a=e.message.parts,r=a.findIndex(t=>"toolCallId"in t&&t.toolCallId===e.messagePart.value.toolCallId);t.value=!!a[r+1]});let a=(0,V.computed)(()=>{if(!e.messagePart.value.output?.structuredContent)return;let t=e.messagePart.value.output?.structuredContent?.info?.title;return Object.values((e.messagePart.value.output?.structuredContent).paths??{}).flatMap(e=>Object.values(e??{})).map(e=>`${t?`${t} - `:""}${e.summary??""}`).filter(Boolean)}),r=iM();return(n,s)=>((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,null,["input-available"===e.messagePart.value.state&&"streaming"===(0,V.unref)(r).chat.status?((0,V.openBlock)(),(0,V.createElementBlock)("div",oF,[(0,V.createVNode)(oU)])):(0,V.createCommentVNode)("",!0),a.value?((0,V.openBlock)(),(0,V.createElementBlock)("div",oz,[((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,null,(0,V.renderList)(a.value,e=>((0,V.openBlock)(),(0,V.createBlock)(oD,{key:e,loading:!t.value},{default:(0,V.withCtx)(()=>[(0,V.createTextVNode)((0,V.toDisplayString)(e),1)]),_:2},1032,["loading"]))),128))])):(0,V.createCommentVNode)("",!0)],64))}}),[["__scopeId","data-v-ecee6203"]]),oW={class:"loadingApiSpecs"},oJ=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("div",oW,[...t[0]||(t[0]=[(0,V.createElementVNode)("div",{class:"playIcon"},null,-1),(0,V.createTextVNode)(" Loading APIs... ",-1)])])}],["__scopeId","data-v-9d9724d2"]]),oK={key:0},oH=(0,V.defineComponent)({__name:"GetOpenAPISpecsSummary",props:{messagePart:{},message:{}},setup(e){let t=(0,V.ref)(!1);return(0,V.watch)(()=>e.message,()=>{let a=e.message.parts,r=a.findIndex(t=>"toolCallId"in t&&t.toolCallId===e.messagePart.value.toolCallId);t.value=!!a[r+1]}),(e,a)=>t.value?(0,V.createCommentVNode)("",!0):((0,V.openBlock)(),(0,V.createElementBlock)("div",oK,[(0,V.createVNode)(oJ)]))}}),oG=(0,V.defineComponent)({__name:"Text",props:{messagePart:{}},setup:e=>(t,a)=>((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.mi),{value:e.messagePart.value.text},null,8,["value"]))});var oY=a(71125);function oX(){let{api:e}=iM(),t=(0,V.ref)(""),a=(0,oY.Q0)(async t=>{let a=await e.search(t);a.success&&(n.value=a.data.results)},200),r=(0,V.computed)({get:()=>t.value,set:e=>{a(e),t.value=e}}),n=(0,V.ref)([]);return a(""),{query:r,results:n}}let oQ={key:0,class:"catalog custom-scroll"},o0=["onClick"],o1={class:"left"},o3=["src"],o6={class:"right"},o2={class:"item-top"},o5={class:"version"},o4={class:"description"},o7=i0((0,V.defineComponent)({__name:"Catalog",props:{modal:{}},setup(e){let t=oX(),a=iM(),r=(0,V.computed)(()=>t.results.value.filter(e=>!a.registryDocuments.value.some(t=>t.namespace===e.namespace&&t.slug===e.slug)).map(e=>({...e,label:e.title,id:e.id})));return(n,s)=>((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.uT),{class:"catalogModal",state:e.modal},{default:(0,V.withCtx)(()=>[(0,V.createVNode)((0,V.unref)(nI.vW),{autofocus:"",class:"searchInput",modelValue:(0,V.unref)(t).query.value,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,V.unref)(t).query.value=e??"")},null,8,["modelValue"]),r.value.length?((0,V.openBlock)(),(0,V.createElementBlock)("div",oQ,[((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,null,(0,V.renderList)(r.value,t=>((0,V.openBlock)(),(0,V.createElementBlock)("button",{key:t.id,class:"item",type:"button",onClick:()=>{(0,V.unref)(a).addDocument(t),e.modal.hide()}},[(0,V.createElementVNode)("div",o1,[t.logoUrl?((0,V.openBlock)(),(0,V.createElementBlock)("img",{key:0,class:"logo",src:t.logoUrl},null,8,o3)):((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.kv),{key:1,class:"logo",logo:"Openapi"}))]),(0,V.createElementVNode)("div",o6,[(0,V.createElementVNode)("div",o2,[(0,V.createElementVNode)("span",null,(0,V.toDisplayString)(t.title),1),(0,V.createElementVNode)("span",o5,"v"+(0,V.toDisplayString)(t.currentVersion),1)]),(0,V.createElementVNode)("span",o4," @"+(0,V.toDisplayString)(t.namespace)+"/"+(0,V.toDisplayString)(t.slug),1)])],8,o0))),128))])):(0,V.createCommentVNode)("",!0)]),_:1},8,["state"]))}}),[["__scopeId","data-v-bc24f891"]]),o9={class:"dropdown-item"},o8={class:"dropdown-item"},le=i0((0,V.defineComponent)({__name:"ActionsDropdown",emits:["uploadApi"],setup(e){let t=(0,nI.hS)();return(e,a)=>((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,null,[(0,V.createVNode)((0,V.unref)(nI.SM),{offset:{crossAxis:-5,mainAxis:5}},{items:(0,V.withCtx)(()=>[(0,V.createVNode)((0,V.unref)(nI.rA),{onClick:a[0]||(a[0]=t=>e.$emit("uploadApi"))},{default:(0,V.withCtx)(()=>[(0,V.createElementVNode)("div",o9,[(0,V.createVNode)((0,V.unref)(iQ.J0d)),a[2]||(a[2]=(0,V.createTextVNode)(" Upload API ",-1))])]),_:1}),(0,V.createVNode)((0,V.unref)(nI.rA),{onClick:a[1]||(a[1]=e=>(0,V.unref)(t).show())},{default:(0,V.withCtx)(()=>[(0,V.createElementVNode)("div",o8,[(0,V.createVNode)((0,V.unref)(iQ.j4)),a[3]||(a[3]=(0,V.createTextVNode)(" Search Catalog ",-1))])]),_:1})]),default:(0,V.withCtx)(()=>[(0,V.renderSlot)(e.$slots,"default",{},void 0,!0)]),_:3}),(0,V.unref)(t).open?((0,V.openBlock)(),(0,V.createBlock)(o7,{key:0,modal:(0,V.unref)(t)},null,8,["modal"])):(0,V.createCommentVNode)("",!0)],64))}}),[["__scopeId","data-v-2d142bb5"]]),lt={class:"approvalSection"},la={class:"approvalText flex items-center gap-1.5"},lr={class:"approveContainer"},ln=i0((0,V.defineComponent)({__name:"ApprovalSection",emits:["approve","reject"],setup:(e,{emit:t})=>(e,a)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",lt,[(0,V.createElementVNode)("strong",la,[(0,V.createVNode)((0,V.unref)(iQ._mt),{class:"text-blue size-4",weight:"bold"}),a[2]||(a[2]=(0,V.createTextVNode)(" One or more requests require approval. ",-1))]),(0,V.createElementVNode)("div",lr,[(0,V.createElementVNode)("button",{type:"button",class:"actionButton rejectButton",onClick:a[0]||(a[0]=e=>t("reject"))}," Reject "),(0,V.createElementVNode)("button",{type:"button",class:"actionButton approveButton",onClick:a[1]||(a[1]=e=>t("approve"))}," Approve ")])]))}),[["__scopeId","data-v-a7e6c699"]]),ls={LIMIT_REACHED:"LIMIT_REACHED"},li={key:0,class:"error gap-1.5"},lo=i0((0,V.defineComponent)({__name:"ErrorMessage",props:{error:{}},setup(e){let t=[ls.LIMIT_REACHED];return(a,r)=>t.includes(e.error.code)?(0,V.createCommentVNode)("",!0):((0,V.openBlock)(),(0,V.createElementBlock)("div",li,[(0,V.createVNode)((0,V.unref)(iQ._mt),{class:"text-red size-4",weight:"bold"}),(0,V.createTextVNode)(" "+(0,V.toDisplayString)(e.error.message),1)]))}}),[["__scopeId","data-v-63a481da"]]),ll={class:"freeMessagesInfoSection"},lu={class:"infoText flex items-center gap-1.5"},lc={class:"actionsContainer"},ld=i0((0,V.defineComponent)({__name:"FreeMessagesInfoSection",setup(e){let t=(0,V.ref)(!1),{dashboardUrl:a,mode:r,uploadedTmpDocumentUrl:n}=iM();function s(){window.open("https://scalar.com/products/agent/getting-started","_blank"),"full"===r&&window.location.replace(a),"preview"===r&&window.location.replace(n.value?`${a}/register?flow=oss-agent&docUrl=${n.value}`:a)}function i(){t.value=!0}return(e,a)=>(0,V.withDirectives)(((0,V.openBlock)(),(0,V.createElementBlock)("div",ll,[(0,V.createElementVNode)("strong",lu,[(0,V.createVNode)((0,V.unref)(iQ._mt),{class:"text-blue size-4",weight:"bold"}),a[0]||(a[0]=(0,V.createTextVNode)(" Get an API Key to enable Agent Scalar for your docs. ",-1))]),(0,V.createElementVNode)("div",lc,[(0,V.createElementVNode)("button",{class:"actionButton upgradeButton",type:"button",onClick:s}," Learn More "),(0,V.createElementVNode)("button",{"aria-label":"Close",class:"closeButton",type:"button",onClick:i},[(0,V.createVNode)((0,V.unref)(iQ.snQ),{class:"size-4",weight:"bold"})])])],512)),[[V.vShow,!t.value]])}}),[["__scopeId","data-v-593b8dcb"]]),lp={class:"paymentSection"},lm={class:"approvalText flex items-center gap-1.5"},lh=i0((0,V.defineComponent)({__name:"PaymentSection",setup(e){let{dashboardUrl:t,mode:a,uploadedTmpDocumentUrl:r}=iM();function n(){"full"===a&&window.location.replace(t),"preview"===a&&window.location.replace(r.value?`${t}/register?flow=oss-agent&docUrl=${r.value}`:t)}return(e,t)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",lp,[(0,V.createElementVNode)("strong",lm,[(0,V.createVNode)((0,V.unref)(iQ._mt),{class:"text-blue size-4",weight:"bold"}),t[0]||(t[0]=(0,V.createTextVNode)(" You've used up all your free messages, upgrade for $24/mo. ",-1))]),(0,V.createElementVNode)("div",{class:"paymentContainer"},[(0,V.createElementVNode)("button",{class:"actionButton approveButton",type:"button",onClick:n}," Upgrade "),t[1]||(t[1]=(0,V.createStaticVNode)('<div class="paymentInfo" data-v-59a0be07><h3 data-v-59a0be07>$24 <span data-v-59a0be07>/ month</span></h3><div class="paymentInfoSection" data-v-59a0be07><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Members in your workspace</span><span data-v-59a0be07>1</span></div><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>x $24 / month / member</span><span data-v-59a0be07>$24.00</span></div></div><div class="paymentInfoSection" data-v-59a0be07><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Messages</span><span data-v-59a0be07>1,000</span></div><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Additional Messages</span><span data-v-59a0be07>+ $0.02 Message</span></div></div></div>',1))])]))}}),[["__scopeId","data-v-59a0be07"]]),lf=["onClick"],lv=["src"],lg={key:1,class:"searchResultsEmpty"},ly=i0((0,V.defineComponent)({__name:"SearchPopover",setup(e){let t=iM(),a=oX(),r=(0,V.computed)(()=>a.results.value.filter(e=>!t.registryDocuments.value.some(t=>t.namespace===e.namespace&&t.slug===e.slug)).map(e=>({...e,label:e.title,id:e.id})));return(e,n)=>((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.w),{offset:0,placement:"top-start",resize:"",style:{width:"220px"}},{popover:(0,V.withCtx)(({close:e})=>[(0,V.createVNode)((0,V.unref)(nI.SB),{autofocus:"",class:"searchInput",modelValue:(0,V.unref)(a).query.value,placeholder:"Add an API","onUpdate:modelValue":n[0]||(n[0]=e=>(0,V.unref)(a).query.value=e??"")},{prefix:(0,V.withCtx)(()=>[(0,V.createVNode)((0,V.unref)(iQ.j4),{class:"searchIcon"})]),_:1},8,["modelValue"]),r.value.length?((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,{key:0},(0,V.renderList)(r.value,a=>((0,V.openBlock)(),(0,V.createElementBlock)("button",{key:a.id,class:"searchItem",type:"button",onClick:()=>{(0,V.unref)(t).addDocument(a),e()}},[a.logoUrl?((0,V.openBlock)(),(0,V.createElementBlock)("img",{key:0,class:"searchItemLogo",src:a.logoUrl},null,8,lv)):(0,V.createCommentVNode)("",!0),(0,V.createElementVNode)("span",null,(0,V.toDisplayString)(a.title),1)],8,lf))),128)):((0,V.openBlock)(),(0,V.createElementBlock)("span",lg," No APIs found "))]),default:(0,V.withCtx)(()=>[(0,V.renderSlot)(e.$slots,"default",{},void 0,!0)]),_:3}))}}),[["__scopeId","data-v-7945f74c"]]),lb={key:0,class:"flex items-center gap-1.5"},l_={key:0,class:"uploadText"},lk={key:1,class:"uploadText"},lx={key:2,class:"uploadText"},lw={key:1,class:"uploadText flex items-center gap-1.5"},lE={key:2,class:"uploadText flex items-center gap-1.5"},lC=i0((0,V.defineComponent)({__name:"UploadSection",props:{uploadState:{}},setup(e){let t=(0,nI.R2)(),a=(0,V.computed)(()=>["uploading","processing","loading"].includes(e.uploadState.type));return(r,n)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{class:(0,V.normalizeClass)(["uploadSection",{error:"error"===e.uploadState.type,done:"done"===e.uploadState.type}])},[a.value?((0,V.openBlock)(),(0,V.createElementBlock)("div",lb,[(0,V.createVNode)((0,V.unref)(nI.XI),{class:"text-blue",loader:{...(0,V.unref)(t),isLoading:!0},size:"lg"},null,8,["loader"]),"loading"===e.uploadState.type?((0,V.openBlock)(),(0,V.createElementBlock)("strong",l_," Loading document... ")):"processing"===e.uploadState.type?((0,V.openBlock)(),(0,V.createElementBlock)("strong",lk," Processing document... ")):((0,V.openBlock)(),(0,V.createElementBlock)("strong",lx," Uploading document... "))])):(0,V.createCommentVNode)("",!0),"done"===e.uploadState.type?((0,V.openBlock)(),(0,V.createElementBlock)("strong",lw,[(0,V.createVNode)((0,V.unref)(iQ.eYG),{class:"icon text-green"}),n[0]||(n[0]=(0,V.createTextVNode)(" Document processed ",-1))])):(0,V.createCommentVNode)("",!0),"error"===e.uploadState.type?((0,V.openBlock)(),(0,V.createElementBlock)("strong",lE,[(0,V.createVNode)((0,V.unref)(iQ.Yp7),{class:"icon text-red"}),(0,V.createTextVNode)(" "+(0,V.toDisplayString)(e.uploadState.error),1)])):(0,V.createCommentVNode)("",!0)],2))}}),[["__scopeId","data-v-f9d3a579"]]),lS=iJ({message:iU(),code:iU(),status:new iH({type:"optional",innerType:iV._number(iz,void 0)})});function lI(e){return e.type.startsWith("tool")&&"input-available"===e.state}let lT={class:"actionContainer"},lA=["disabled"],lN={class:"inputActionsContainer"},lB={class:"inputActionsLeft"},lO={class:"addAPIButton",type:"button"},lj={class:"addAPIButton",type:"button"},lR=["src"],lP=["onClick"],l$={class:"inputActionsRight"},lM={class:"sendCheckboxContinue"},lV={key:0,class:"relative flex items-center gap-1.5"},lZ={class:"termsAgree",for:"agentTermsAgree"},lD={class:"addMoreContext"},lL={class:"ml-auto flex items-center gap-1"},lU=["onClick"],lF=["alt","src"],lz=i0((0,V.defineComponent)({__name:"PromptForm",emits:["submit","uploadApi"],setup(e,{expose:t,emit:a}){t({focusPrompt:function(){r.value?.focus()}});let r=(0,V.useTemplateRef)("agentPrompt"),n=iM(),s=(0,V.computed)(()=>n.prompt.value.trim().length>0),i=(0,V.computed)(()=>n.prompt.value.trim().length>1e4),o=(0,V.computed)(()=>n.chat.messages.length>1&&!n.getAgentKey?.()&&g?.value?.code!==ls.LIMIT_REACHED);function l(e){n.loading.value||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v(),window.scrollTo(0,document.body.scrollHeight))}(0,V.watch)(n.prompt,()=>{if(r?.value){if(!n.prompt.value.length){r.value.style.height="0px";return}r.value.style.height="auto",r.value.style.height=r.value.scrollHeight+"px"}}),(0,V.watch)(()=>n.chat.status,e=>{("ready"===e||"error"===e)&&r.value?.focus()});let{approvalRequiredParts:u,respondToRequestApprovals:c}=function(){let e=iM(),t=(0,V.computed)(()=>e.chat.messages.filter(e=>e.parts.some(oM)).flatMap(e=>e.parts).filter(oM));async function a(a){let r=t.value.map(async t=>{if(!a)return await e.chat.addToolOutput({tool:iE,toolCallId:t.toolCallId,state:"output-error",errorText:"The user denied the request."});await iT({documentSettings:nL(e.workspaceStore),input:t.input,toolCallId:t.toolCallId,chat:e.chat})});await Promise.all(r)}return{approvalRequiredParts:t,respondToRequestApprovals:a}}(),{pendingClientToolParts:d}=function(){let e=iM();return{pendingClientToolParts:(0,V.computed)(()=>e.chat.messages.filter(e=>e.parts.some(lI)).flatMap(e=>e.parts).filter(lI))}}(),p=function(){let e=iM(),t=(0,V.ref)();function a(t){let a=`${e.baseUrl}${t}`;if(a.startsWith("/"))return a;let r=new URLSearchParams({scalar_url:a.toString()});return new URL(`https://proxy.scalar.com/?${r}`)}return{uploadTempDocument:async function(r,n=!1){try{t.value={type:"uploading"};let s=await fetch(a(`/core/share/upload/apis${n?"?source=agent":""}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:r})});if(!s.ok){t.value={type:"error",error:"Failed to upload document."};return}let i=await s.json(),{success:o,data:l}=iJ({url:iU(),namespace:iU(),slug:iU()}).safeParse(i);if(!o){t.value={type:"error",error:"Failed to process document."};return}t.value={type:"processing"};let u=await fetch(a(`/vector/registry/embeddings/${l.namespace}/${l.slug}`),{method:"GET"});if(function({namespace:e,slug:t}){localStorage.setItem(iY,JSON.stringify({namespace:e,slug:t}))}({namespace:l.namespace,slug:l.slug}),await e.addDocument({namespace:l.namespace,slug:l.slug,removable:!1}),!u.ok){t.value={type:"error",error:"Failed to embed document."};return}return t.value={type:"done"},e.uploadedTmpDocumentUrl.value=l.url,setTimeout(()=>{t.value=void 0},2e3),l}catch{t.value={type:"error",error:"Failed to upload document."};return}},uploadState:t}}();function m(){n.terms.accept(),"preview"===n.mode&&n.getActiveDocumentJson&&p.uploadTempDocument(n.getActiveDocumentJson(),!0)}let h=(0,V.computed)(()=>Object.values(n.pendingDocuments).some(Boolean)),f=(0,V.computed)(()=>{let e=i.value,t=!s.value,a=u.value.length>0,r=d.value.length>0,o="preview"===n.mode,l=o&&!n.terms.accepted.value,c=o&&!!p.uploadState.value,m=h.value;return e||t||a||r||l||c||m});function v(){f.value||a("submit")}let g=function(){let{chat:e}=iM();return(0,V.computed)(()=>{if(!e.error)return;let t=function(e){try{return JSON.parse(e)}catch{return}}(e.error.message),a=lS.safeParse(t);return t&&a.success?a.data:{message:e.error.message,code:"UNKNOWN_ERROR"}})}();return(e,t)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",lT,[(0,V.unref)(p).uploadState.value||h.value?((0,V.openBlock)(),(0,V.createBlock)(lC,{key:0,uploadState:(0,V.unref)(p).uploadState.value??{type:"loading"}},null,8,["uploadState"])):(0,V.createCommentVNode)("",!0),(0,V.unref)(g)?((0,V.openBlock)(),(0,V.createBlock)(lo,{key:1,error:(0,V.unref)(g)},null,8,["error"])):(0,V.createCommentVNode)("",!0),(0,V.unref)(u).length?((0,V.openBlock)(),(0,V.createBlock)(ln,{key:2,onApprove:t[0]||(t[0]=e=>(0,V.unref)(c)(!0)),onReject:t[1]||(t[1]=e=>(0,V.unref)(c)(!1))})):(0,V.createCommentVNode)("",!0),V.unref(g)?.code===(0,V.unref)(ls).LIMIT_REACHED?((0,V.openBlock)(),(0,V.createBlock)(lh,{key:3})):(0,V.createCommentVNode)("",!0),o.value?((0,V.openBlock)(),(0,V.createBlock)(ld,{key:4})):(0,V.createCommentVNode)("",!0),(0,V.createElementVNode)("form",{class:"promptForm",onSubmit:(0,V.withModifiers)(v,["prevent"])},[t[6]||(t[6]=(0,V.createElementVNode)("label",{class:"agentLabel",for:"agentTextarea"}," Type a Request To get Started ",-1)),(0,V.withDirectives)((0,V.createElementVNode)("textarea",{id:"agentTextarea",ref:"agentPrompt","onUpdate:modelValue":t[2]||(t[2]=e=>(0,V.unref)(n).prompt.value=e),class:"prompt custom-scroll",disabled:(0,V.unref)(n).loading.value,name:"prompt",placeholder:"Ask me anything...",onKeydown:l},null,40,lA),[[V.vModelText,(0,V.unref)(n).prompt.value]]),(0,V.createElementVNode)("div",lN,[(0,V.createElementVNode)("div",lB,[V.unref(n).isLoggedIn?.value?((0,V.openBlock)(),(0,V.createBlock)(le,{key:1,onUploadApi:t[3]||(t[3]=t=>e.$emit("uploadApi"))},{default:(0,V.withCtx)(()=>[(0,V.createElementVNode)("button",lj,[(0,V.createVNode)((0,V.unref)(iQ.Ijq),{class:"size-4",weight:"bold"})])]),_:1})):((0,V.openBlock)(),(0,V.createBlock)(ly,{key:0},{default:(0,V.withCtx)(()=>[(0,V.createElementVNode)("button",lO,[(0,V.createVNode)((0,V.unref)(iQ.Ijq),{class:"size-4",weight:"bold"})])]),_:1})),((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,null,(0,V.renderList)((0,V.unref)(n).registryDocuments.value,e=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{key:e.id,class:"apiPill"},[e.logoUrl?((0,V.openBlock)(),(0,V.createElementBlock)("img",{key:0,class:"apiPillLogo",src:e.logoUrl},null,8,lR)):(0,V.createCommentVNode)("",!0),(0,V.createTextVNode)(" "+(0,V.toDisplayString)(e.title)+" ",1),e.removable?((0,V.openBlock)(),(0,V.createElementBlock)("button",{key:1,class:"apiPillRemove",type:"button",onClick:t=>(0,V.unref)(n).removeDocument(e)},[(0,V.createVNode)((0,V.unref)(iQ.snQ),{class:"size-4",weight:"bold"})],8,lP)):(0,V.createCommentVNode)("",!0)]))),128))]),(0,V.createElementVNode)("div",l$,[(0,V.unref)(n).loading.value?(0,V.createCommentVNode)("",!0):((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.EX),{key:0,class:"settingsButton h-7 w-7 p-1.5",icon:(0,V.unref)(iQ.tsF),label:"Scalar",size:"md",weight:"bold",onClick:t[4]||(t[4]=e=>(0,V.unref)(n).settingsModal.show())},null,8,["icon"])),(0,V.createElementVNode)("div",lM,[(0,V.unref)(n).terms.accepted.value||"preview"!==(0,V.unref)(n).mode?(0,V.createCommentVNode)("",!0):((0,V.openBlock)(),(0,V.createElementBlock)("div",lV,[(0,V.createElementVNode)("input",{id:"agentTermsAgree",class:"sr-only",type:"checkbox",onChange:m},null,32),(0,V.createElementVNode)("label",lZ,[(0,V.createVNode)((0,V.unref)(iQ.eYG),{class:"termsAgreeIcon",weight:"bold"}),t[5]||(t[5]=(0,V.createTextVNode)(" Agree to Terms & Conditions ",-1))])])),(0,V.unref)(n).loading.value?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.XI),{key:2,class:"loader h-7 w-7",loader:{isLoading:(0,V.unref)(n).loading.value,isValid:!1,clear:async()=>{},invalidate:async()=>{},isInvalid:!1,isActive:!1,validate:async()=>{},start:()=>{}},size:"2xl"},null,8,["loader"])):((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.EX),{key:1,class:"sendButton h-7 w-7 p-1.5",disabled:f.value,icon:(0,V.unref)(iQ.wbj),label:"Scalar",size:"md",type:"submit",weight:"bold"},null,8,["disabled","icon"]))])])])],32),(0,V.withDirectives)((0,V.createElementVNode)("div",lD,[t[7]||(t[7]=(0,V.createElementVNode)("span",null,"Add context from dozens of API's",-1)),(0,V.createElementVNode)("div",lL,[((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,null,(0,V.renderList)((0,V.unref)(n).curatedDocuments.value,e=>((0,V.openBlock)(),(0,V.createElementBlock)("button",{key:e.id,class:"addAPIContext",type:"button",onClick:t=>(0,V.unref)(n).addDocument(e)},[e.logoUrl?((0,V.openBlock)(),(0,V.createElementBlock)("img",{key:0,alt:e.title,class:"size-4",src:e.logoUrl},null,8,lF)):(0,V.createCommentVNode)("",!0)],8,lU))),128))])],512),[[V.vShow,(0,V.unref)(n).chat.messages.length<=1]])]))}}),[["__scopeId","data-v-3899441c"]]),lq={class:"chat"},lW={key:0},lJ={class:"formContainer"},lK=i0((0,V.defineComponent)({__name:"Chat",emits:["submit","uploadApi"],setup(e,{emit:t}){let a=iM();return(e,r)=>((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,null,[(0,V.createElementVNode)("div",lq,[((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,null,(0,V.renderList)((0,V.unref)(a).chat.messages,e=>((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,{key:e.id},["user"===e.role?((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,{key:0},(0,V.renderList)(e.parts,(t,a)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{key:`${e.id}-${a}`,class:"userMessage"},["text"===t.type?((0,V.openBlock)(),(0,V.createElementBlock)("p",lW,(0,V.toDisplayString)(t.text),1)):(0,V.createCommentVNode)("",!0)]))),128)):(0,V.createCommentVNode)("",!0),"assistant"===e.role?((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,{key:1},(0,V.renderList)(e.parts,(t,a)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{key:`${e.id}-${a}`},["text"===t.type?((0,V.openBlock)(),(0,V.createBlock)(oG,{key:0,messagePart:(0,V.toRef)(t)},null,8,["messagePart"])):(0,V.createCommentVNode)("",!0),t.type.endsWith((0,V.unref)(iE))?((0,V.openBlock)(),(0,V.createBlock)(oZ,{key:1,messagePart:(0,V.toRef)(t)},null,8,["messagePart"])):(0,V.createCommentVNode)("",!0),t.type.endsWith((0,V.unref)("get-mini-openapi-spec"))?((0,V.openBlock)(),(0,V.createBlock)(oq,{key:2,message:(0,V.reactive)(e),messagePart:(0,V.toRef)(t)},null,8,["message","messagePart"])):(0,V.createCommentVNode)("",!0),t.type.endsWith((0,V.unref)("get-openapi-specs-summary"))?((0,V.openBlock)(),(0,V.createBlock)(oH,{key:3,message:(0,V.reactive)(e),messagePart:(0,V.toRef)(t)},null,8,["message","messagePart"])):(0,V.createCommentVNode)("",!0),t.type.endsWith((0,V.unref)(iX))?((0,V.openBlock)(),(0,V.createBlock)(oe,{key:4,message:(0,V.reactive)(e),messagePart:(0,V.toRef)(t)},null,8,["message","messagePart"])):(0,V.createCommentVNode)("",!0)]))),128)):(0,V.createCommentVNode)("",!0)],64))),128)),r[2]||(r[2]=(0,V.createElementVNode)("div",{class:"spacer"},null,-1))]),(0,V.createElementVNode)("div",lJ,[(0,V.createVNode)(lz,{onSubmit:r[0]||(r[0]=e=>t("submit")),onUploadApi:r[1]||(r[1]=e=>t("uploadApi"))})])],64))}}),[["__scopeId","data-v-41e50a16"]]),lH={fill:"none",height:"54",viewBox:"0 0 64 54",width:"64",xmlns:"http://www.w3.org/2000/svg"},lG=i0({},[["render",function(e,t){return(0,V.openBlock)(),(0,V.createElementBlock)("svg",lH,[...t[0]||(t[0]=[(0,V.createElementVNode)("path",{"clip-rule":"evenodd",d:"M31.0667 0C40.2667 0 48.3333 6.13333 52.6 14.9333H57.2667C59.6 14.9333 61.5333 16.8 61.5333 19.1333V32.2C61.5333 33.4667 60.8667 34.6 60 35.3333L63.3333 45.4V45.4667C63.5639 46.207 63.6166 46.9912 63.4874 47.7557C63.3582 48.5202 63.0505 49.2435 62.5895 49.8669C62.1284 50.4903 61.5269 50.9962 60.8338 51.3437C60.1406 51.6911 59.3754 51.8703 58.6 51.8667H54.3333C53.9895 52.4222 53.5082 52.8797 52.936 53.195C52.3638 53.5103 51.72 53.6728 51.0667 53.6667H47.0667C46.5764 53.6755 46.0892 53.5877 45.6328 53.4082C45.1765 53.2287 44.76 52.961 44.4071 52.6205C44.0542 52.28 43.7719 51.8733 43.5762 51.4237C43.3805 50.9741 43.2753 50.4903 43.2667 50C43.2667 47.9333 44.9333 46.2667 47 46.2667H51.0667C52.4667 46.2667 53.7333 46.9333 54.3333 48.0667H58.6C59.3333 48.0667 59.9333 47.4 59.6667 46.6L56.3333 36.3333H51.3333C49.9333 36.3333 48.6 35.6667 47.8 34.5333V34.4667L46.8 32.9333C46.7585 32.8643 46.6999 32.8072 46.6298 32.7675C46.5597 32.7279 46.4805 32.707 46.4 32.707C46.3195 32.707 46.2403 32.7279 46.1702 32.7675C46.1001 32.8072 46.0415 32.8643 46 32.9333L45.4667 34C45.1162 34.7065 44.5739 35.3 43.9019 35.7126C43.2299 36.1253 42.4552 36.3404 41.6667 36.3333H24.9333C23.4 36.3333 21.9333 35.7333 20.8667 34.6667H20.8L19.8667 33.6667C19.6667 33.4667 19.4667 33.3333 19.2 33.3333L17.4667 33.1333C17.3333 38.8667 13.4667 43.4667 8.73333 43.4667C3.93333 43.4667 0 38.6667 0 32.9333C0 32.2667 0 31.6667 0.133333 31.1333V31C0.8 26.8 3.46667 23.4667 6.93333 22.6C9.46667 9.93333 19.3333 0 31.0667 0ZM3.93333 31.5333C4.46667 28 6.93333 26.2 8.73333 26.2C10.7333 26.2 13.6 28.4 13.6 32.8667C13.6 34.4667 13.2667 35.7333 12.7333 36.7333C11.7333 38.7333 10.0667 39.6667 8.73333 39.6667C7.67025 39.6269 6.66506 39.1722 5.93333 38.4C5.8414 38.3142 5.75246 38.2253 5.66667 38.1333C5.19113 37.6008 4.80806 36.9924 4.53333 36.3333C4.0607 35.2169 3.83335 34.0119 3.86667 32.8V31.6667L3.93333 31.6V31.5333ZM24.3333 20.6667C24.3333 19.6667 25.2 18.8 26.2667 18.8H55.8667C56.9333 18.8 57.8 19.6667 57.7333 20.7333V30.7333C57.6667 31.8 56.8 32.6667 55.7333 32.6667H53.4C53.0667 32.6667 52.7333 32.6667 52.4 32.5333C51.5333 32.3333 50.7333 31.8667 50.4 31.3333L47.9333 27.6C47.7363 27.2901 47.4602 27.0383 47.1336 26.8706C46.8069 26.7028 46.4414 26.6251 46.0747 26.6455C45.7081 26.6658 45.3535 26.7835 45.0474 26.9865C44.7413 27.1894 44.4948 27.4702 44.3333 27.8L42.6667 31C42.4199 31.4974 42.04 31.9165 41.5692 32.2107C41.0984 32.505 40.5552 32.6628 40 32.6667L26.2 32.8C25.1333 32.8 24.2667 31.9333 24.2667 30.8667V20.6667H24.3333ZM11 22.2C13.5333 11.5333 22 3.86667 31 3.86667C37.9333 3.86667 44.4 8.2 48.3333 15H24.3333C21.4667 15 18.6 16 16.3333 17.8L16.2667 17.8667L10.9333 22.2H11Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)])])}]]),lY={class:"startContainer"},lX={class:"disclaimerText"},lQ=i0((0,V.defineComponent)({__name:"Start",emits:["submit","uploadApi"],setup(e,{emit:t}){let{mode:a}=iM();return(e,r)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",lY,[(0,V.createVNode)(lG,{class:"agentLogo"}),r[6]||(r[6]=(0,V.createElementVNode)("h1",{class:"heading"},"How can I help you today?",-1)),(0,V.createVNode)(lz,{ref:"promptFormField",onSubmit:r[0]||(r[0]=e=>t("submit")),onUploadApi:r[1]||(r[1]=e=>t("uploadApi"))},null,512),(0,V.createElementVNode)("p",lX,["preview"===(0,V.unref)(a)?((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,{key:0},[(0,V.createTextVNode)(" By messaging Agent Scalar your OpenAPI Document will be Temporarily uploaded to Scalar's Servers. You must agree to our ")],64)):((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,{key:1},[(0,V.createTextVNode)(" By messaging Agent Scalar you agree to our ")],64)),r[2]||(r[2]=(0,V.createElementVNode)("a",{class:"disclaimerLink",href:"https://scalar.com/legal/terms-and-conditions",target:"_blank"},"Terms ",-1)),r[3]||(r[3]=(0,V.createTextVNode)(" and ",-1)),r[4]||(r[4]=(0,V.createElementVNode)("a",{class:"disclaimerLink",href:"https://scalar.com/legal/privacy-policy",target:"_blank"}," Privacy Policy",-1)),r[5]||(r[5]=(0,V.createTextVNode)(". ",-1))])]))}}),[["__scopeId","data-v-1fbb0eb5"]]),l0={class:"wrapper"},l1=i0((0,V.defineComponent)({__name:"Layout",emits:["submit","uploadApi"],setup(e,{emit:t}){let{chat:a}=iM();return(e,r)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",l0,[(0,V.unref)(a).messages.length&&((0,V.unref)(a).messages.length>1||"submitted"!==(0,V.unref)(a).status)?((0,V.openBlock)(),(0,V.createBlock)(lK,{key:0,onSubmit:r[0]||(r[0]=e=>t("submit")),onUploadApi:r[1]||(r[1]=e=>t("uploadApi"))})):((0,V.openBlock)(),(0,V.createBlock)(lQ,{key:1,onSubmit:r[2]||(r[2]=e=>t("submit")),onUploadApi:r[3]||(r[3]=e=>t("uploadApi"))}))]))}}),[["__scopeId","data-v-f1eee0af"]]);var l3=a(99244);let l6={class:"overflow-x-auto"},l2={key:1,class:"text-c-1 flex h-auto w-full items-center gap-0.75 rounded-b-lg px-3 py-1.5 text-base leading-[20px] whitespace-nowrap"},l5={class:"overflow-x-auto"},l4=(0,V.defineComponent)({__name:"Selector",props:{selectedServer:{},servers:{},target:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:a}){let r=(0,V.computed)(()=>e.servers.map(e=>({id:e.url,label:e.url}))),n=(0,V.computed)(()=>e.selectedServer?.url?.replace(/\/$/,"")||""),s=(0,V.computed)(()=>r.value.find(t=>t.id===e.selectedServer?.url));return t({servers:e.servers,serverUrlWithoutTrailingSlash:n,serverOptions:r,selectedServer:e.selectedServer}),(t,i)=>r.value.length>1?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.cy),{key:0,ref:"elem",class:"group",modelValue:s.value,options:r.value,placement:"bottom-start",resize:"",target:e.target,"onUpdate:modelValue":i[0]||(i[0]=e=>a("update:modelValue",e.id))},{default:(0,V.withCtx)(()=>[(0,V.createVNode)((0,V.unref)(nI.RO),{class:"bg-b-1 text-c-1 h-auto w-full justify-start gap-1.5 overflow-x-auto rounded-t-none rounded-b-xl px-3 py-1.5 text-base font-normal whitespace-nowrap -outline-offset-1",variant:"ghost"},{default:(0,V.withCtx)(()=>[i[1]||(i[1]=(0,V.createElementVNode)("span",{class:"sr-only"},"Server:",-1)),(0,V.createElementVNode)("span",l6,(0,V.toDisplayString)(n.value||"Select a server"),1),(0,V.createVNode)((0,V.unref)(iQ.zqX),{class:"text-c-2 ui-open:rotate-180 mt-0.25 size-3 transition-transform duration-100",weight:"bold"})]),_:1})]),_:1},8,["modelValue","options","target"])):((0,V.openBlock)(),(0,V.createElementBlock)("div",l2,[i[2]||(i[2]=(0,V.createElementVNode)("span",{class:"sr-only"},"Server:",-1)),(0,V.createElementVNode)("span",l5,(0,V.toDisplayString)(n.value),1)]))}}),l7=["id"],l9=(0,V.defineComponent)({__name:"ServerSelector",props:{eventBus:{},selectedServer:{},servers:{}},setup(e){let t=(0,V.useId)(),a=t=>{e.eventBus.emit("server:update:selected",{url:e.selectedServer?.url===t?"":t})},r=(t,a)=>{let r=e.servers.findIndex(t=>t.url===e.selectedServer?.url);-1!==r&&e.eventBus.emit("server:update:variables",{index:r,key:t,value:a})};return(n,s)=>((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,null,[s[0]||(s[0]=(0,V.createElementVNode)("label",{class:"bg-b-2 flex h-8 items-center rounded-t-xl border border-b-0 px-3 py-2.5 font-medium"}," Server ",-1)),(0,V.createElementVNode)("div",{id:(0,V.unref)(t),class:(0,V.normalizeClass)(["border",{"rounded-b-xl":!e.selectedServer?.description&&!e.selectedServer?.variables}])},[e.servers.length?((0,V.openBlock)(),(0,V.createBlock)(l4,{key:0,selectedServer:e.selectedServer,servers:e.servers,target:(0,V.unref)(t),"onUpdate:modelValue":a},null,8,["selectedServer","servers","target"])):(0,V.createCommentVNode)("",!0)],10,l7),(0,V.createVNode)((0,V.unref)(l3.f$),{layout:"reference",variables:e.selectedServer?.variables,"onUpdate:variable":r},null,8,["variables"]),e.selectedServer?.description?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.mi),{key:0,class:"text-c-3 rounded-b-xl border border-t-0 px-3 py-1.5",value:e.selectedServer.description},null,8,["value"])):(0,V.createCommentVNode)("",!0)],64))}}),l8={class:"docSettings"},ue=i0((0,V.defineComponent)({__name:"DocSettings",props:{document:{},name:{}},setup(e){let{workspaceStore:t,config:a,eventBus:r}=iM(),n=(0,V.computed)(()=>(0,nM.O)(t,e.document)),s=(0,V.computed)(()=>{let t=(0,nM.V)(e.document.servers,{documentUrl:e.document["x-scalar-original-source-url"]});return(0,n$.rd)(e.document,t)}),i=(0,V.computed)(()=>e.document.components?.securitySchemes??{});return(o,l)=>((0,V.openBlock)(),(0,V.createElementBlock)("div",l8,[(0,V.createElementVNode)("div",null,[(0,V.createVNode)(i4,{authStore:(0,V.unref)(t).auth,document:e.document,environment:n.value,eventBus:(0,V.unref)(r),name:e.name,options:(0,V.unref)(a),securitySchemes:i.value,selectedServer:s.value},null,8,["authStore","document","environment","eventBus","name","options","securitySchemes","selectedServer"])]),(0,V.createElementVNode)("div",null,[(0,V.createVNode)(l9,{eventBus:(0,V.unref)(r),selectedServer:s.value,servers:e.document.servers??[]},null,8,["eventBus","selectedServer","servers"])])]))}}),[["__scopeId","data-v-2dfa823a"]]),ut={class:"settingsHeading"},ua={class:"documentList"},ur=["onClick"],un={key:0},us={key:1,class:"noDocuments"},ui={class:"proxyUrlContainer"},uo=i0((0,V.defineComponent)({__name:"Settings",props:{modalState:{}},setup(e){let{workspaceStore:t,proxyUrl:a}=iM();return(r,n)=>((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(nI.uT),{class:"settingsModal",state:e.modalState},{default:(0,V.withCtx)(()=>[(0,V.createElementVNode)("div",ut,[n[1]||(n[1]=(0,V.createElementVNode)("h1",null,"Settings",-1)),(0,V.createVNode)((0,V.unref)(nI.lV),{class:"colorToggle ml-auto"})]),(0,V.createElementVNode)("div",ua,[Object.entries((0,V.unref)(t).workspace.documents).length?((0,V.openBlock)(!0),(0,V.createElementBlock)(V.Fragment,{key:0},(0,V.renderList)(Object.entries((0,V.unref)(t).workspace.documents),([e,a])=>((0,V.openBlock)(),(0,V.createElementBlock)("div",{key:e,class:"document"},[(0,V.createElementVNode)("button",{class:(0,V.normalizeClass)(["documentName",{documentNameActive:(0,V.unref)(t).workspace.activeDocument===a}]),type:"button",onClick:a=>{t.update("x-scalar-active-document",e)}},[(0,V.createTextVNode)(" @"+(0,V.toDisplayString)(e)+" ",1),(0,V.unref)(t).workspace.activeDocument===a?((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.zqX),{key:0})):((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(iQ.TA3),{key:1}))],10,ur),(0,V.unref)(t).workspace.activeDocument===a?((0,V.openBlock)(),(0,V.createElementBlock)("div",un,[(0,V.createVNode)(ue,{document:a,name:e},null,8,["document","name"])])):(0,V.createCommentVNode)("",!0)]))),128)):((0,V.openBlock)(),(0,V.createElementBlock)("div",us," No APIs selected. Use + to add context. "))]),(0,V.createElementVNode)("div",ui,[n[2]||(n[2]=(0,V.createElementVNode)("label",{for:"proxyUrl"},"Proxy URL",-1)),(0,V.createVNode)((0,V.unref)(nI.SB),{id:"proxyUrl",modelValue:(0,V.unref)(a),"onUpdate:modelValue":n[0]||(n[0]=e=>(0,V.isRef)(a)?a.value=e:null),placeholder:"https://proxy.scalar.com"},null,8,["modelValue"])])]),_:1},8,["state"]))}}),[["__scopeId","data-v-745651bc"]]),ul={ref:"clientModal"},uu=(0,V.defineComponent)({__name:"Chat",emits:["uploadApi"],setup(e){let{chat:t,prompt:a,settingsModal:r,eventBus:n,workspaceStore:s,config:i,mode:o,addDocument:l}=iM(),u=(0,V.useTemplateRef)("clientModal"),c=(0,V.ref)(null);async function d(){await t.sendMessage({text:a.value})}return(0,V.onMounted)(async()=>{let e=function(){let e=localStorage.getItem(iY);if(e)return iJ({namespace:iU(),slug:iU()}).parse(JSON.parse(e))}();"preview"===o&&e&&await l({namespace:e.namespace,slug:e.slug,removable:!1}),u.value&&(c.value=(0,Z.pA)({el:u.value,options:i,eventBus:n,workspaceStore:s}))}),(0,V.onBeforeUnmount)(()=>{c.value?.app.unmount()}),function(){let e=iM();(0,V.watch)([()=>e.chat.status,()=>(function(e){let t=e?.parts.at(-1);if(t&&"text"===t.type)return t.text})(e.chat.lastMessage)],async()=>{await (0,V.nextTick)(),window.scrollTo(0,document.body.scrollHeight)})}(),function(){let{api:e,addDocument:t,mode:a,getAgentKey:r}=iM(),{toast:n}=(0,D.Yf)();(0,V.onMounted)(async()=>{if("full"!==a||!r)return;let s=await e.getKeyDocuments();if(!s.success){n("Unable to fetch registry documents for the provided key","error");return}s.data.documents.forEach(({namespace:e,slug:a})=>t({namespace:e,slug:a,removable:!1}))})}(),function(){let{api:e,curatedDocuments:t}=iM();(0,V.onMounted)(async()=>{let a=await e.getCuratedDocuments();a.success&&(t.value=a.data.results)})}(),(e,t)=>((0,V.openBlock)(),(0,V.createElementBlock)(V.Fragment,null,[(0,V.createElementVNode)("div",ul,null,512),(0,V.createVNode)(l1,{onSubmit:d,onUploadApi:t[0]||(t[0]=t=>e.$emit("uploadApi"))}),(0,V.createVNode)(uo,{modalState:(0,V.unref)(r)},null,8,["modalState"])],64))}}),uc=(0,V.defineComponent)({__name:"App",props:{registryDocuments:{},registryUrl:{},dashboardUrl:{},baseUrl:{},mode:{default:"full"},getAccessToken:{type:Function},getAgentKey:{type:Function},getActiveDocumentJson:{type:Function},isLoggedIn:{},prefilledMessage:{}},emits:["uploadApi"],setup(e,{expose:t}){let a=function({initialRegistryDocuments:e,registryUrl:t,dashboardUrl:a,baseUrl:r,mode:n,isLoggedIn:s,getAccessToken:i,getAgentKey:o,getActiveDocumentJson:l,prefilledMessageRef:u}){let c=(0,V.ref)(u?.value??""),d=(0,V.ref)([]),p=(0,V.reactive)({}),m=(0,V.ref)([]),h=(0,V.ref)("https://proxy.scalar.com"),f=(0,V.ref)(),v=function(){let e=(0,V.ref)(!1);return(0,V.onMounted)(()=>{e.value="true"===localStorage.getItem(iA)}),{accepted:e,accept:function(){e.value=!0,localStorage.setItem(iA,"true")}}}(),g=(0,nN.Mf)(),y=(0,nA.P)({plugins:[iB({persistAuth:!0})]}),b=(0,V.computed)(()=>nT.Ze.parse({proxyUrl:h.value,persistAuth:!0})),_=function({registryDocuments:e,workspaceStore:t,baseUrl:a,getAccessToken:r,getAgentKey:n}){let s=new nS({sendAutomaticallyWhen:nE,transport:new nx({api:nq(`${a}/vector/openapi/chat`),headers:()=>nW({getAccessToken:r,getAgentKey:n}),body:()=>({registryDocuments:e.value,documentSettings:nL(t)})}),async onToolCall({toolCall:e}){e.dynamic||e.toolName===iE&&"get"===e.input.method.toLowerCase()&&await iT({documentSettings:nL(t),input:e.input,toolCallId:e.toolCallId,chat:s})}});return s}({registryDocuments:d,workspaceStore:y,baseUrl:r,getAccessToken:i,getAgentKey:o}),k=function({baseUrl:e,getAccessToken:t,getAgentKey:a}){let r=nB.safeFn(async({path:r,method:n="get",query:s,body:i,responseSchema:o})=>{let l=`${e}${r}${s?`?${new URLSearchParams(s)}`:""}`,u=await nB.fromUnsafe(async()=>fetch(nq(l),{method:n,...i&&{body:JSON.stringify(i)},headers:{...nW({getAccessToken:t,getAgentKey:a})}}),e=>nj("FAILED_TO_FETCH",e));if(!u.success)return u;let c=await nB.fromUnsafe(async()=>u.data.json(),e=>nj("FAILED_TO_FETCH_DATA",e));if(!c.success)return{success:!1,error:nj("UNKNOWN_ERROR","Unknown error occurred. Please contact support.")};if(!u.data.ok){let e=nO.Ay$.object({message:nO.Ay$.string(),code:nO.Ay$.string()}).safeParse(c.data);return e.success?{success:!1,error:nj(e.data.code,e.data.message)}:{success:!1,error:nj("UNKNOWN_ERROR","Unknown error occurred. Please contact support.")}}let d=o.safeParse(c.data);return d.success?{success:!0,data:d.data}:{success:!1,error:nj("INVALID_RESPONSE","Invalid response. Please contact support")}});return{search:async e=>r({path:"/vector/registry/search",query:{query:e},responseSchema:nO.Ay$.object({results:nR.array()})}),getDocument:async e=>r({path:`/vector/registry/document/${e.namespace}/${e.slug}`,responseSchema:nR}),getKeyDocuments:async()=>r({path:"/vector/registry/documents",responseSchema:nO.Ay$.object({documents:nR.array()})}),getCuratedDocuments:async()=>r({path:"/vector/registry/curated",responseSchema:nO.Ay$.object({results:nR.array()})})}}({baseUrl:r,getAccessToken:i,getAgentKey:o}),x=(0,V.computed)(()=>"submitted"===_.status||"streaming"===_.status&&!_.lastMessage?.parts.some(e=>"text"===e.type));(0,V.watch)(()=>_.status,()=>{"streaming"===_.status&&(c.value="")}),u&&(0,V.watch)(u,async e=>{e&&(c.value=e,v.accepted.value&&await _.sendMessage({text:c.value}))});let w=(0,nI.hS)();async function E({namespace:e,slug:a,removable:r=!0}){if(d.value.find(t=>t.namespace===e&&t.slug===a))return;let n=`@${e}/${a}`;p[n]=!0;let s=await iR({namespace:e,slug:a,workspaceStore:y,registryUrl:t,registryDocuments:d,config:b.value,api:k,removable:r});if(p[n]=!1,!s.success)throw console.warn("[AGENT]: Unable to load document",s.error),i$(`Unable to load the document @${e}/${a}`,"warn"),s.error}async function C({namespace:e,slug:a,removable:n=!0}){if(d.value.find(t=>t.namespace===e&&t.slug===a))return;let s=`@${e}/${a}`;p[s]=!0;let i=await nB.fromUnsafe(()=>fetch(nq(`${r}/vector/registry/embeddings/${e}/${a}`),{method:"GET"}),e=>nj("FAILED_TO_GET_EMBEDDING_STATUS",e));if(i.success&&i.data.ok){let r=await iR({namespace:e,slug:a,workspaceStore:y,registryUrl:t,registryDocuments:d,config:b.value,api:k,removable:n});r.success||(console.warn("[AGENT]: Unable to load document",r.error),i$(`Unable to load the document @${e}/${a}`,"warn"))}else console.warn("[AGENT]: Document could not be embedded"),i$(`Unable to embed the document @${e}/${a}`,"warn");p[s]=!1}return e.forEach(({namespace:e,slug:t})=>E({namespace:e,slug:t,removable:!1})),{prompt:c,chat:_,workspaceStore:y,eventBus:g,loading:x,settingsModal:w,config:b,registryUrl:t,dashboardUrl:a,baseUrl:r,registryDocuments:d,pendingDocuments:p,proxyUrl:h,mode:n,terms:v,isLoggedIn:s,addDocument:E,addDocumentAsync:C,removeDocument:function({namespace:e,slug:t}){d.value=d.value.filter(a=>!(a.namespace===e&&a.slug===t)),y.deleteDocument(iw(e,t))},getAccessToken:i,getAgentKey:o,api:k,uploadedTmpDocumentUrl:f,curatedDocuments:m,getActiveDocumentJson:l}}({getActiveDocumentJson:e.getActiveDocumentJson,initialRegistryDocuments:e.registryDocuments,prefilledMessageRef:e.prefilledMessage,registryUrl:e.registryUrl,baseUrl:e.baseUrl,mode:e.mode,getAccessToken:e.getAccessToken,getAgentKey:e.getAgentKey,isLoggedIn:e.isLoggedIn,dashboardUrl:e.dashboardUrl});return(0,V.provide)(iP,a),t({addDocumentAsync:a.addDocumentAsync}),(e,t)=>((0,V.openBlock)(),(0,V.createBlock)(uu,{onUploadApi:t[0]||(t[0]=t=>e.$emit("uploadApi"))}))}});var ud=a(50472);let up=(0,V.defineComponent)({__name:"AgentScalarChatInterface",props:{agentScalarConfiguration:{},workspaceStore:{},prefilledMessage:{}},setup:e=>(t,a)=>((0,V.openBlock)(),(0,V.createBlock)((0,V.unref)(uc),{baseUrl:(0,V.unref)(ud.JR),dashboardUrl:(0,V.unref)(ud.$h),getActiveDocumentJson:()=>e.workspaceStore.exportActiveDocument("json"),getAgentKey:e.agentScalarConfiguration?.key?()=>e.agentScalarConfiguration?.key??"":void 0,mode:e.agentScalarConfiguration?.key?"full":"preview",prefilledMessage:e.prefilledMessage,registryDocuments:[],registryUrl:(0,V.unref)(ud.W6)},null,8,["baseUrl","dashboardUrl","getActiveDocumentJson","getAgentKey","mode","prefilledMessage","registryUrl"]))})}};