"use strict";exports.id=8659,exports.ids=[8659],exports.modules={43378:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(16712),o=t(7647);let n={key:0,class:"text-c-2 text-sm leading-normal text-pretty"},r=(0,a.defineComponent)({__name:"DeleteSidebarListElement",props:{variableName:{},warningMessage:{}},emits:["close","delete"],setup(e,{emit:l}){let t=(0,a.computed)(()=>e.variableName.length>18?e.variableName.slice(0,18)+"â€¦":e.variableName);return(r,i)=>((0,a.openBlock)(),(0,a.createBlock)(o.A,{danger:"",label:`Delete ${t.value}`,onCancel:i[0]||(i[0]=e=>l("close")),onSubmit:i[1]||(i[1]=e=>l("delete"))},{default:(0,a.withCtx)(()=>[e.warningMessage?((0,a.openBlock)(),(0,a.createElementBlock)("p",n,(0,a.toDisplayString)(e.warningMessage),1)):(0,a.createCommentVNode)("",!0)]),_:1},8,["label"]))}})},17445:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(16712),o=t(4081),n=t(7647);let r=(0,a.defineComponent)({__name:"EditSidebarListElement",props:{name:{}},emits:["close","edit"],setup(e,{emit:l}){let t=(0,a.ref)(e.name);return(e,r)=>((0,a.openBlock)(),(0,a.createBlock)(n.A,{onCancel:r[1]||(r[1]=e=>l("close")),onSubmit:r[2]||(r[2]=e=>l("edit",t.value))},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(o.SB),{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value=e),autofocus:""},null,8,["modelValue"])]),_:1}))}})},7647:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(16712),o=t(4081);let n={class:"flex justify-between gap-10"},r=(0,a.defineComponent)({__name:"SidebarListElementForm",props:{danger:{type:Boolean},label:{}},emits:["cancel","submit"],setup:(e,{emit:l})=>(t,r)=>((0,a.openBlock)(),(0,a.createElementBlock)("form",{class:"flex flex-col gap-4 text-base",onSubmit:r[1]||(r[1]=(0,a.withModifiers)(e=>l("submit"),["prevent"]))},[(0,a.renderSlot)(t.$slots,"default"),(0,a.createElementVNode)("div",n,[(0,a.createVNode)((0,a.unref)(o.RO),{size:"sm",type:"button",variant:"outlined",onClick:r[0]||(r[0]=e=>l("cancel"))},{default:(0,a.withCtx)(()=>[...r[2]||(r[2]=[(0,a.createTextVNode)(" Cancel ",-1)])]),_:1}),(0,a.createVNode)((0,a.unref)(o.RO),{"data-testid":"sidebar-list-element-form-submit-button",size:"sm",type:"submit",variant:e.danger?"danger":"solid"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.label??"Save"),1)]),_:1},8,["variant"])])],32))})},48659:(e,l,t)=>{t.r(l),t.d(l,{default:()=>_});var a=t(16712),o=t(4081),n=t(2880),r=t(19919),i=t(43378),c=t(17445),s=t(56442),u=t(18647),d=t(31054),v=t(14802),m=t(61309),f=t(33745),p=t(73716),k=t(56025),h=t(68598);let b=(0,a.defineComponent)({__name:"EnvironmentForm",props:{collection:{},environment:{},workspace:{},envVariables:{}},setup(e){let{collectionMutators:l}=(0,h.hA)(),t=(0,a.ref)([]),n=(0,a.ref)(new Set),i=(0,a.ref)(new Map),c=(0,a.ref)(!1),s=(0,a.computed)(()=>{if(!e.environment?.value)return[{key:"",value:""}];try{let l=JSON.parse(e.environment.value),t=Object.entries(l).map(([e,l])=>({key:e,value:String(l)}));return 0===t.length?[{key:"",value:""}]:t}catch{return[{key:"",value:""}]}}),u=(0,a.computed)(()=>{let e=t.value[t.value.length-1];return e?e.key||e.value?[...t.value,{key:"",value:""}]:t.value:[{key:"",value:""}]}),d=(0,a.computed)(()=>{let e=new Map;return t.value.forEach((l,t)=>{if(l.key){let a=e.get(l.key)||[];a.push(t),e.set(l.key,a)}}),i.value.forEach((l,t)=>{if(l){let a=e.get(l)||[];a.push(t),e.set(l,a)}}),Array.from(e.values()).filter(e=>e.length>1).flat()});(0,a.watch)(s,e=>{t.value=[...e],n.value=new Set(e.map(e=>e.key).filter(Boolean))},{immediate:!0});let b=async(o,r,s)=>{if(!c.value){if("key"===r){i.value.set(o,s);let e=new Set(n.value),l=t.value[o];if(l&&e.delete(l.key),e.has(s))return}c.value=!0;try{let c=[...t.value],u=c[o];if(!u)return;c[o]={key:"key"===r?s:u.key,value:"value"===r?s:u.value},c[o].key||c[o].value||o===c.length-1||c.splice(o,1);let d=c.reduce((e,{key:l,value:t})=>((l||t)&&(e[l]=t),e),{});if(e.collection){let t={...e.collection["x-scalar-environments"],[e.environment.name]:{...e.collection["x-scalar-environments"]?.[e.environment.name],variables:d}};await l.edit(e.collection.uid,"x-scalar-environments",t)}if(o===t.value.length-1){let e=c[c.length-1];e&&(e.key||e.value)&&await x()}await (0,a.nextTick)(),t.value=c,"key"===r&&(n.value=new Set(c.map(e=>e.key).filter(Boolean)),i.value.delete(o))}finally{c.value=!1}}},x=async()=>{if(!c.value){c.value=!0;try{let o=[...t.value,{key:"",value:""}],n=o.reduce((e,{key:l,value:t})=>((l||t)&&(e[l]=t),e),{});if(e.collection){let t={...e.collection["x-scalar-environments"],[e.environment.name]:{...e.collection["x-scalar-environments"]?.[e.environment.name],variables:n}};await l.edit(e.collection.uid,"x-scalar-environments",t)}await (0,a.nextTick)(),t.value=o}finally{c.value=!1}}},g=async o=>{if(!c.value){c.value=!0;try{let n=[...t.value];n.splice(o,1);let r=n.reduce((e,{key:l,value:t})=>((l||t)&&(e[l]=t),e),{});if(e.collection){let t={...e.collection["x-scalar-environments"],[e.environment.name]:{...e.collection["x-scalar-environments"]?.[e.environment.name],variables:r}};await l.edit(e.collection.uid,"x-scalar-environments",t)}await (0,a.nextTick)(),t.value=n}finally{c.value=!1}}},C=async()=>{if(0===t.value.length)await x();else if(t.value.length>=1){let e=t.value[t.value.length-1];e&&(e.key||e.value)&&await x()}};return(0,a.onMounted)(()=>{C()}),(0,a.watch)(()=>t.value,()=>{C()}),(l,t)=>((0,a.openBlock)(),(0,a.createBlock)(m.A,{class:"group/table flex-1",columns:["",""]},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(k.A,{class:"sr-only !block"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p.A,null,{default:(0,a.withCtx)(()=>[...t[0]||(t[0]=[(0,a.createTextVNode)("Key",-1)])]),_:1}),(0,a.createVNode)(p.A,null,{default:(0,a.withCtx)(()=>[...t[1]||(t[1]=[(0,a.createTextVNode)("Value",-1)])]),_:1})]),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(u.value,(l,t)=>((0,a.openBlock)(),(0,a.createBlock)(k.A,{key:t,class:(0,a.normalizeClass)({error:d.value.includes(t)})},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f.A,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v.A,{disableCloseBrackets:"",disableEnter:"",disableTabIndent:"",lineWrapping:"",environment:e.environment,envVariables:e.envVariables,modelValue:l.key,placeholder:"Key",workspace:e.workspace,"onUpdate:modelValue":e=>b(t,"key",e)},(0,a.createSlots)({_:2},[d.value.includes(t)?{name:"icon",fn:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(r.aQ8),{class:"text-red mr-0.75 size-3.5 brightness-[.9]"})]),key:"0"}:void 0]),1032,["environment","envVariables","modelValue","workspace","onUpdate:modelValue"])]),_:2},1024),(0,a.createVNode)(f.A,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v.A,{class:"pr-6 group-hover:pr-10 group-has-[.cm-focused]:pr-10",disableCloseBrackets:"",disableEnter:"",disableTabIndent:"",lineWrapping:"",environment:e.environment,envVariables:e.envVariables,modelValue:l.value,placeholder:"Value",workspace:e.workspace,"onUpdate:modelValue":e=>b(t,"value",e)},{icon:(0,a.withCtx)(()=>[l.key||l.value?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RO),{key:0,class:"text-c-2 hover:text-c-1 hover:bg-b-2 z-context hidden h-fit rounded p-1 group-hover:flex group-has-[.cm-focused]:flex",size:"sm",variant:"ghost",onClick:(0,a.withModifiers)(e=>g(t),["stop"])},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(r.QIv),{class:"size-3.5"})]),_:1},8,["onClick"])):(0,a.createCommentVNode)("",!0)]),_:2},1032,["environment","envVariables","modelValue","workspace","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}))}}),x=(0,t(74817).A)(b,[["__scopeId","data-v-83bfcc8a"]]);var g=t(58859);let C={class:"flex h-full w-full flex-col gap-12 px-1.5 pt-8"},y={class:"flex flex-col gap-4"},V={class:"rounded-lg border"},w={class:"bg-b-2 flex cursor-grab items-center justify-between rounded-t-lg px-1 py-1 text-sm"},N={class:"flex items-center"},E=["onClick"],B={class:"text-c-3 flex h-full items-center justify-center rounded-lg border p-4"},_=(0,a.defineComponent)({__name:"CollectionEnvironment",setup(e){let{activeCollection:l,activeWorkspace:t,activeEnvVariables:v}=(0,g.JC)(),{collectionMutators:m}=(0,h.hA)(),f=(0,o.hS)(),p=(0,o.hS)(),k=(0,o.hS)(),b=(0,o.hS)(),_=(0,a.ref)(""),F=(0,a.ref)(null),S=(0,a.ref)(void 0),A=(0,a.computed)(()=>l.value?.["x-scalar-environments"]?Object.entries(l.value["x-scalar-environments"]).map(([e,l])=>({uid:e,name:e,value:JSON.stringify(l.variables||{}),color:l.color||"#FFFFFF"})):[]),z=()=>{l.value?.uid&&F.value&&(m.removeEnvironment(F.value,l.value.uid),p.hide())},D=e=>{F.value=e,p.show()},I=e=>{l.value?.uid&&(m.addEnvironment(e.name,{variables:{},color:e.color},l.value.uid),k.hide())},T=e=>{F.value=e.name,_.value=e.color||"#FFFFFF",f.show()},M=e=>{if(!l.value?.uid||!F.value)return;let t={...l.value["x-scalar-environments"],[F.value]:{variables:l.value["x-scalar-environments"]?.[F.value]?.variables||{},color:e}};m.edit(l.value.uid,"x-scalar-environments",t),f.hide()},O=e=>{F.value=e,S.value=e,b.show()},j=()=>{F.value=null,S.value=void 0,b.hide()},U=e=>{if(!l.value?.uid||!F.value)return;let t={...l.value["x-scalar-environments"]};if(!t[F.value])return;let a={},o=Object.entries(t),n=o.findIndex(([e])=>e===F.value);o.forEach(([l,t],o)=>{o===n?a[e]=t:a[l]=t}),m.edit(l.value.uid,"x-scalar-environments",a),F.value=null,S.value=void 0,b.hide()},L=(e,t)=>{if(!l.value?.uid)return;let a={...l.value["x-scalar-environments"]},o={},n=Object.entries(a),r=n.findIndex(([l])=>l===e.id),i=n.findIndex(([e])=>e===t.id);if(-1===r||-1===i)return;let c=n[r];c&&(n.splice(r,1),n.splice(i,0,c),n.forEach(([e,l])=>{o[e]=l}),m.edit(l.value.uid,"x-scalar-environments",o))};return(e,m)=>((0,a.openBlock)(),(0,a.createBlock)(s.A,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",C,[(0,a.createElementVNode)("div",y,[m[5]||(m[5]=(0,a.createElementVNode)("div",{class:"flex items-start justify-between gap-2"},[(0,a.createElementVNode)("div",{class:"flex flex-col gap-2"},[(0,a.createElementVNode)("div",{class:"flex h-8 items-center"},[(0,a.createElementVNode)("h3",{class:"font-bold"},"Environment Variables")]),(0,a.createElementVNode)("p",{class:"text-sm"},[(0,a.createTextVNode)(" Set environment variables at your collection level. Use "),(0,a.createElementVNode)("code",{class:"font-code text-c-2"},"{{ variable }}"),(0,a.createTextVNode)(" to add / search among the selected environment's variables in your request inputs. ")])])],-1)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(A.value,e=>((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(n.s),{key:e.name,id:e.name,isDraggable:!0,isDroppable:!0,parentIds:[],onOnDragEnd:L},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",V,[(0,a.createElementVNode)("div",w,[(0,a.createElementVNode)("div",N,[(0,a.createVNode)((0,a.unref)(o.RO),{class:"hover:bg-b-3 flex h-6 w-6 p-1",onClick:l=>T(e),variant:"ghost"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("span",{style:(0,a.normalizeStyle)({backgroundColor:e.color||"#FFFFFF"}),class:"h-2.5 w-2.5 rounded-full"},null,4)]),_:2},1032,["onClick"]),(0,a.createElementVNode)("button",{class:"hover:bg-b-3 rounded px-1 py-0.5 text-sm",onClick:l=>O(e.name)},(0,a.toDisplayString)(e.name),9,E)]),(0,a.createVNode)((0,a.unref)(o.RO),{class:"hover:bg-b-3 hover:text-c-1 h-fit p-1.25",variant:"ghost",onClick:l=>D(e.name)},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(r.QIv),{class:"size-3.5"})]),_:1},8,["onClick"])]),(0,a.unref)(l)&&(0,a.unref)(t)?((0,a.openBlock)(),(0,a.createBlock)(x,{key:0,collection:(0,a.unref)(l),environment:e,envVariables:(0,a.unref)(v),workspace:(0,a.unref)(t)},null,8,["collection","environment","envVariables","workspace"])):(0,a.createCommentVNode)("",!0)])]),_:2},1032,["id"]))),128)),(0,a.createElementVNode)("div",B,[(0,a.createVNode)((0,a.unref)(o.RO),{class:"hover:bg-b-2 hover:text-c-1 flex items-center gap-2",size:"sm",variant:"ghost",onClick:m[0]||(m[0]=e=>(0,a.unref)(k).show())},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(o.kv),{class:"inline-flex",icon:"Add",size:"sm",thickness:"1.5"}),m[4]||(m[4]=(0,a.createElementVNode)("span",null,"Add Environment",-1))]),_:1})])]),(0,a.createVNode)((0,a.unref)(o.uT),{size:"xxs",state:(0,a.unref)(p),title:`Delete ${F.value||"Environment"}`},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(i.A,{variableName:"Environment",warningMessage:"Are you sure you want to delete this environment? This action cannot be undone.",onClose:m[1]||(m[1]=e=>(0,a.unref)(p).hide()),onDelete:z})]),_:1},8,["state","title"]),(0,a.createVNode)(d.A,{activeWorkspaceCollections:(0,a.unref)(l)?[(0,a.unref)(l)]:[],collectionId:a.unref(l)?.uid,state:(0,a.unref)(k),onCancel:m[2]||(m[2]=e=>(0,a.unref)(k).hide()),onSubmit:I},null,8,["activeWorkspaceCollections","collectionId","state"]),(0,a.createVNode)(u.A,{selectedColor:_.value,state:(0,a.unref)(f),onCancel:m[3]||(m[3]=e=>(0,a.unref)(f).hide()),onSubmit:M},null,8,["selectedColor","state"]),(0,a.createVNode)((0,a.unref)(o.uT),{size:"xxs",state:(0,a.unref)(b),title:`Edit ${F.value}`},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c.A,{name:S.value??"",onClose:j,onEdit:U},null,8,["name"])]),_:1},8,["state","title"])])]),_:1}))}})},18647:(e,l,t)=>{t.d(l,{A:()=>c});var a=t(16712),o=t(4081),n=t(7647),r=t(67899);let i={class:"flex flex-col gap-4"},c=(0,a.defineComponent)({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(e,{emit:l}){let t=(0,a.ref)(""),c=e=>{t.value=e},s=()=>{l("submit",t.value),t.value=""};return(u,d)=>((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.uT),{size:"xxs",state:e.state,title:"Edit Environment Color"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",i,[(0,a.createVNode)(r.A,{activeColor:t.value||e.selectedColor,class:"w-full p-1",onSelect:c},null,8,["activeColor"]),(0,a.createVNode)(n.A,{onCancel:d[0]||(d[0]=e=>l("cancel")),onSubmit:s})])]),_:1},8,["state"]))}})},67899:(e,l,t)=>{t.d(l,{A:()=>i});var a=t(16712),o=t(4081);let n=["onClick"],r=["placeholder"],i=(0,a.defineComponent)({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:l}){let t=(0,a.ref)(""),i=(0,a.ref)(null),c=(0,a.ref)(!1),s=(0,a.ref)(!1),u=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],d=(0,a.computed)(()=>e.activeColor&&!u.some(l=>l.color===e.activeColor)||t.value?`background-color: ${e.activeColor||t.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),v=()=>{c.value=!c.value,e.selector&&(s.value=!1),(0,a.nextTick)(()=>{i.value&&i.value.focus()})};(0,a.watch)(t,e=>{e&&!e.startsWith("#")&&(t.value=`#${e}`),c.value=!0});let m=()=>{e.selector&&(s.value=!s.value)},f=t=>{l("select",t),e.selector&&(s.value=!1)};return(l,p)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",null,[c.value?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[e.selector&&!s.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:(0,a.normalizeClass)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)({backgroundColor:e.activeColor}),onClick:m},[e.activeColor?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.kv),{key:0,class:(0,a.normalizeClass)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):(0,a.createCommentVNode)("",!0)],6)):(0,a.createCommentVNode)("",!0),s.value||!e.selector?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:(0,a.normalizeClass)(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",e.selector?"h-4":"min-h-10 min-w-[296px]"])},[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(u,l=>(0,a.createElementVNode)("div",{key:l.color,class:(0,a.normalizeClass)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)({backgroundColor:l.color}),onClick:e=>f(l.color)},[e.activeColor!==l.color||t.value?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.kv),{key:0,class:(0,a.normalizeClass)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"]))],14,n)),64)),p[2]||(p[2]=(0,a.createElementVNode)("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),(0,a.createElementVNode)("label",{class:(0,a.normalizeClass)(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)(d.value),onClick:v},[c.value||e.activeColor!==t.value&&(!e.activeColor||u.some(l=>l.color===e.activeColor))?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.kv),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"}))],6)],2)):(0,a.createCommentVNode)("",!0)],64)),c.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:(0,a.normalizeClass)(["color-selector flex flex-1 items-center gap-2 rounded",e.selector?"h-4":"min-h-10"])},[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(["absolute rounded-full border border-dashed",e.selector?"h-4 w-4":"h-5 w-5"])},null,2),(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(["z-[1] rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)(d.value)},null,6),(0,a.withDirectives)((0,a.createElementVNode)("input",{ref_key:"customColorInputRef",ref:i,"onUpdate:modelValue":p[0]||(p[0]=e=>t.value=e),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:p[1]||(p[1]=e=>f(t.value))},null,40,r),[[a.vModelText,t.value]]),(0,a.createElementVNode)("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:v},[(0,a.createVNode)((0,a.unref)(o.kv),{icon:"Checkmark",size:"xs"})])],2)):(0,a.createCommentVNode)("",!0)]))}})},31054:(e,l,t)=>{t.d(l,{A:()=>d});var a=t(16712),o=t(4081),n=t(16638),r=t(91653),i=t(29686),c=t(67899),s=t(68598);let u={class:"flex items-start gap-2"},d=(0,a.defineComponent)({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(e,{emit:l}){let{events:t}=(0,s.hA)(),d=(0,a.ref)(""),v=(0,a.ref)("#FFFFFF"),m=(0,a.computed)(()=>[...e.activeWorkspaceCollections.filter(e=>e.info?.title!=="Drafts").map(e=>({id:e.uid,label:e.info?.title??"Untitled Collection"}))]),f=(0,a.ref)(m.value.find(l=>l.id===e.collectionId)),{toast:p}=(0,n.Yf)(),k=e=>{v.value=e};(0,a.watch)(()=>e.state.open,l=>{l&&(d.value="",v.value="#FFFFFF",e.collectionId?f.value=m.value.find(l=>l.id===e.collectionId):f.value=void 0)});let h=()=>{if(!d.value.trim()){p("Please enter a name before adding an environment.","error");return}if(!f.value?.id){p("Please select a collection before adding an environment.","error");return}l("submit",{name:d.value,color:v.value,type:f.value?.id==="global"?"global":"collection",collectionId:f.value?.id!=="global"?f.value?.id:void 0})},b=()=>{e.state.hide(),t.commandPalette.emit({commandName:"Create Collection"})};return(t,n)=>((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.uT),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r.A,{disabled:!f.value||!d.value.trim(),onCancel:n[2]||(n[2]=e=>l("cancel")),onSubmit:h},{options:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(o.cy),{modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=e=>f.value=e),options:m.value,placeholder:"Select Type"},{default:(0,a.withCtx)(()=>[m.value.length>0?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RO),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(f.value?"text-c-1":"text-c-3")},(0,a.toDisplayString)(f.value?f.value.label:"Select Collection"),3),(0,a.createVNode)((0,a.unref)(o.kv),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RO),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:b},{default:(0,a.withCtx)(()=>[...n[3]||(n[3]=[(0,a.createElementVNode)("span",{class:"text-c-1"},"Create Collection",-1)])]),_:1}))]),_:1},8,["modelValue","options"])]),submit:(0,a.withCtx)(()=>[...n[4]||(n[4]=[(0,a.createTextVNode)(" Add Environment ",-1)])]),default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",u,[(0,a.createVNode)(c.A,{activeColor:v.value,class:"peer",selector:"",onSelect:k},null,8,["activeColor"]),(0,a.createVNode)(i.A,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}})},2880:(e,l,t)=>{t.d(l,{s:()=>c});var a=t(16712);let o=(0,a.ref)(null),n=(0,a.ref)(null),r=(e,l)=>{let t=!1;return(...a)=>{t||(e(...a),t=!0,setTimeout(()=>t=!1,l))}},i=["draggable"],c=((e,l)=>{let t=e.__vccOpts||e;for(let[e,a]of l)t[e]=a;return t})((0,a.defineComponent)({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(e,{expose:l,emit:t}){let c=(0,a.computed)(()=>e.parentIds.at(-1)??null),s=l=>{l.dataTransfer&&l.target instanceof HTMLElement&&e.isDraggable&&(l.target.classList.add("dragging"),l.dataTransfer.dropEffect="move",l.dataTransfer.effectAllowed="move",o.value={id:e.id,parentId:c.value},t("onDragStart",{id:e.id,parentId:c.value}))},u=l=>"function"==typeof e.isDroppable?e.isDroppable(o.value,{id:e.id,parentId:c.value,offset:l}):e.isDroppable,d=r(l=>{if(!o.value||o.value.id===e.id||e.parentIds.includes(o.value?.id??""))return;let t=n.value?.offset,a=l.target.offsetHeight,r=e.floor*a,i=e.ceiling*a,s=3;l.offsetY<=0&&t&&3!==t?s=t:l.offsetY<=r?s=0:l.offsetY>=i?s=1:l.offsetY>r&&l.offsetY<i&&(s=2),u(s)&&(n.value={id:e.id,parentId:c.value,offset:s})},25),v=["above","below","asChild"],m=(0,a.computed)(()=>{let l="sidebar-indent-nested";return e.id===n.value?.id&&(l+=` dragover-${v[n.value.offset]}`),l}),f=()=>{if(!n.value||!o.value)return;let e={...o.value},l={...n.value};o.value=null,n.value=null,document.querySelectorAll("div.dragging").forEach(e=>e.classList.remove("dragging")),e.id!==l.id&&t("onDragEnd",e,l)};return l({draggingItem:o,hoveredItem:n}),(e,l)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(m.value),draggable:e.isDraggable,onDragend:f,onDragover:l[0]||(l[0]=(0,a.withModifiers)((...e)=>(0,a.unref)(d)&&(0,a.unref)(d)(...e),["prevent","stop"])),onDragstart:(0,a.withModifiers)(s,["stop"])},[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)],42,i))}}),[["__scopeId","data-v-a89d6a6e"]])}};