exports.id=5003,exports.ids=[5003],exports.modules={31750:(e,t,r)=>{Promise.resolve().then(r.bind(r,21335)),Promise.resolve().then(r.bind(r,44994))},49902:(e,t,r)=>{Promise.resolve().then(r.bind(r,68771)),Promise.resolve().then(r.bind(r,76641))},24849:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(96331).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},12592:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(96331).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},68771:(e,t,r)=>{"use strict";r.d(t,{ContentViewer:()=>g});var s=r(45512),n=r(58009),i=r(64590),a=r(78447),o=r(39400),l=r(3271),d=r(24849),c=r(12592),u=r(28531),h=r.n(u),x=r(91542);function m(e){return e.startsWith("image/")}function p(e){return e.startsWith("video/")}function f(e){return e.startsWith("audio/")}function j(e){return"application/pdf"===e}function v(e){return"text/plain"===e||"text/csv"===e}function w({label:e,path:t,baseUrl:r}){let[i,a]=(0,n.useState)(!1),o=`${r}${t}`,u=(0,n.useCallback)(async()=>{try{await navigator.clipboard.writeText(o),a(!0),x.oR.success("Copied to clipboard"),setTimeout(()=>a(!1),2e3)}catch{x.oR.error("Failed to copy")}},[o]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("dt",{className:"text-muted-foreground",children:e}),(0,s.jsx)("dd",{children:(0,s.jsxs)(l.m_,{children:[(0,s.jsx)(l.k$,{asChild:!0,children:(0,s.jsxs)("button",{type:"button",onClick:u,className:"inline-flex items-center gap-1.5 text-primary hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-sm cursor-pointer text-left",children:[(0,s.jsx)("span",{className:"truncate max-w-64",children:t}),i?(0,s.jsx)(d.A,{className:"h-3.5 w-3.5 shrink-0 text-green-500","aria-hidden":"true"}):(0,s.jsx)(c.A,{className:"h-3.5 w-3.5 shrink-0 text-muted-foreground","aria-hidden":"true"})]})}),(0,s.jsx)(l.ZI,{children:i?"Copied!":`Copy ${o}`})]})})]})}function g({content:e,contentBaseUrl:t}){var r;let n=e.expiresAt&&new Date(e.expiresAt)<new Date,l=`${t}/r/${e.id}`,d=`${t}/api/content/${e.id}`,c=e.mimeType;return n?(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{children:"Content Expired"})}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("p",{className:"text-muted-foreground",children:["This content expired on ",new Date(e.expiresAt).toLocaleString()," and is no longer available."]})})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold truncate",children:e.filename}),(0,s.jsxs)("div",{className:"flex gap-2 shrink-0",children:[(0,s.jsx)(h(),{href:l,children:(0,s.jsx)(o.$,{variant:"outline",size:"sm",children:"Raw"})}),(0,s.jsx)(h(),{href:d,children:(0,s.jsx)(o.$,{size:"sm",children:"Download"})})]})]}),(0,s.jsx)(i.Zp,{children:(0,s.jsxs)(i.Wu,{className:"p-4",children:[m(c)&&(0,s.jsx)("img",{src:l,alt:e.filename,className:"max-w-full h-auto mx-auto rounded"}),p(c)&&(0,s.jsxs)("video",{controls:!0,className:"max-w-full mx-auto rounded","aria-label":`Video: ${e.filename}`,children:[(0,s.jsx)("source",{src:l,type:c}),"Your browser does not support this video format."]}),f(c)&&(0,s.jsxs)("audio",{controls:!0,className:"w-full","aria-label":`Audio: ${e.filename}`,children:[(0,s.jsx)("source",{src:l,type:c}),"Your browser does not support this audio format."]}),j(c)&&(0,s.jsx)("iframe",{src:l,className:"w-full h-[80vh] rounded border-0",title:e.filename}),v(c)&&(0,s.jsx)("iframe",{src:l,className:"w-full h-[60vh] rounded border-0 bg-muted",title:e.filename}),!m(c)&&!p(c)&&!f(c)&&!j(c)&&!v(c)&&(0,s.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,s.jsxs)("p",{className:"text-muted-foreground",children:["This file type (",c,") cannot be previewed in the browser."]}),(0,s.jsx)(h(),{href:d,children:(0,s.jsx)(o.$,{children:"Download File"})})]})]})}),(0,s.jsx)(i.Zp,{children:(0,s.jsxs)(i.Wu,{children:[(0,s.jsx)("h2",{className:"sr-only",children:"File metadata"}),(0,s.jsxs)("dl",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Original Name"}),(0,s.jsx)("dd",{children:e.originalFilename}),(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Size"}),(0,s.jsx)("dd",{children:(r=e.fileSize)<1024?`${r} B`:r<1048576?`${(r/1024).toFixed(1)} KB`:`${(r/1048576).toFixed(1)} MB`}),(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Type"}),(0,s.jsx)("dd",{children:e.mimeType}),(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Extension"}),(0,s.jsx)("dd",{children:(0,s.jsx)(a.E,{variant:"secondary",children:e.fileExtension})}),(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Uploaded By"}),(0,s.jsx)("dd",{children:e.uploadedBy.username}),(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Created"}),(0,s.jsx)("dd",{children:new Date(e.createdAt).toLocaleString()}),(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Expires"}),(0,s.jsx)("dd",{children:e.expiresAt?new Date(e.expiresAt).toLocaleString():"Never"}),e.directory&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("dt",{className:"text-muted-foreground",children:"Directory"}),(0,s.jsx)("dd",{children:(0,s.jsx)(a.E,{variant:"outline",children:e.directory})})]})]})]})}),(0,s.jsx)(i.Zp,{children:(0,s.jsxs)(i.Wu,{children:[(0,s.jsx)("h2",{className:"sr-only",children:"URLs"}),(0,s.jsxs)("dl",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)(w,{label:"Content URL",path:`/c/${e.id}`,baseUrl:t}),(0,s.jsx)(w,{label:"Raw URL",path:`/r/${e.id}`,baseUrl:t}),e.shortSlugs.map(({slug:e})=>(0,s.jsx)(w,{label:"Short URL",path:`/s/${e}`,baseUrl:t},e)),e.shortSlugs.map(({slug:e})=>(0,s.jsx)(w,{label:"Embed URL",path:`/e/${e}`,baseUrl:t},`embed-${e}`))]})]})})]})}},64590:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>a});var s=r(45512);r(58009);var n=r(44195);function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function a({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function o({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",e),...t})}},21335:(e,t,r)=>{"use strict";r.d(t,{ContentViewer:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call ContentViewer() from the server but ContentViewer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/PartFiles/PartFiles/src/components/content-viewer.tsx","ContentViewer")},44994:(e,t,r)=>{"use strict";r.d(t,{Nav:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call Nav() from the server but Nav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/PartFiles/PartFiles/src/components/nav.tsx","Nav")},60809:(e,t,r)=>{"use strict";r.d(t,{j2:()=>m,Y9:()=>u});var s=r(57971),n=r(23352),i=r(34926),a=r(84908);let o={pages:{signIn:"/login"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.role=t.role),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id,e.user.role=t.role),e),authorized({auth:e,request:{nextUrl:t,headers:r}}){let s=e?.user?.role,n=!!e?.user&&!!s,i=t.pathname;if(i.startsWith("/login")||i.startsWith("/invite")||i.startsWith("/api/auth")||i.startsWith("/api/invite")||i.startsWith("/api/preview")||/^(\/api\/content\/[^/]+(\/raw)?)$/.test(i)||/^(\/(c|r|s|e)\/[^/]+)$/.test(i)||i.startsWith("/api/cron"))return!0;let a=function(e,t){let r=t.get("x-forwarded-host"),s=t.get("x-forwarded-proto")||"https";return r?`${s}://${r}`:e.origin}(t,r);if(!n){if(r.get("x-forwarded-host")){let e=new URL("/login",a);return e.searchParams.set("callbackUrl",t.pathname+t.search),Response.redirect(e)}return!1}return!((i.startsWith("/admin")||i.startsWith("/api/admin"))&&"admin"!==s||("/upload"===i||i.startsWith("/api/upload"))&&"admin"!==s&&"uploader"!==s)||Response.redirect(new URL("/dashboard",a))}},providers:[],session:{strategy:"jwt"}},l=new Map,d=Date.now();function c(){let e=Date.now();if(!(e-d<3e5))for(let[t,r]of(d=e,l))e>r.resetAt&&l.delete(t)}let{handlers:u,signIn:h,signOut:x,auth:m}=(0,s.Ay)({...o,callbacks:{...o.callbacks,async jwt({token:e,user:t}){if(t)return e.id=t.id,e.role=t.role,e.revalidatedAt=Date.now(),e;let r=e.revalidatedAt??0;if(Date.now()-r>3e5){let t=await a.z.user.findUnique({where:{id:e.id},select:{id:!0,role:!0}});if(!t)return e.id=void 0,e.role=void 0,e.revalidatedAt=void 0,e;e.role=t.role,e.revalidatedAt=Date.now()}return e}},providers:[(0,n.A)({name:"credentials",credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.username||!e?.password)return null;let t=e.username.toLowerCase(),r=e.password;if(function(e){c();let t=Date.now(),r=l.get(e);return!!r&&!(t>r.resetAt)&&r.failures>=5}(t))return null;let s=await a.z.user.findUnique({where:{username:t}});return s&&(0,i.Dm)(r,s.passwordHash)?(l.delete(t),{id:s.id,name:s.username,role:s.role}):(function(e){c();let t=Date.now(),r=l.get(e);!r||t>r.resetAt?l.set(e,{failures:1,resetAt:t+9e5}):(r.failures++,r.failures)}(t),null)}})]})},84908:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var s=r(96330),n=r(64981),i=r(33873),a=r.n(i);let o=globalThis.prisma??function(){let e=function(){let e=process.env.DATABASE_URL||"file:./dev.db";if(e.startsWith("file:")){let t=e.slice(5),r=a().resolve(process.cwd(),t);return`file:${r}`}return e}(),t=new n.C({url:e});return new s.PrismaClient({adapter:t})}()},99111:(e,t,r)=>{"use strict";function s(){return process.env.BASE_URL?process.env.BASE_URL.replace(/\/+$/,""):`http://localhost:${process.env.PORT||3e3}`}function n(){return process.env.CONTENT_URL?process.env.CONTENT_URL.replace(/\/+$/,""):s()}r.d(t,{$:()=>s,D:()=>n})}};