"use strict";exports.id=8817,exports.ids=[8817],exports.modules={43378:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(16712),o=l(7647);let n={key:0,class:"text-c-2 text-sm leading-normal text-pretty"},r=(0,a.defineComponent)({__name:"DeleteSidebarListElement",props:{variableName:{},warningMessage:{}},emits:["close","delete"],setup(e,{emit:t}){let l=(0,a.computed)(()=>e.variableName.length>18?e.variableName.slice(0,18)+"â€¦":e.variableName);return(r,i)=>((0,a.openBlock)(),(0,a.createBlock)(o.A,{danger:"",label:`Delete ${l.value}`,onCancel:i[0]||(i[0]=e=>t("close")),onSubmit:i[1]||(i[1]=e=>t("delete"))},{default:(0,a.withCtx)(()=>[e.warningMessage?((0,a.openBlock)(),(0,a.createElementBlock)("p",n,(0,a.toDisplayString)(e.warningMessage),1)):(0,a.createCommentVNode)("",!0)]),_:1},8,["label"]))}})},17445:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(16712),o=l(4081),n=l(7647);let r=(0,a.defineComponent)({__name:"EditSidebarListElement",props:{name:{}},emits:["close","edit"],setup(e,{emit:t}){let l=(0,a.ref)(e.name);return(e,r)=>((0,a.openBlock)(),(0,a.createBlock)(n.A,{onCancel:r[1]||(r[1]=e=>t("close")),onSubmit:r[2]||(r[2]=e=>t("edit",l.value))},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(o.SB),{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=e=>l.value=e),autofocus:""},null,8,["modelValue"])]),_:1}))}})},7647:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(16712),o=l(4081);let n={class:"flex justify-between gap-10"},r=(0,a.defineComponent)({__name:"SidebarListElementForm",props:{danger:{type:Boolean},label:{}},emits:["cancel","submit"],setup:(e,{emit:t})=>(l,r)=>((0,a.openBlock)(),(0,a.createElementBlock)("form",{class:"flex flex-col gap-4 text-base",onSubmit:r[1]||(r[1]=(0,a.withModifiers)(e=>t("submit"),["prevent"]))},[(0,a.renderSlot)(l.$slots,"default"),(0,a.createElementVNode)("div",n,[(0,a.createVNode)((0,a.unref)(o.RO),{size:"sm",type:"button",variant:"outlined",onClick:r[0]||(r[0]=e=>t("cancel"))},{default:(0,a.withCtx)(()=>[...r[2]||(r[2]=[(0,a.createTextVNode)(" Cancel ",-1)])]),_:1}),(0,a.createVNode)((0,a.unref)(o.RO),{"data-testid":"sidebar-list-element-form-submit-button",size:"sm",type:"submit",variant:e.danger?"danger":"solid"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.label??"Save"),1)]),_:1},8,["variant"])])],32))})},78406:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(16712),o=l(4081),n=l(41497);let r=(0,a.defineComponent)({__name:"SidebarButton",props:{click:{type:Function},hotkey:{}},setup(e){let{layout:t}=(0,n.g)(),l=()=>{e.click()};return(n,r)=>((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RO),{class:"bg-b-1 text-c-1 hover:bg-b-2 group relative h-auto w-auto border px-2 py-1 md:w-full md:p-1.5",variant:"outlined",onClick:l},{default:(0,a.withCtx)(()=>[(0,a.renderSlot)(n.$slots,"title"),e.hotkey&&"desktop"===(0,a.unref)(t)?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RH),{key:0,class:"text-c-2 add-item-hotkey absolute right-2 hidden group-hover:opacity-80 md:flex",hotkey:e.hotkey},null,8,["hotkey"])):(0,a.createCommentVNode)("",!0)]),_:3}))}})},47173:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(16712),o=l(74817);let n={class:"gap-1/2 flex flex-col px-3 pb-[75px]"},r=(0,o.A)({},[["render",function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("ul",n,[(0,a.renderSlot)(e.$slots,"default")])}]])},15977:(e,t,l)=>{l.d(t,{A:()=>v});var a=l(16712),o=l(4081),n=l(2880),r=l(77178),i=l(4434),c=l(43378);let s={class:"absolute right-1 flex opacity-0 group-hover:opacity-100"},u=(0,a.defineComponent)({__name:"SidebarListElementActions",props:{variable:{},warningMessage:{},isCopyable:{type:Boolean},isDeletable:{type:Boolean},isRenameable:{type:Boolean}},emits:["delete","rename"],setup(e,{emit:t}){let l=(0,a.ref)({action:"None",name:""}),n=(0,o.hS)(),{copyToClipboard:r}=(0,i.i)();function u(){n.hide(),l.value={action:"None",name:""}}return(i,d)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",s,[e.isCopyable?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,class:"text-c-3 hover:bg-b-3 hover:text-c-1 rounded p-[5px]",type:"button",onClick:d[0]||(d[0]=t=>(0,a.unref)(r)(e.variable.name))},[(0,a.createVNode)((0,a.unref)(o.kv),{class:"h-3 w-3",icon:"Clipboard"})])):(0,a.createCommentVNode)("",!0),e.isRenameable?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:1,class:"text-c-3 hover:bg-b-3 hover:text-c-1 rounded p-[5px]",type:"button",onClick:d[1]||(d[1]=l=>t("rename",e.variable.uid))},[(0,a.createVNode)((0,a.unref)(o.kv),{class:"h-3 w-3",icon:"Edit"})])):(0,a.createCommentVNode)("",!0),!e.variable.isDefault&&e.isDeletable?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:2,class:"text-c-3 hover:bg-b-3 hover:text-c-1 rounded p-1",type:"button",onClick:d[2]||(d[2]=(0,a.withModifiers)(t=>void(l.value={action:"Delete",name:e.variable.name},n.show()),["prevent"]))},[(0,a.createVNode)((0,a.unref)(o.kv),{class:"h-3.5 w-3.5",icon:"Close"})])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)((0,a.unref)(o.uT),{size:"sm",state:(0,a.unref)(n),title:`${l.value.action} ${l.value.name}`},{default:(0,a.withCtx)(()=>["Delete"===l.value.action?((0,a.openBlock)(),(0,a.createBlock)(c.A,{key:0,variableName:l.value.name,warningMessage:e.warningMessage,onClose:u,onDelete:d[3]||(d[3]=l=>{t("delete",e.variable.uid),u()})},null,8,["variableName","warningMessage"])):(0,a.createCommentVNode)("",!0)]),_:1},8,["state","title"])],64))}}),d={class:"empty-variable-name line-clamp-1 text-sm break-all group-hover:pr-5"},m=(0,a.defineComponent)({__name:"SidebarListElement",props:{variable:{},warningMessage:{},to:{},isDeletable:{type:Boolean},isCopyable:{type:Boolean},isRenameable:{type:Boolean},isDraggable:{type:Boolean,default:!1},isDroppable:{type:[Boolean,Function],default:!1},collectionId:{}},emits:["delete","colorModal","rename","onDragEnd"],setup(e,{emit:t}){let l=(0,r.rd)(),i=t=>{t.metaKey?window.open(l.resolve(e.to).href,"_blank"):l.push(e.to)},c=e=>{t("delete",e)},s=e=>{t("colorModal",e)},m=e=>{t("rename",e)},v=(0,a.ref)(null),p=(0,a.computed)(()=>({ceiling:.5,floor:.5}));return(t,l)=>{let r=(0,a.resolveComponent)("router-link");return(0,a.openBlock)(),(0,a.createElementBlock)("li",null,[(0,a.createVNode)((0,a.unref)(n.s),{id:e.variable.uid,ref_key:"_draggableRef",ref:v,ceiling:p.value.ceiling,floor:p.value.floor,isDraggable:e.isDraggable,isDroppable:e.isDroppable,parentIds:e.collectionId?[e.collectionId]:[],onOnDragEnd:l[2]||(l[2]=(...e)=>t.$emit("onDragEnd",...e))},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:(0,a.normalizeClass)(["text-c-2 hover:bg-b-2 group relative flex h-8 items-center gap-1.5 rounded py-1 pr-1.5 font-medium no-underline",[e.variable.color?"pl-5":"pl-1.5"]]),exactActiveClass:"bg-b-2 !text-c-1",role:"button",to:e.to,onClick:l[1]||(l[1]=(0,a.withModifiers)(e=>i(e),["prevent"]))},{default:(0,a.withCtx)(()=>[e.variable.color?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,class:"hover:bg-b-3 rounded p-1.5",type:"button",onClick:l[0]||(l[0]=t=>s(e.variable.uid))},[(0,a.createElementVNode)("div",{class:"h-2.5 w-2.5 rounded-xl",style:(0,a.normalizeStyle)({backgroundColor:e.variable.color})},null,4)])):(0,a.createCommentVNode)("",!0),e.variable.icon?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.kv),{key:1,class:"text-sidebar-c-2 size-3.5 stroke-[2.25]",icon:e.variable.icon},null,8,["icon"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("span",d,(0,a.toDisplayString)(e.variable.name),1),(0,a.createVNode)(u,{isCopyable:!!e.isCopyable,isDeletable:!!e.isDeletable,isRenameable:!!e.isRenameable,variable:{...e.variable,isDefault:e.variable.isDefault??!1},warningMessage:e.warningMessage,onDelete:c,onRename:m},null,8,["isCopyable","isDeletable","isRenameable","variable","warningMessage"])]),_:1},8,["class","to"])]),_:1},8,["id","ceiling","floor","isDraggable","isDroppable","parentIds"])])}}}),v=(0,l(74817).A)(m,[["__scopeId","data-v-298ba76d"]])},48817:(e,t,l)=>{l.r(t),l.d(t,{default:()=>V});var a=l(16712),o=l(4081),n=l(50978),r=l(16638),i=l(77178),c=l(14802),s=l(17445),u=l(19914),d=l(78406),m=l(47173),v=l(15977),p=l(11953),f=l(84128),b=l(56442),k=l(86327),g=l(18469),x=l(58859),C=l(18647),h=l(31054),y=l(68598);let w={class:"flex-1"},E=["onClick"],B={class:"flex h-5 max-w-[14px] items-center justify-center"},V=(0,a.defineComponent)({__name:"Environment",setup(e){let t=(0,i.rd)(),l=(0,i.lq)(),{activeWorkspace:V,activeEnvironment:N,activeWorkspaceCollections:D,activeEnvVariables:_}=(0,x.JC)(),{events:S,workspaceMutators:A,collectionMutators:F}=(0,y.hA)(),{collapsedSidebarFolders:I,toggleSidebarFolder:z}=(0,k.cL)(),T=(0,o.hS)(),M=(0,o.hS)(),U=(0,o.hS)(),O=(0,a.ref)(null),R=(0,a.ref)("default"),j=(0,a.ref)(""),$=(0,a.ref)(void 0),L=(0,a.ref)(void 0),W=(0,a.ref)(void 0),{toast:Y}=(0,r.Yf)(),J=e=>JSON.parse(e);function K(e,t,l){e&&(t.uid===l?Y(`Environment name already used in ${t.info?.title}`,"error"):Y("Environment name already used in another collection","error"))}let q=(0,a.computed)(()=>D.value.filter(e=>e.info?.title!=="Drafts"));function G(e){q.value.some(t=>{let l=Object.keys(t["x-scalar-environments"]||{}).includes(e.name);return K(l,t,e.collectionId),l})||(e.collectionId&&(F.addEnvironment(e.name,{variables:{},color:e.color},e.collectionId),I[e.collectionId]||z(e.collectionId),t.push({name:"environment.collection",params:{[g.TU.Collection]:e.collectionId,[g.TU.Environment]:e.name}})),M.hide())}function H(e){if(!N)return;let t=J(e);if("default"===R.value)A.edit(V.value?.uid,"environments",t);else{let e=D.value.find(e=>e["x-scalar-environments"]?.[R.value??""]);if(e?.["x-scalar-environments"]?.[R.value??""]){let l=e["x-scalar-environments"][R.value??""];l&&(l.variables=t,F.edit(e.uid,"x-scalar-environments",e["x-scalar-environments"]))}}}let P=e=>{$.value=e,M.show()},Q=(e,t)=>{L.value=e,$.value=t,W.value=e,U.show()},X=e=>{O.value=e,j.value=D.value.find(t=>t["x-scalar-environments"]?.[e])?.["x-scalar-environments"]?.[e]?.color??"",T.show()},Z=e=>{let t=O.value;"string"==typeof t&&(D.value.some(e=>e["x-scalar-environments"]?.[t])&&D.value.forEach(l=>{l["x-scalar-environments"]?.[t]&&(l["x-scalar-environments"][t].color=e,F.edit(l.uid,"x-scalar-environments",l["x-scalar-environments"]))}),T.hide())},ee=()=>"default"===R.value?"Global Environment":R.value,et=()=>"default"===R.value?JSON.stringify(V.value?.environments,null,2):JSON.stringify(D.value.find(e=>e["x-scalar-environments"]?.[R.value??""])?.["x-scalar-environments"]?.[R.value??""]?.variables,null,2),el=e=>I[e],ea=e=>{e?.createNew&&"environment"===l.name&&P()};(0,a.watch)(()=>[l.params[g.TU.Collection],l.params[g.TU.Environment]],([e,t])=>{e?R.value=t:R.value="default"}),(0,a.onMounted)(()=>{R.value=l.params[g.TU.Environment]||"default",S.hotKeys.on(ea);let e=l.params[g.TU.Collection];e&&!I[e]&&z(e)}),(0,a.onBeforeUnmount)(()=>S.hotKeys.off(ea));let eo=(e,l,a)=>{let o=a?{name:"environment.collection",params:{[g.TU.Workspace]:V.value?.uid,[g.TU.Collection]:a,[g.TU.Environment]:l}}:{name:"environment.default",params:{[g.TU.Workspace]:V.value?.uid,[g.TU.Environment]:l}};e.metaKey?window.open(t.resolve(o).href,"_blank"):t.push(o)};function en(){L.value=void 0,$.value=void 0,W.value=void 0,U.hide()}function er(e){q.value.some(t=>{let l=Object.keys(t["x-scalar-environments"]||{}).includes(e);return K(l,t,$.value),l})||(e&&"default"!==L.value&&D.value.forEach(t=>{if(t["x-scalar-environments"]?.[L.value??""]){let l=t["x-scalar-environments"],a={};Object.keys(l).forEach(t=>{let o=l[t];o&&(t===L.value?a[e]=o:a[t]=o)}),t["x-scalar-environments"]=a,F.edit(t.uid,"x-scalar-environments",t["x-scalar-environments"])}}),e&&R.value===L.value&&(R.value=e),L.value=void 0,$.value=void 0,W.value=void 0,U.hide())}let{handleDragEnd:ei,isDroppable:ec}={handleDragEnd:(e,t)=>{if(!e||!t)return;let{id:l,parentId:a}=e,{id:o,parentId:n,offset:r}=t;if(a!==n)return;let i=D.value.find(e=>e.uid===a);if(!i||!i["x-scalar-environments"])return;let c=i["x-scalar-environments"],s=Object.keys(c);({...c});let u=s.findIndex(e=>e===l);s.splice(u,1);let d=s.findIndex(e=>e===o)+(1===r?1:0);s.splice(d,0,l);let m=s.reduce((e,t)=>{let l=c[t];return l&&(e[t]=l),e},{});i["x-scalar-environments"]=m,F.edit(i.uid,"x-scalar-environments",i["x-scalar-environments"])},isDroppable:(e,t)=>e.parentId===t.parentId};return(0,a.watch)(()=>l.query.openEnvironmentModal,e=>{"true"===e&&P()},{immediate:!0}),(e,l)=>((0,a.openBlock)(),(0,a.createBlock)(p.A,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u.A,{title:"Collections"},{content:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",w,[(0,a.createVNode)(m.A,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(v.A,{key:"default",class:"text-xs",isCopyable:!1,to:{name:"environment",params:{[(0,a.unref)(g.TU).Environment]:"default"}},type:"environment",variable:{name:"Global Environment",uid:"default",icon:"Globe",isDefault:!0}},null,8,["to"])),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(q.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)("li",{key:e.uid,class:"gap-1/2 flex flex-col"},[(0,a.createElementVNode)("button",{class:"hover:bg-b-2 group flex w-full items-center gap-1.5 rounded p-1.5 text-left text-sm font-medium break-words",type:"button",onClick:t=>(0,a.unref)(z)(e.uid)},[(0,a.createElementVNode)("span",B,[(0,a.createVNode)((0,a.unref)(n.$n),{class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:e["x-scalar-icon"]||"interface-content-folder"},null,8,["src"]),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)({"rotate-90":(0,a.unref)(I)[e.uid]})},[(0,a.createVNode)((0,a.unref)(o.kv),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.info?.title??""),1)],8,E),(0,a.withDirectives)((0,a.createElementVNode)("div",{class:(0,a.normalizeClass)({"before:bg-border relative mb-[.5px] before:pointer-events-none before:absolute before:top-0 before:left-3 before:z-1 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":Object.keys(e["x-scalar-environments"]||{}).length>0})},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e["x-scalar-environments"],(l,o)=>((0,a.openBlock)(),(0,a.createBlock)(v.A,{key:o,class:"text-xs",collectionId:e.uid,isCopyable:!1,isDeletable:!0,isRenameable:!0,isDraggable:!0,isDroppable:(0,a.unref)(ec),to:{name:"environment.collection",params:{[(0,a.unref)(g.TU).Collection]:e.uid,[(0,a.unref)(g.TU).Environment]:o}},type:"environment",variable:{name:o,uid:o,color:l.color??"#FFFFFF",isDefault:!1},warningMessage:"Are you sure you want to delete this environment?",onClick:(0,a.withModifiers)(t=>eo(t,o,e.uid),["prevent"]),onColorModal:e=>X(o),onDelete:e=>(function(e){q.value.forEach(t=>{F.removeEnvironment(e,t.uid)});let l=q.value.flatMap(e=>Object.keys(e["x-scalar-environments"]||{}));if(l.length>0){let e=l[l.length-1];if(!e)return;let a=D.value.find(t=>Object.keys(t["x-scalar-environments"]||{}).includes(e));R.value=e,t.push({name:"environment.collection",params:{[g.TU.Collection]:a?.uid,[g.TU.Environment]:e}}),a&&!I[a.uid]&&z(a.uid)}else R.value="default",t.push({name:"environment.default",params:{[g.TU.Workspace]:V.value?.uid}})})(o),onRename:t=>Q(o,e.uid),onOnDragEnd:(0,a.unref)(ei)},null,8,["collectionId","isDroppable","to","variable","onClick","onColorModal","onDelete","onRename","onOnDragEnd"]))),128)),0===Object.keys(e["x-scalar-environments"]||{}).length?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RO),{key:0,class:"text-c-1 hover:bg-b-2 flex h-8 w-full justify-start gap-1.5 py-0 pl-6 text-xs",variant:"ghost",onClick:t=>P(e.uid)},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(o.kv),{icon:"Add",size:"sm"}),l[2]||(l[2]=(0,a.createElementVNode)("span",null,"Add Environment",-1))]),_:1},8,["onClick"])):(0,a.createCommentVNode)("",!0)],2),[[a.vShow,el(e.uid)]])]))),128))]),_:1})])]),button:(0,a.withCtx)(()=>[(0,a.createVNode)(d.A,{click:P,hotkey:"N"},{title:(0,a.withCtx)(()=>[...l[3]||(l[3]=[(0,a.createTextVNode)(" Add Environment ",-1)])]),_:1})]),_:1}),(0,a.createVNode)(f.A,{class:"flex-1"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(b.A,null,(0,a.createSlots)({default:(0,a.withCtx)(()=>[R.value&&(0,a.unref)(V)?((0,a.openBlock)(),(0,a.createBlock)(c.A,{key:0,class:"py-2 pr-2 pl-px md:px-4",envVariables:(0,a.unref)(_),environment:(0,a.unref)(N),language:"json",lineNumbers:"",lint:"",modelValue:et(),workspace:(0,a.unref)(V),"onUpdate:modelValue":H},null,8,["envVariables","environment","modelValue","workspace"])):(0,a.createCommentVNode)("",!0)]),_:2},[R.value?{name:"title",fn:(0,a.withCtx)(()=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(ee()),1)]),key:"0"}:void 0]),1024)]),_:1}),(0,a.createVNode)(C.A,{selectedColor:j.value,state:(0,a.unref)(T),onCancel:l[0]||(l[0]=e=>(0,a.unref)(T).hide()),onSubmit:Z},null,8,["selectedColor","state"]),(0,a.createVNode)(h.A,{activeWorkspaceCollections:q.value,collectionId:$.value,state:(0,a.unref)(M),onCancel:l[1]||(l[1]=e=>(0,a.unref)(M).hide()),onSubmit:G},null,8,["activeWorkspaceCollections","collectionId","state"]),(0,a.createVNode)((0,a.unref)(o.uT),{size:"xxs",state:(0,a.unref)(U),title:`Edit ${L.value}`},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s.A,{name:W.value??"",onClose:en,onEdit:er},null,8,["name"])]),_:1},8,["state","title"])]),_:1}))}})},18647:(e,t,l)=>{l.d(t,{A:()=>c});var a=l(16712),o=l(4081),n=l(7647),r=l(67899);let i={class:"flex flex-col gap-4"},c=(0,a.defineComponent)({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(e,{emit:t}){let l=(0,a.ref)(""),c=e=>{l.value=e},s=()=>{t("submit",l.value),l.value=""};return(u,d)=>((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.uT),{size:"xxs",state:e.state,title:"Edit Environment Color"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",i,[(0,a.createVNode)(r.A,{activeColor:l.value||e.selectedColor,class:"w-full p-1",onSelect:c},null,8,["activeColor"]),(0,a.createVNode)(n.A,{onCancel:d[0]||(d[0]=e=>t("cancel")),onSubmit:s})])]),_:1},8,["state"]))}})},67899:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(16712),o=l(4081);let n=["onClick"],r=["placeholder"],i=(0,a.defineComponent)({__name:"EnvironmentColors",props:{activeColor:{},selector:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){let l=(0,a.ref)(""),i=(0,a.ref)(null),c=(0,a.ref)(!1),s=(0,a.ref)(!1),u=[{color:"#FFFFFF"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],d=(0,a.computed)(()=>e.activeColor&&!u.some(t=>t.color===e.activeColor)||l.value?`background-color: ${e.activeColor||l.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),m=()=>{c.value=!c.value,e.selector&&(s.value=!1),(0,a.nextTick)(()=>{i.value&&i.value.focus()})};(0,a.watch)(l,e=>{e&&!e.startsWith("#")&&(l.value=`#${e}`),c.value=!0});let v=()=>{e.selector&&(s.value=!s.value)},p=l=>{t("select",l),e.selector&&(s.value=!1)};return(t,f)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",null,[c.value?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[e.selector&&!s.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:(0,a.normalizeClass)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)({backgroundColor:e.activeColor}),onClick:v},[e.activeColor?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.kv),{key:0,class:(0,a.normalizeClass)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"])):(0,a.createCommentVNode)("",!0)],6)):(0,a.createCommentVNode)("",!0),s.value||!e.selector?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:(0,a.normalizeClass)(["color-selector flex flex-row items-center justify-between gap-1.5 space-x-1",e.selector?"h-4":"min-h-10 min-w-[296px]"])},[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(u,t=>(0,a.createElementVNode)("div",{key:t.color,class:(0,a.normalizeClass)(["flex cursor-pointer items-center justify-center rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)({backgroundColor:t.color}),onClick:e=>p(t.color)},[e.activeColor!==t.color||l.value?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.kv),{key:0,class:(0,a.normalizeClass)(["text-c-btn",e.selector&&"p-0.5"]),icon:"Checkmark",size:"xs"},null,8,["class"]))],14,n)),64)),f[2]||(f[2]=(0,a.createElementVNode)("hr",{class:"border-ghost h-5 w-0.5 border-l"},null,-1)),(0,a.createElementVNode)("label",{class:(0,a.normalizeClass)(["z-10 flex cursor-pointer flex-row items-center justify-center gap-2 rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)(d.value),onClick:m},[c.value||e.activeColor!==l.value&&(!e.activeColor||u.some(t=>t.color===e.activeColor))?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.kv),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"}))],6)],2)):(0,a.createCommentVNode)("",!0)],64)),c.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:(0,a.normalizeClass)(["color-selector flex flex-1 items-center gap-2 rounded",e.selector?"h-4":"min-h-10"])},[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(["absolute rounded-full border border-dashed",e.selector?"h-4 w-4":"h-5 w-5"])},null,2),(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(["z-[1] rounded-full",e.selector?"h-4 w-4":"h-5 w-5"]),style:(0,a.normalizeStyle)(d.value)},null,6),(0,a.withDirectives)((0,a.createElementVNode)("input",{ref_key:"customColorInputRef",ref:i,"onUpdate:modelValue":f[0]||(f[0]=e=>l.value=e),class:"w-full flex-1 border-transparent text-sm outline-none",placeholder:e.activeColor||"#000000",type:"text",onInput:f[1]||(f[1]=e=>p(l.value))},null,40,r),[[a.vModelText,l.value]]),(0,a.createElementVNode)("button",{class:"text-c-3 hover:bg-b-2 rounded-lg p-1.5",type:"button",onClick:m},[(0,a.createVNode)((0,a.unref)(o.kv),{icon:"Checkmark",size:"xs"})])],2)):(0,a.createCommentVNode)("",!0)]))}})},31054:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(16712),o=l(4081),n=l(16638),r=l(91653),i=l(29686),c=l(67899),s=l(68598);let u={class:"flex items-start gap-2"},d=(0,a.defineComponent)({__name:"EnvironmentModal",props:{state:{},activeWorkspaceCollections:{},collectionId:{}},emits:["cancel","submit"],setup(e,{emit:t}){let{events:l}=(0,s.hA)(),d=(0,a.ref)(""),m=(0,a.ref)("#FFFFFF"),v=(0,a.computed)(()=>[...e.activeWorkspaceCollections.filter(e=>e.info?.title!=="Drafts").map(e=>({id:e.uid,label:e.info?.title??"Untitled Collection"}))]),p=(0,a.ref)(v.value.find(t=>t.id===e.collectionId)),{toast:f}=(0,n.Yf)(),b=e=>{m.value=e};(0,a.watch)(()=>e.state.open,t=>{t&&(d.value="",m.value="#FFFFFF",e.collectionId?p.value=v.value.find(t=>t.id===e.collectionId):p.value=void 0)});let k=()=>{if(!d.value.trim()){f("Please enter a name before adding an environment.","error");return}if(!p.value?.id){f("Please select a collection before adding an environment.","error");return}t("submit",{name:d.value,color:m.value,type:p.value?.id==="global"?"global":"collection",collectionId:p.value?.id!=="global"?p.value?.id:void 0})},g=()=>{e.state.hide(),l.commandPalette.emit({commandName:"Create Collection"})};return(l,n)=>((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.uT),{bodyClass:"border-t-0 rounded-t-lg",size:"xs",state:e.state},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r.A,{disabled:!p.value||!d.value.trim(),onCancel:n[2]||(n[2]=e=>t("cancel")),onSubmit:k},{options:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(o.cy),{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),options:v.value,placeholder:"Select Type"},{default:(0,a.withCtx)(()=>[v.value.length>0?((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RO),{key:0,class:"hover:bg-b-2 max-h-8 w-fit justify-between gap-1 p-2 text-xs",variant:"outlined"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(p.value?"text-c-1":"text-c-3")},(0,a.toDisplayString)(p.value?p.value.label:"Select Collection"),3),(0,a.createVNode)((0,a.unref)(o.kv),{class:"text-c-3",icon:"ChevronDown",size:"xs"})]),_:1})):((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(o.RO),{key:1,class:"hover:bg-b-2 max-h-8 justify-between gap-1 p-2 text-xs",variant:"outlined",onClick:g},{default:(0,a.withCtx)(()=>[...n[3]||(n[3]=[(0,a.createElementVNode)("span",{class:"text-c-1"},"Create Collection",-1)])]),_:1}))]),_:1},8,["modelValue","options"])]),submit:(0,a.withCtx)(()=>[...n[4]||(n[4]=[(0,a.createTextVNode)(" Add Environment ",-1)])]),default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",u,[(0,a.createVNode)(c.A,{activeColor:m.value,class:"peer",selector:"",onSelect:b},null,8,["activeColor"]),(0,a.createVNode)(i.A,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),class:"-mt-[.5px] !p-0 peer-has-[.color-selector]:hidden",placeholder:"Environment name"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}})},2880:(e,t,l)=>{l.d(t,{s:()=>c});var a=l(16712);let o=(0,a.ref)(null),n=(0,a.ref)(null),r=(e,t)=>{let l=!1;return(...a)=>{l||(e(...a),l=!0,setTimeout(()=>l=!1,t))}},i=["draggable"],c=((e,t)=>{let l=e.__vccOpts||e;for(let[e,a]of t)l[e]=a;return l})((0,a.defineComponent)({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(e,{expose:t,emit:l}){let c=(0,a.computed)(()=>e.parentIds.at(-1)??null),s=t=>{t.dataTransfer&&t.target instanceof HTMLElement&&e.isDraggable&&(t.target.classList.add("dragging"),t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",o.value={id:e.id,parentId:c.value},l("onDragStart",{id:e.id,parentId:c.value}))},u=t=>"function"==typeof e.isDroppable?e.isDroppable(o.value,{id:e.id,parentId:c.value,offset:t}):e.isDroppable,d=r(t=>{if(!o.value||o.value.id===e.id||e.parentIds.includes(o.value?.id??""))return;let l=n.value?.offset,a=t.target.offsetHeight,r=e.floor*a,i=e.ceiling*a,s=3;t.offsetY<=0&&l&&3!==l?s=l:t.offsetY<=r?s=0:t.offsetY>=i?s=1:t.offsetY>r&&t.offsetY<i&&(s=2),u(s)&&(n.value={id:e.id,parentId:c.value,offset:s})},25),m=["above","below","asChild"],v=(0,a.computed)(()=>{let t="sidebar-indent-nested";return e.id===n.value?.id&&(t+=` dragover-${m[n.value.offset]}`),t}),p=()=>{if(!n.value||!o.value)return;let e={...o.value},t={...n.value};o.value=null,n.value=null,document.querySelectorAll("div.dragging").forEach(e=>e.classList.remove("dragging")),e.id!==t.id&&l("onDragEnd",e,t)};return t({draggingItem:o,hoveredItem:n}),(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(v.value),draggable:e.isDraggable,onDragend:p,onDragover:t[0]||(t[0]=(0,a.withModifiers)((...e)=>(0,a.unref)(d)&&(0,a.unref)(d)(...e),["prevent","stop"])),onDragstart:(0,a.withModifiers)(s,["stop"])},[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)],42,i))}}),[["__scopeId","data-v-a89d6a6e"]])}};