"use strict";exports.id=4823,exports.ids=[4823],exports.modules={34502:(e,t,l)=>{l.d(t,{A:()=>f});var o=l(16712),a=l(4081),r=l(19919),n=l(14802),c=l(33745),s=l(19161);let i=["for"],d={class:"relative flex min-w-0 flex-1"},u=["readOnly","type","value"],p={key:1,class:"centered-y text-orange absolute right-7 text-xs"},m=(0,o.defineComponent)({inheritAttrs:!1,__name:"DataTableInput",props:{id:{},type:{},containerClass:{},required:{type:Boolean,default:!1},modelValue:{},canAddCustomEnumValue:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},enum:{},min:{},max:{},environment:{},envVariables:{},description:{},lineWrapping:{type:Boolean,default:!1}},emits:["update:modelValue","inputFocus","inputBlur","selectVariable"],setup(e,{emit:t}){let l=(0,o.ref)(!0),m=(0,o.ref)(!1),f=(0,o.ref)(null),h=()=>{m.value||t("inputBlur")},y=(0,o.computed)(()=>"password"===e.type?"text":e.type??"text"),x=()=>{e.enum?.length||e.readOnly||f.value?.focus()};return(m,w)=>((0,o.openBlock)(),(0,o.createBlock)(c.A,{class:(0,o.normalizeClass)(["relative flex",e.containerClass])},{default:(0,o.withCtx)(()=>[m.$slots.default?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:"text-c-1 flex items-center pr-0 pl-3",for:e.id??"",onClick:x},[(0,o.renderSlot)(m.$slots,"default",{},void 0,!0),w[6]||(w[6]=(0,o.createTextVNode)(": ",-1))],8,i)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",d,[e.enum&&e.enum.length?((0,o.openBlock)(),(0,o.createBlock)(s.A,{key:0,canAddCustomValue:e.canAddCustomEnumValue,modelValue:e.modelValue,value:e.enum,"onUpdate:modelValue":w[0]||(w[0]=e=>t("update:modelValue",e))},null,8,["canAddCustomValue","modelValue","value"])):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[l.value&&"password"===e.type?((0,o.openBlock)(),(0,o.createElementBlock)("input",(0,o.mergeProps)({key:0},e.id?{...m.$attrs,id:e.id}:m.$attrs,{autocomplete:"off",class:["text-c-1 disabled:text-c-2 peer w-full min-w-0 border-none px-2 py-1.25 -outline-offset-1",{"scalar-password-input":"password"===e.type}],"data-1p-ignore":"",readOnly:e.readOnly,spellcheck:"false",type:y.value,value:e.modelValue,onInput:w[1]||(w[1]=e=>t("update:modelValue",e.target.value??""))}),null,16,u)):((0,o.openBlock)(),(0,o.createBlock)(n.A,(0,o.mergeProps)({key:1},m.$attrs,{id:e.id,ref_key:"codeInput",ref:f,class:["text-c-1 disabled:text-c-2 peer w-full min-w-0 border-none -outline-offset-1",["password"===e.type&&e.description&&"pr-12",e.description&&"pr-8","password"===e.type&&"scalar-password-input"]],description:e.description,disableCloseBrackets:"",disableTabIndent:"",envVariables:e.envVariables,environment:e.environment,lineWrapping:!!e.lineWrapping,max:e.max,min:e.min,modelValue:e.modelValue??"",readOnly:e.readOnly,required:!!e.required,spellcheck:"false",type:y.value,onBlur:h,onFocus:w[2]||(w[2]=e=>t("inputFocus")),"onUpdate:modelValue":w[3]||(w[3]=e=>t("update:modelValue",e))}),null,16,["id","class","description","envVariables","environment","lineWrapping","max","min","modelValue","readOnly","required","type"]))],64))]),m.$slots.warning?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.renderSlot)(m.$slots,"warning",{},void 0,!0)])):(0,o.createCommentVNode)("",!0),(0,o.renderSlot)(m.$slots,"icon",{},void 0,!0),e.modelValue?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(a.EX),{key:2,class:"-ml-.25 h-6 w-6 self-center p-1.25",icon:(0,o.unref)(r.snQ),label:"Clear Value",onClick:w[4]||(w[4]=e=>t("update:modelValue",""))},null,8,["icon"])):(0,o.createCommentVNode)("",!0),"password"===e.type?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(a.EX),{key:3,class:"-ml-.5 mr-1.25 h-6 w-6 self-center p-1.25",icon:l.value?(0,o.unref)(r.RQZ):(0,o.unref)(r.SVi),label:l.value?"Show Password":"Hide Password",onClick:w[5]||(w[5]=e=>l.value=!l.value)},null,8,["icon","label"])):(0,o.createCommentVNode)("",!0)]),_:3},8,["class"]))}}),f=(0,l(74817).A)(m,[["__scopeId","data-v-c1a50a6e"]])},85178:(e,t,l)=>{l.d(t,{A:()=>m});var o=l(16712),a=l(55854),r=l(4081);let n=["aria-labelledby"],c={class:"text-c-1 m-0 flex flex-1 items-center gap-1.5 leading-[20px]"},s=["id"],i={key:0,class:"sr-only"},d={key:0,class:"bg-b-2 text-c-2 inline-flex h-5 w-5 items-center justify-center rounded-full border text-xs font-semibold"},u={class:"sr-only"},p={key:0,class:"ui-not-open:hidden flex items-center gap-2 pr-0.75"},m=(0,o.defineComponent)({__name:"ViewLayoutCollapse",props:{defaultOpen:{type:Boolean,default:!0},itemCount:{default:0},layout:{default:"client"}},emits:["update:modelValue"],setup(e,{emit:t}){let l=(0,o.useId)(),m=(0,o.ref)(e.defaultOpen),f=()=>{m.value=!m.value,t("update:modelValue",m.value)};return(0,o.onMounted)(()=>{t("update:modelValue",m.value)}),(t,m)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(a.EN),{as:"div",class:(0,o.normalizeClass)(["group/collapse focus-within:text-c-1 text-c-2 last:ui-open:border-b-0 border-b",{"last-of-type:first-of-type:border-b-0":"reference"===e.layout}]),defaultOpen:e.defaultOpen,static:"reference"===e.layout||void 0,onClick:f},{default:(0,o.withCtx)(({open:m})=>[(0,o.createElementVNode)("section",{"aria-labelledby":(0,o.unref)(l),class:"contents"},[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["bg-b-2 flex items-center","reference"===e.layout&&"rounded-t-xl border border-b-0"])},[(0,o.createVNode)((0,o.unref)(a._q),{class:(0,o.normalizeClass)(["hover:text-c-1 group box-content flex max-h-8 flex-1 items-center gap-2.5 overflow-hidden px-1 py-1.5 text-base font-medium outline-none md:px-1.5 xl:pr-0.5 xl:pl-2",{"!pl-3":"reference"===e.layout}]),disabled:"reference"===e.layout},{default:(0,o.withCtx)(()=>["reference"!==e.layout?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(r.kv),{key:0,class:(0,o.normalizeClass)(["text-c-3 group-hover:text-c-1 ui-open:rotate-90 ui-not-open:rotate-0 rounded-px outline-offset-2 group-focus-visible:outline"]),icon:"ChevronRight",size:"md"})):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("h2",c,[(0,o.createElementVNode)("span",{id:(0,o.unref)(l),class:"contents"},[(0,o.renderSlot)(t.$slots,"title",{open:m}),m?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("span",i," (Collapsed) "))],8,s),!m&&e.itemCount?((0,o.openBlock)(),(0,o.createElementBlock)("span",d,[(0,o.createTextVNode)((0,o.toDisplayString)(e.itemCount)+" ",1),(0,o.createElementVNode)("span",u,"Item"+(0,o.toDisplayString)(1===e.itemCount?"":"s"),1)])):(0,o.createCommentVNode)("",!0)])]),_:2},1032,["class","disabled"]),t.$slots.actions?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.renderSlot)(t.$slots,"actions",{open:m})])):(0,o.createCommentVNode)("",!0)],2),(0,o.createVNode)((0,o.unref)(a.kS),(0,o.mergeProps)(t.$attrs,{class:"diclosure-panel h-full max-h-fit rounded-b"}),{default:(0,o.withCtx)(()=>[(0,o.renderSlot)(t.$slots,"default",{open:m})]),_:2},1040)],8,n)]),_:3},8,["class","defaultOpen","static"]))}})},74823:(e,t,l)=>{l.d(t,{A:()=>ep});var o=l(16712),a=l(4081),r=l(86941),n=l(19919),c=l(14457),s=l(85178),i=l(68598);let d={class:"text-c-2 mb-4 text-sm leading-normal"},u={class:"flex justify-between gap-2"},p=(0,o.defineComponent)({__name:"DeleteRequestAuthModal",props:{state:{},scheme:{}},emits:["close","delete"],setup(e,{emit:t}){let{securitySchemeMutators:l}=(0,i.hA)(),r=()=>{e.scheme?.id&&l.delete(e.scheme.id),t("delete")};return(l,n)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(a.uT),{size:"xxs",state:e.state,title:"Delete Security Scheme"},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("p",d," This cannot be undone. You're about to delete the "+(0,o.toDisplayString)(e.scheme?.label)+" security scheme from the collection. ",1),(0,o.createElementVNode)("div",u,[(0,o.createVNode)((0,o.unref)(a.RO),{class:"flex h-8 cursor-pointer items-center gap-1.5 px-3 shadow-none focus:outline-none",type:"button",variant:"outlined",onClick:n[0]||(n[0]=e=>t("close"))},{default:(0,o.withCtx)(()=>[...n[1]||(n[1]=[(0,o.createTextVNode)(" Cancel ",-1)])]),_:1}),(0,o.createVNode)((0,o.unref)(a.RO),{class:"flex h-8 cursor-pointer items-center gap-1.5 px-3 shadow-none focus:outline-none",type:"submit",onClick:r},{default:(0,o.withCtx)(()=>[(0,o.createTextVNode)(" Delete "+(0,o.toDisplayString)(e.scheme?.label),1)]),_:1})])]),_:1},8,["state"]))}});var m=l(80836);let f=(e,t,l,{securitySchemeMutators:o,securitySchemes:a},n=!1)=>{if(o.edit(e,t,l),n)try{let o=JSON.parse((0,r.Ar)().getItem(r.tN.AUTH)??"{}"),n=a[e];o&&n?.nameKey&&((o[n.nameKey]||={})[t]=l,(0,r.Ar)().setItem(r.tN.AUTH,JSON.stringify(o)))}catch(e){console.error(e)}},h=(e,t)=>{try{let{collectionMutators:l,securitySchemes:o,securitySchemeMutators:a}=e,n=JSON.parse((0,r.Ar)().getItem(r.tN.AUTH)??"{}"),c=Object.keys(o).reduce((e,t)=>{let l=o[t];return l&&(e[l.nameKey]=l.uid),e},{});Object.entries(n).forEach(([e,t])=>{let l=c[e];l&&Object.entries(t).forEach(([e,t])=>{a.edit(l,e,t)})});let s=JSON.parse((0,r.Ar)().getItem(r.tN.SELECTED_SECURITY_SCHEMES)??"[]").map(e=>Array.isArray(e)?e.map(e=>c[e]).filter(m.O):c[e]).filter(m.O);l.edit(t,"selectedSecuritySchemeUids",s)}catch(e){console.error(e)}};var y=l(28994),x=l(16638),w=l(55854),k=l(33745),V=l(56025),v=l(96456);let b={class:"flex h-fit w-full"},C={class:"flex-1"},g={class:"flex items-center gap-1.75"},B={class:"grid auto-rows-auto",style:{gridTemplateColumns:"1fr auto"}},N={key:0},S={class:"font-code text-xs"},_=(0,o.defineComponent)({__name:"OAuthScopesInput",props:{flow:{},updateScheme:{type:Function}},setup(e){let t=(0,o.computed)(()=>Object.entries(e.flow?.scopes??{}).map(([e,t])=>({id:e,label:e,description:t}))),l=(0,o.computed)(()=>e.flow?.selectedScopes||[]),r=(0,o.computed)(()=>e.flow?.selectedScopes?.length===Object.keys(e.flow?.scopes??{}).length),n=()=>{e.updateScheme(`flows.${e.flow.type}.selectedScopes`,Object.keys(e.flow?.scopes??{}))},c=()=>{e.updateScheme(`flows.${e.flow.type}.selectedScopes`,[])};return(s,i)=>((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(k.A),{class:"h-auto !max-h-[initial] min-h-8 items-center"},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",b,[i[2]||(i[2]=(0,o.createElementVNode)("div",{class:"text-c-1 h-full items-center"},null,-1)),(0,o.createVNode)((0,o.unref)(w.EN),{as:"div",class:"bl flex w-full flex-col"},{default:(0,o.withCtx)(()=>[(0,o.createVNode)((0,o.unref)(w._q),{class:(0,o.normalizeClass)(["group/scopes-accordion hover:text-c-1 flex h-auto min-h-8 cursor-pointer items-center gap-1.5 pr-2.25 pl-3 text-left",(e.flow?.selectedScopes?.length||0)>0?"text-c-1":"text-c-3"])},{default:(0,o.withCtx)(({open:t})=>[(0,o.createElementVNode)("div",C," Scopes Selected "+(0,o.toDisplayString)(e.flow?.selectedScopes?.length||0)+" / "+(0,o.toDisplayString)(Object.keys(e.flow?.scopes??{}).length||0),1),(0,o.createElementVNode)("div",g,[r.value?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(a.RO),{key:0,class:"pr-0.75 pl-1 transition-none",size:"sm",variant:"ghost",onClick:(0,o.withModifiers)(c,["stop"])},{default:(0,o.withCtx)(()=>[...i[0]||(i[0]=[(0,o.createTextVNode)(" Deselect All ",-1)])]),_:1})):(0,o.createCommentVNode)("",!0),r.value?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(a.RO),{key:1,class:"pr-0.75 pl-1 transition-none",size:"sm",variant:"ghost",onClick:(0,o.withModifiers)(n,["stop"])},{default:(0,o.withCtx)(()=>[...i[1]||(i[1]=[(0,o.createTextVNode)(" Select All ",-1)])]),_:1})),(0,o.createVNode)((0,o.unref)(a.kv),{class:"text-c-3 group-hover/scopes-accordion:text-c-2",icon:t?"ChevronDown":"ChevronRight",size:"md"},null,8,["icon"])])]),_:1},8,["class"]),(0,o.createVNode)((0,o.unref)(w.kS),{as:"template"},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("table",B,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(t.value,({id:t,label:a,description:r})=>((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:t,class:"text-c-2",onClick:o=>{l.value.includes(t)?e.updateScheme(`flows.${e.flow.type}.selectedScopes`,l.value.filter(e=>e!==t)):e.updateScheme(`flows.${e.flow.type}.selectedScopes`,[...l.value,t])}},{default:(0,o.withCtx)(()=>[(0,o.createVNode)((0,o.unref)(k.A),{class:"hover:text-c-1 box-border !max-h-[initial] w-full cursor-pointer px-3 py-1.5"},{default:(0,o.withCtx)(()=>[r?((0,o.openBlock)(),(0,o.createElementBlock)("div",N,[(0,o.createElementVNode)("span",S,(0,o.toDisplayString)(a),1),(0,o.createTextVNode)(" â€“ "+(0,o.toDisplayString)(r),1)])):(0,o.createCommentVNode)("",!0)]),_:2},1024),(0,o.createVNode)((0,o.unref)(v.A),{modelValue:l.value.includes(t),"onUpdate:modelValue":()=>{}},null,8,["modelValue"])]),_:2},1032,["onClick"]))),128))])]),_:1})]),_:1})])]),_:1}))}});var A=l(34502);let E=["for"],O=(0,o.defineComponent)({__name:"RequestAuthDataTableInput",props:{type:{},containerClass:{},required:{type:Boolean,default:!1},modelValue:{},readOnly:{type:Boolean,default:!1},environment:{},envVariables:{},workspace:{}},emits:["update:modelValue","inputFocus","inputBlur","selectVariable"],setup(e,{emit:t}){let l=(0,o.useId)();return(a,r)=>((0,o.openBlock)(),(0,o.createBlock)(A.A,(0,o.mergeProps)({id:(0,o.unref)(l),canAddCustomEnumValue:!e.readOnly,containerClass:e.containerClass},a.$attrs,{envVariables:e.envVariables,environment:e.environment,lineWrapping:"",modelValue:e.modelValue,readOnly:e.readOnly,required:e.required,type:e.type,workspace:e.workspace,onInputBlur:r[0]||(r[0]=e=>t("inputBlur")),onInputFocus:r[1]||(r[1]=e=>t("inputFocus")),onSelectVariable:r[2]||(r[2]=e=>t("selectVariable",e)),"onUpdate:modelValue":r[3]||(r[3]=e=>t("update:modelValue",e))}),{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("label",{for:(0,o.unref)(l)},[(0,o.renderSlot)(a.$slots,"default")],8,E)]),icon:(0,o.withCtx)(()=>[(0,o.renderSlot)(a.$slots,"icon")]),_:3},16,["id","canAddCustomEnumValue","containerClass","envVariables","environment","modelValue","readOnly","required","type","workspace"]))}});var U=l(94301),$=l(61498),P=l(69637),T=l(71044);let z=e=>{let t=e?.url;return t?(0,U.K)(t)?typeof window>"u"?{}:{basePath:t}:{baseUrl:t}:{}},I=()=>{let e=new Uint8Array(32);return crypto.getRandomValues(e),(0,T.SM)(e,!0)},R=async(e,t)=>{if("plain"===t)return e;if("function"!=typeof crypto?.subtle?.digest)return console.warn("SHA-256 is only supported when using https, using a plain text code challenge instead."),e;let l=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",l);return(0,T.SM)(new Uint8Array(o),!0)},F=async(e,t,l)=>{try{if(!e)return[Error("Flow not found"),null];let o=e.selectedScopes.join(" ");if("clientCredentials"===e.type||"password"===e.type)return K(e,o,{proxyUrl:l},t);let a=(Math.random()+1).toString(36).substring(2,10),r=(0,$.r)(e.authorizationUrl,z(t)),n=new URL(r),c=null;if("implicit"===e.type)n.searchParams.set("response_type","token");else if("authorizationCode"===e.type&&(n.searchParams.set("response_type","code"),"no"!==e["x-usePkce"])){let t=I(),l=await R(t,e["x-usePkce"]);c={codeVerifier:t,codeChallenge:l,codeChallengeMethod:"SHA-256"===e["x-usePkce"]?"S256":"plain"},n.searchParams.set("code_challenge",l),n.searchParams.set("code_challenge_method",c.codeChallengeMethod)}if(e["x-scalar-redirect-uri"].startsWith("/")){let l=t?.url||window.location.origin+window.location.pathname,o=(0,$.r)(e["x-scalar-redirect-uri"],{baseUrl:l});n.searchParams.set("redirect_uri",o)}else n.searchParams.set("redirect_uri",e["x-scalar-redirect-uri"]);e["x-scalar-security-query"]&&Object.keys(e["x-scalar-security-query"]).forEach(t=>{let l=e["x-scalar-security-query"]?.[t];l&&n.searchParams.set(t,l)}),n.searchParams.set("client_id",e["x-scalar-client-id"]),n.searchParams.set("state",a),o&&n.searchParams.set("scope",o);let s=window.open(n,"openAuth2Window","left=100,top=100,width=800,height=600");return s?new Promise(r=>{let n=setInterval(()=>{let i=null,d=null,u=null,p=null;try{let t=new URL(s.location.href).searchParams,l=e["x-tokenName"]||"access_token";i=t.get(l),d=t.get("code"),u=t.get("error"),p=t.get("error_description");let o=new URLSearchParams(s.location.href.split("#")[1]);i||=o.get(l),d||=o.get("code"),u||=o.get("error"),p||=o.get("error_description")}catch{}if(s.closed||i||d||u){if(clearInterval(n),s.close(),u)r([Error(`OAuth error: ${u}${p?` (${p})`:""}`),null]);else if(i){let e=s.location.href.match(/state=([^&]*)/)?.[1];r(e===a?[null,i]:[Error("State mismatch"),null])}else d?new URL(s.location.href).searchParams.get("state")===a?K(e,o,{code:d,pkce:c,proxyUrl:l},t).then(r):r([Error("State mismatch"),null]):(clearInterval(n),r([Error("Window was closed without granting authorization"),null]))}},200)}):[Error("Failed to open auth window"),null]}catch{return[Error("Failed to authorize oauth2 flow"),null]}},K=async(e,t,{code:l,pkce:o,proxyUrl:a}={},r)=>{if(!e)return[Error("OAuth2 flow was not defined"),null];let n=new URLSearchParams;n.set("client_id",e["x-scalar-client-id"]),t&&("clientCredentials"===e.type||"password"===e.type)&&n.set("scope",t),e.clientSecret&&(!e["x-scalar-credentials-location"]||"body"===e["x-scalar-credentials-location"])&&n.set("client_secret",e.clientSecret),"x-scalar-redirect-uri"in e&&e["x-scalar-redirect-uri"]&&n.set("redirect_uri",e["x-scalar-redirect-uri"]),l?(n.set("code",l),n.set("grant_type","authorization_code"),o&&n.set("code_verifier",o.codeVerifier)):"password"===e.type?(n.set("grant_type","password"),n.set("username",e.username),n.set("password",e.password)):n.set("grant_type","client_credentials"),e["x-scalar-security-body"]&&Object.entries(e["x-scalar-security-body"]).forEach(([e,t])=>{t&&n.set(e,t)});try{let t={"Content-Type":"application/x-www-form-urlencoded"};e.clientSecret&&(!e["x-scalar-credentials-location"]||"header"===e["x-scalar-credentials-location"])&&(t.Authorization=`Basic ${(0,T.lF)(`${e["x-scalar-client-id"]}:${e.clientSecret}`)}`);let l=(0,$.r)(e.tokenUrl,z(r)),o=(0,P.p)(a,l)?`${a}?${new URLSearchParams([["scalar_url",l]]).toString()}`:l,c=await (await fetch(o,{method:"POST",headers:t,body:n})).json(),s=e["x-tokenName"]||"access_token";return[null,c[s]]}catch{return[Error("Failed to get an access token. Please check your credentials."),null]}},q={class:"flex h-8 items-center justify-end border-t"},D={class:"flex h-8 w-full items-center justify-end border-t"},M=(0,o.defineComponent)({__name:"OAuth2",props:{collection:{},environment:{},envVariables:{},flow:{},persistAuth:{type:Boolean,default:!1},scheme:{},server:{},workspace:{}},emits:["authorized"],setup(e,{emit:t}){let l=(0,a.R2)(),{toast:r}=(0,x.Yf)(),n=(0,i.hA)(),c=(t,l)=>f(e.scheme.uid,t,l,n,e.persistAuth),s=async()=>{if(l.isActive||!e.collection?.uid)return;if(!e.server){r("No server selected","error");return}l.start();let[o,a]=await F(e.flow,e.server,e.workspace?.proxyUrl);await l.clear(),a?(c(`flows.${e.flow.type}.token`,a),t("authorized")):(console.error(o),r(o?.message??"Failed to authorize","error"))},d={environment:e.environment,envVariables:e.envVariables,workspace:e.workspace};return(t,r)=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[e.flow.token?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)(d,{class:"border-r-transparent",modelValue:e.flow.token,placeholder:"QUxMIFlPVVIgQkFTRSBBUkUgQkVMT05HIFRPIFVT",type:"password","onUpdate:modelValue":r[0]||(r[0]=t=>c(`flows.${e.flow.type}.token`,t))}),{default:(0,o.withCtx)(()=>[...r[10]||(r[10]=[(0,o.createTextVNode)(" Access Token ",-1)])]),_:1},16,["modelValue"])]),_:1}),(0,o.createVNode)((0,o.unref)(V.A),{class:"min-w-full"},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",q,[(0,o.createVNode)((0,o.unref)(a.RO),{class:"mr-1 p-0 px-2 py-0.5",loader:(0,o.unref)(l),size:"sm",variant:"outlined",onClick:r[1]||(r[1]=t=>c(`flows.${e.flow.type}.token`,""))},{default:(0,o.withCtx)(()=>[...r[11]||(r[11]=[(0,o.createTextVNode)(" Clear ",-1)])]),_:1},8,["loader"]),(0,o.renderSlot)(t.$slots,"oauth-actions")])]),_:3})],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>["authorizationUrl"in e.flow?((0,o.openBlock)(),(0,o.createBlock)(O,(0,o.mergeProps)({key:0},d,{containerClass:"border-r-0",modelValue:e.flow.authorizationUrl,placeholder:"https://galaxy.scalar.com/authorize","onUpdate:modelValue":r[2]||(r[2]=t=>c(`flows.${e.flow.type}.authorizationUrl`,t))}),{default:(0,o.withCtx)(()=>[...r[12]||(r[12]=[(0,o.createTextVNode)(" Auth URL ",-1)])]),_:1},16,["modelValue"])):(0,o.createCommentVNode)("",!0),"tokenUrl"in e.flow?((0,o.openBlock)(),(0,o.createBlock)(O,(0,o.mergeProps)({key:1},d,{modelValue:e.flow.tokenUrl,placeholder:"https://galaxy.scalar.com/token","onUpdate:modelValue":r[3]||(r[3]=t=>c(`flows.${e.flow.type}.tokenUrl`,t))}),{default:(0,o.withCtx)(()=>[...r[13]||(r[13]=[(0,o.createTextVNode)(" Token URL ",-1)])]),_:1},16,["modelValue"])):(0,o.createCommentVNode)("",!0)]),_:1}),"x-scalar-redirect-uri"in e.flow?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:0},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)(d,{modelValue:e.flow["x-scalar-redirect-uri"],placeholder:"https://galaxy.scalar.com/callback","onUpdate:modelValue":r[4]||(r[4]=t=>c(`flows.${e.flow.type}.x-scalar-redirect-uri`,t))}),{default:(0,o.withCtx)(()=>[...r[14]||(r[14]=[(0,o.createTextVNode)(" Redirect URL ",-1)])]),_:1},16,["modelValue"])]),_:1})):(0,o.createCommentVNode)("",!0),"password"===e.flow.type?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)(d,{class:"text-c-2",modelValue:e.flow.username,placeholder:"janedoe","onUpdate:modelValue":r[5]||(r[5]=t=>c(`flows.${e.flow.type}.username`,t))}),{default:(0,o.withCtx)(()=>[...r[15]||(r[15]=[(0,o.createTextVNode)(" Username ",-1)])]),_:1},16,["modelValue"])]),_:1}),(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)(d,{modelValue:e.flow.password,placeholder:"********",type:"password","onUpdate:modelValue":r[6]||(r[6]=t=>c(`flows.${e.flow.type}.password`,t))}),{default:(0,o.withCtx)(()=>[...r[16]||(r[16]=[(0,o.createTextVNode)(" Password ",-1)])]),_:1},16,["modelValue"])]),_:1})],64)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)(d,{modelValue:e.flow["x-scalar-client-id"],placeholder:"12345","onUpdate:modelValue":r[7]||(r[7]=t=>c(`flows.${e.flow.type}.x-scalar-client-id`,t))}),{default:(0,o.withCtx)(()=>[...r[17]||(r[17]=[(0,o.createTextVNode)(" Client ID ",-1)])]),_:1},16,["modelValue"])]),_:1}),"clientSecret"in e.flow?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:2},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)(d,{modelValue:e.flow.clientSecret,placeholder:"XYZ123",type:"password","onUpdate:modelValue":r[8]||(r[8]=t=>c(`flows.${e.flow.type}.clientSecret`,t))}),{default:(0,o.withCtx)(()=>[...r[18]||(r[18]=[(0,o.createTextVNode)(" Client Secret ",-1)])]),_:1},16,["modelValue"])]),_:1})):(0,o.createCommentVNode)("",!0),"x-usePkce"in e.flow?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:3},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)(d,{enum:(0,o.unref)(y.I4),modelValue:e.flow["x-usePkce"],readOnly:"","onUpdate:modelValue":r[9]||(r[9]=t=>c(`flows.${e.flow.type}.x-usePkce`,t))}),{default:(0,o.withCtx)(()=>[...r[19]||(r[19]=[(0,o.createTextVNode)(" Use PKCE ",-1)])]),_:1},16,["enum","modelValue"])]),_:1})):(0,o.createCommentVNode)("",!0),Object.keys(e.flow.scopes??{}).length?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:4},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(_,{flow:e.flow,updateScheme:c},null,8,["flow"])]),_:1})):(0,o.createCommentVNode)("",!0)],64)),e.flow.token?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:2,class:"min-w-full"},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",D,[(0,o.createVNode)((0,o.unref)(a.RO),{class:"mr-0.75 p-0 px-2 py-0.5",loader:(0,o.unref)(l),size:"sm",variant:"outlined",onClick:s},{default:(0,o.withCtx)(()=>[...r[20]||(r[20]=[(0,o.createTextVNode)(" Authorize ",-1)])]),_:1},8,["loader"])])]),_:1}))],64))}}),j={class:"bg-b-1 text-c-2 outline-b-3 top-0 z-1 h-full w-full overflow-hidden px-3 py-1.25 text-ellipsis group-hover/auth:absolute group-hover/auth:h-auto group-hover/auth:border-b *:first:line-clamp-1 *:first:text-ellipsis group-hover/auth:*:first:line-clamp-none"},L={key:0,class:"flex min-h-8 border-t text-base"},H={class:"flex h-8 max-w-full gap-2.5 overflow-x-auto px-3"},Q=["onClick"],W={class:"relative z-10"},J=(0,o.defineComponent)({__name:"RequestAuthTab",props:{collection:{},environment:{},envVariables:{},layout:{},persistAuth:{type:Boolean,default:!1},securitySchemeUids:{},server:{},workspace:{}},emits:["authorized"],setup(e,{emit:t}){let l=(0,i.hA)(),{securitySchemes:r}=l,n=(0,o.computed)(()=>e.securitySchemeUids.map(e=>({scheme:r[e]}))),c=(0,o.ref)(""),s=e=>{let t=e.description?`: ${e.description}`:"",l=`${(0,o.capitalize)(e.nameKey)}${t||`: ${e.type}`}`;if("apiKey"===e.type)return`${(0,o.capitalize)(e.nameKey)}${t||`: ${e.in}`}`;if("oauth2"===e.type){let l=Object.values(e.flows??{})[0];return`${(0,o.capitalize)(e.nameKey)}: ${c.value?c.value:l?.type??""}${t}`}return"http"===e.type?`${(0,o.capitalize)(e.nameKey)}: ${e.scheme}${t}`:`${l}${t}`},d=(t,o,a)=>{f(t,o,a,l,e.persistAuth)};(0,o.onMounted)(()=>{e.persistAuth&&h(l,e.collection.uid)});let u={environment:e.environment,envVariables:e.envVariables,workspace:e.workspace};return(l,r)=>((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(n.value,({scheme:i})=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:i?.uid},[n.value.length>1&&i?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:0},{default:(0,o.withCtx)(()=>[(0,o.createVNode)((0,o.unref)(k.A),{"aria-label":s(i),class:"text-c-2 group/auth flex items-center leading-[22px] whitespace-nowrap outline-none hover:whitespace-normal"},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)("p",j,(0,o.toDisplayString)(s(i)),1)]),_:2},1032,["aria-label"])]),_:2},1024)):(0,o.createCommentVNode)("",!0),i?.description&&n.value.length<=1?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:1},{default:(0,o.withCtx)(()=>[(0,o.createVNode)((0,o.unref)(k.A),{"aria-label":i.description,class:"max-h-[auto]"},{default:(0,o.withCtx)(()=>[(0,o.createVNode)((0,o.unref)(a.IR),{class:"auth-description bg-b-1 text-c-2 min-w-0 flex-1 px-3 py-1.25",value:i.description},null,8,["value"])]),_:2},1032,["aria-label"])]),_:2},1024)):(0,o.createCommentVNode)("",!0),i?.type==="http"?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:2},["bearer"===i.scheme?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(V.A),{key:0},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)({ref_for:!0},u,{containerClass:"reference"===e.layout&&"border-t",modelValue:i.token,placeholder:"Token",type:"password","onUpdate:modelValue":e=>d(i.uid,"token",e)}),{default:(0,o.withCtx)(()=>[...r[1]||(r[1]=[(0,o.createTextVNode)(" Bearer Token ",-1)])]),_:1},16,["containerClass","modelValue","onUpdate:modelValue"])]),_:2},1024)):i?.scheme==="basic"?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)({ref_for:!0},u,{class:"text-c-2",modelValue:i.username,placeholder:"janedoe",required:"","onUpdate:modelValue":e=>d(i.uid,"username",e)}),{default:(0,o.withCtx)(()=>[...r[2]||(r[2]=[(0,o.createTextVNode)(" Username ",-1)])]),_:1},16,["modelValue","onUpdate:modelValue"])]),_:2},1024),(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)({ref_for:!0},u,{modelValue:i.password,placeholder:"********",type:"password","onUpdate:modelValue":e=>d(i.uid,"password",e)}),{default:(0,o.withCtx)(()=>[...r[3]||(r[3]=[(0,o.createTextVNode)(" Password ",-1)])]),_:1},16,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):(0,o.createCommentVNode)("",!0)],64)):i?.type==="apiKey"?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:3},[(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)({ref_for:!0},u,{containerClass:"reference"===e.layout&&"border-t",modelValue:i.name,placeholder:"api-key","onUpdate:modelValue":e=>d(i.uid,"name",e)}),{default:(0,o.withCtx)(()=>[...r[4]||(r[4]=[(0,o.createTextVNode)(" Name ",-1)])]),_:1},16,["containerClass","modelValue","onUpdate:modelValue"])]),_:2},1024),(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[(0,o.createVNode)(O,(0,o.mergeProps)({ref_for:!0},u,{modelValue:i.value,placeholder:"QUxMIFlPVVIgQkFTRSBBUkUgQkVMT05HIFRPIFVT",type:"password","onUpdate:modelValue":e=>d(i.uid,"value",e)}),{default:(0,o.withCtx)(()=>[...r[5]||(r[5]=[(0,o.createTextVNode)(" Value ",-1)])]),_:1},16,["modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):i?.type==="oauth2"?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:4},[(0,o.createVNode)((0,o.unref)(V.A),null,{default:(0,o.withCtx)(()=>[Object.keys(i.flows).length>1?((0,o.openBlock)(),(0,o.createElementBlock)("div",L,[(0,o.createElementVNode)("div",H,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i?.flows,(t,l,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:l,class:(0,o.normalizeClass)(["floating-bg text-c-3 relative cursor-pointer border-b-[1px] border-transparent py-1 text-base font-medium",{"!text-c-1 !rounded-none border-b-[1px] !border-current":"reference"!==e.layout&&(c.value===l||0===a&&!c.value),"!text-c-1 !rounded-none border-b-[1px] !border-current opacity-100":"reference"===e.layout&&(c.value===l||0===a&&!c.value)}]),type:"button",onClick:e=>c.value=l},[(0,o.createElementVNode)("span",W,(0,o.toDisplayString)(l),1)],10,Q))),128))])])):(0,o.createCommentVNode)("",!0)]),_:2},1024),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i?.flows,(a,n,s)=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:n},[c.value!==n&&(0!==s||c.value)?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(M,(0,o.mergeProps)({key:0,ref_for:!0},u,{collection:e.collection,flow:a,persistAuth:e.persistAuth,scheme:i,server:e.server,workspace:e.workspace,onAuthorized:r[0]||(r[0]=e=>t("authorized"))}),{"oauth-actions":(0,o.withCtx)(()=>[(0,o.renderSlot)(l.$slots,"oauth-actions")]),_:3},16,["collection","flow","persistAuth","scheme","server","workspace"]))],64))),128))],64)):i?.type==="openIdConnect"?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:5,class:(0,o.normalizeClass)(["text-c-3 bg-b-1 flex min-h-[calc(4rem+1px)] items-center justify-center border-t border-b-0 px-4 text-base",{"rounded-b-lg":"reference"===e.layout}])}," Coming soon ",2)):(0,o.createCommentVNode)("",!0)],64))),128))}});var X=l(61309);let Y=["onClick"],Z={class:"relative z-10 font-medium whitespace-nowrap"},G={key:0,class:"absolute inset-x-1 bottom-[var(--scalar-border-width)] left-1/2 z-1 h-px w-full -translate-x-1/2 bg-current"},ee=(0,o.defineComponent)({__name:"RequestAuthDataTable",props:{collection:{},environment:{},envVariables:{},layout:{default:"client"},persistAuth:{type:Boolean,default:!1},selectedSchemeOptions:{default:()=>[]},server:{},workspace:{}},emits:["authorized","activeSchemes"],setup(e,{emit:t}){let{securitySchemes:l}=(0,i.hA)(),r=(0,a.hS)(),n=(0,o.ref)(null),c=(0,o.ref)(0),s=(0,o.computed)(()=>{if(!e.selectedSchemeOptions||0===e.selectedSchemeOptions.length)return[];let t=e.selectedSchemeOptions[c.value];if(!t)return[];let l=t.id.split(",").filter(Boolean);return l.length>1?l:[t.id]});(0,o.watch)(s,e=>{t("activeSchemes",e.map(e=>l[e]).filter(m.O))},{immediate:!0});let d=(0,o.computed)(()=>s.value.length>0);return(0,o.watch)(()=>e.selectedSchemeOptions,e=>{e&&e[c.value]||(c.value=Math.max(0,c.value-1))}),(l,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("form",{onSubmit:a[2]||(a[2]=(0,o.withModifiers)(()=>{},["prevent"]))},[e.selectedSchemeOptions.length>1?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["box-content flex flex-wrap gap-x-2.5 overflow-hidden border border-b-0 px-3","client"===e.layout&&"border-x-0"])},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.selectedSchemeOptions,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:e.id,class:(0,o.normalizeClass)(["relative z-1 -mb-[var(--scalar-border-width)] flex h-8 cursor-pointer",[c.value===t?"text-c-1":"text-c-3"]])},[(0,o.createElementVNode)("button",{class:"floating-bg relative cursor-pointer border-b-[1px] border-transparent py-1 text-sm font-medium",type:"button",onClick:e=>c.value=t},[(0,o.createElementVNode)("span",Z,(0,o.toDisplayString)(e.label),1)],8,Y),c.value===t?((0,o.openBlock)(),(0,o.createElementBlock)("div",G)):(0,o.createCommentVNode)("",!0)],2))),128))],2)):(0,o.createCommentVNode)("",!0),d.value?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(X.A),{key:1,class:(0,o.normalizeClass)(["flex-1","reference"===e.layout&&"bg-b-1 rounded-b-lg border border-t-0"]),columns:[""],presentational:""},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(J,{collection:e.collection,envVariables:e.envVariables,environment:e.environment,layout:e.layout,persistAuth:e.persistAuth,securitySchemeUids:s.value,server:e.server,workspace:e.workspace,onAuthorized:a[0]||(a[0]=e=>t("authorized"))},{"oauth-actions":(0,o.withCtx)(()=>[(0,o.renderSlot)(l.$slots,"oauth-actions",{},void 0,!0)]),_:3},8,["collection","envVariables","environment","layout","persistAuth","securitySchemeUids","server","workspace"])]),_:3},8,["class"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:2,class:(0,o.normalizeClass)(["text-c-3 bg-b-1 flex min-h-16 items-center justify-center border-t px-4 text-sm","reference"===e.layout&&"min-h-[calc(4rem+0.5px)] rounded-b-lg border"])}," No authentication selected ",2)),(0,o.createVNode)(p,{scheme:n.value,state:(0,o.unref)(r),onClose:a[1]||(a[1]=e=>(0,o.unref)(r).hide())},null,8,["scheme","state"])],32))}});var et=l(74817);let el=(0,et.A)(ee,[["__scopeId","data-v-0bb98074"]]),eo=Object.entries({apiKeyCookie:{label:"API Key in Cookies",payload:{type:"apiKey",in:"cookie",nameKey:"apiKeyCookie"}},apiKeyHeader:{label:"API Key in Headers",payload:{type:"apiKey",in:"header",nameKey:"apiKeyHeader"}},apiKeyQuery:{label:"API Key in Query Params",payload:{type:"apiKey",in:"query",nameKey:"apiKeyQuery"}},httpBasic:{label:"HTTP Basic",payload:{type:"http",scheme:"basic",nameKey:"httpBasic"}},httpBearer:{label:"HTTP Bearer",payload:{type:"http",scheme:"bearer",nameKey:"httpBearer"}},oauth2Implicit:{label:"Oauth2 Implicit Flow",payload:{type:"oauth2",nameKey:"oauth2Implicit",flows:{implicit:{type:"implicit"}}}},oauth2Password:{label:"Oauth2 Password Flow",payload:{type:"oauth2",nameKey:"oauth2Password",flows:{password:{type:"password"}}}},oauth2ClientCredentials:{label:"Oauth2 Client Credentials",payload:{type:"oauth2",nameKey:"oauth2ClientCredentials",flows:{clientCredentials:{type:"clientCredentials"}}}},oauth2AuthorizationFlow:{label:"Oauth2 Authorization Code",payload:{type:"oauth2",nameKey:"oauth2AuthorizationFlow",flows:{authorizationCode:{type:"authorizationCode"}}}}}).map(([e,t])=>({id:e,isDeletable:!1,...t})),ea=e=>({id:e.uid,label:"openIdConnect"===e.type?`${e.nameKey} (coming soon)`:e.nameKey}),er=(e,t)=>ea(e.reduce((e,l,o)=>{let a=t[l];return a&&(e.nameKey+=`${o>0?" & ":""}${a.nameKey}`,e.uid=`${e.uid}${o>0?",":""}${a.uid}`),e},{type:"complex",nameKey:"",uid:""})),en=(e,t)=>"[{}]"===JSON.stringify(e?.security)&&t?.security?.length?t?.security.find(e=>"{}"===JSON.stringify(e))?t.security:[...t.security,{}]:e?.security??t?.security??[],ec=(e,t,l,o=!1)=>{{let a=t.reduce((e,t)=>{let o=l[t];return o&&(e[o.nameKey]=o),e},{}),r=e.flatMap(e=>{let t=Object.keys(e);if(t.length>1)return er(t.map(e=>a[e]?.uid).filter(c.O9),l);if(t[0]){let e=a[t[0]];if(e)return ea(e)}return[]}),n=t.filter(e=>!r.some(t=>t.id===e)).map(e=>{let t=l[e];return t?ea(t):null}).filter(c.O9),s=[{label:"Required authentication",options:r},{label:"Available authentication",options:n}];return o?r.length?s:n:(s.push({label:"Add new authentication",options:eo}),s)}},es=["id"],ei={class:"flex flex-1"},ed={class:"min-w-0 flex-1 truncate"},eu=(0,o.defineComponent)({__name:"RequestAuth",props:{collection:{},isReadOnly:{type:Boolean,default:!1},environment:{},envVariables:{},layout:{},operation:{},persistAuth:{type:Boolean,default:!1},selectedSecuritySchemeUids:{},server:{},title:{},workspace:{}},emits:["authorized","activeSchemes"],setup(e,{emit:t}){let{securitySchemes:l,securitySchemeMutators:d,requestMutators:u,collectionMutators:m}=(0,i.hA)(),f=(0,o.useId)(),h=(0,o.ref)(null),y=(0,a.hS)(),x=(0,o.ref)(null),w=(0,o.ref)(!1),k=(0,o.computed)(()=>{let t=en(e.operation,e.collection);return{filteredRequirements:t.filter(e=>Object.keys(e).length),requirements:t}}),V=(0,o.computed)(()=>{let{filteredRequirements:e,requirements:t}=k.value;if(!t.length)return null;let l=!t.some(e=>Object.keys(e).length>1)&&e.length<t.length;return{icon:l?"Unlock":"Lock",text:l?"Optional":"Required"}}),v=(0,o.computed)(()=>e.selectedSecuritySchemeUids.map(e=>{if(Array.isArray(e))return er(e,l);let t=l[e??""];if(t)return ea(t)}).filter(c.O9));function b(t){let l=t.find(e=>e.payload),o=t.filter(e=>!e.payload).map(({id:e})=>{let t=e.split(",");return t.length>1?t:e});if(l?.payload){let t=d.add(l.payload,e.collection?.uid);t&&o.push(t.uid)}C(o)}let C=t=>{if(e.collection.useCollectionSecurity){if(m.edit(e.collection.uid,"selectedSecuritySchemeUids",t),!e.persistAuth)return;let o=t.map(e=>Array.isArray(e)?e.map(e=>l[e]?.nameKey):l[e]?.nameKey);(0,r.Ar)().setItem(r.tN.SELECTED_SECURITY_SCHEMES,JSON.stringify(o))}else e.operation?.uid&&u.edit(e.operation.uid,"selectedSecuritySchemeUids",t)};function g({id:e,label:t}){x.value={id:e,label:t},y.show()}let B=t=>{t&&(C(e.selectedSecuritySchemeUids.filter(e=>{let l=t.split(",");return l.length>1&&Array.isArray(e)&&l.length===e.length?e.every(e=>!l.includes(e)):e!==t})),h.value?.$el.focus(),y.hide())},N=(0,o.computed)(()=>ec(k.value.filteredRequirements,e.collection?.securitySchemes??[],l,e.isReadOnly)),S=e=>{w.value&&e.stopPropagation(),h.value?.$el.click()};return(l,r)=>((0,o.openBlock)(),(0,o.createBlock)(s.A,{class:"group/params relative",itemCount:v.value.length,layout:e.layout,"onUpdate:modelValue":r[4]||(r[4]=e=>w.value=e)},{title:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",{id:(0,o.unref)(f),class:"inline-flex items-center gap-0.5 leading-[20px]"},[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.title),1),V.value?((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:0,class:(0,o.normalizeClass)(["text-c-3 hover:bg-b-3 hover:text-c-1 -mr-1 cursor-pointer rounded px-1 py-0.5 text-xs leading-[normal]",{"text-c-1":"Required"===V.value.text}]),onClick:S},(0,o.toDisplayString)(V.value.text),3)):(0,o.createCommentVNode)("",!0)],8,es)]),actions:(0,o.withCtx)(()=>[(0,o.createElementVNode)("div",ei,[(0,o.createVNode)((0,o.unref)(a.BR),{class:"w-72 text-xs",modelValue:v.value,multiple:"",options:N.value,placement:"bottom-end",teleport:"",onDelete:g,"onUpdate:modelValue":b},{option:(0,o.withCtx)(({option:t,selected:l})=>[(0,o.createVNode)((0,o.unref)(a.Pq),{multiselect:"",selected:l},null,8,["selected"]),(0,o.createElementVNode)("div",ed,(0,o.toDisplayString)(t.label),1),t.isDeletable??!e.isReadOnly?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(a.EX),{key:0,class:"-m-0.5 shrink-0 p-0.5 opacity-0 group-hover/item:opacity-100",icon:(0,o.unref)(n.QIv),label:`Delete ${t.label}`,size:"xs",onClick:(0,o.withModifiers)(e=>g(t),["stop"])},null,8,["icon","label","onClick"])):(0,o.createCommentVNode)("",!0)]),default:(0,o.withCtx)(()=>[(0,o.createVNode)((0,o.unref)(a.RO),{ref_key:"comboboxButtonRef",ref:h,"aria-describedby":(0,o.unref)(f),class:"group/combobox-button hover:text-c-1 text-c-2 flex h-fit w-full items-center gap-1 px-0.75 py-0.25 text-base font-normal transition-transform",variant:"ghost"},{default:(0,o.withCtx)(()=>[1===v.value.length?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[r[5]||(r[5]=(0,o.createElementVNode)("span",{class:"sr-only"},"Selected Auth Type:",-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(v.value[0]?.label),1)],64)):v.value.length>1?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[r[6]||(r[6]=(0,o.createTextVNode)(" Multiple ",-1)),r[7]||(r[7]=(0,o.createElementVNode)("span",{class:"sr-only"},"Auth Types Selected",-1))],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:2},[r[8]||(r[8]=(0,o.createElementVNode)("span",{class:"sr-only"},"Select",-1)),r[9]||(r[9]=(0,o.createTextVNode)(" Auth Type ",-1))],64)),(0,o.createVNode)((0,o.unref)(n.zqX),{class:"size-3 shrink-0 transition-transform duration-100 group-aria-expanded/combobox-button:rotate-180",weight:"bold"})]),_:1},8,["aria-describedby"])]),_:1},8,["modelValue","options"])])]),default:(0,o.withCtx)(()=>[(0,o.createVNode)(el,{collection:e.collection,envVariables:e.envVariables,environment:e.environment,layout:e.layout,persistAuth:e.persistAuth,selectedSchemeOptions:v.value,server:e.server,workspace:e.workspace,onActiveSchemes:r[0]||(r[0]=e=>t("activeSchemes",e)),onAuthorized:r[1]||(r[1]=e=>t("authorized"))},{"oauth-actions":(0,o.withCtx)(()=>[(0,o.renderSlot)(l.$slots,"oauth-actions",{},void 0,!0)]),_:3},8,["collection","envVariables","environment","layout","persistAuth","selectedSchemeOptions","server","workspace"]),(0,o.createVNode)(p,{scheme:x.value,state:(0,o.unref)(y),onClose:r[2]||(r[2]=e=>(0,o.unref)(y).hide()),onDelete:r[3]||(r[3]=e=>B(x.value?.id))},null,8,["scheme","state"])]),_:3},8,["itemCount","layout"]))}}),ep=(0,et.A)(eu,[["__scopeId","data-v-3f1067a4"]])}};