(()=>{var e={};e.id=9556,e.ids=[9556],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},84403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var s=r(70260),n=r(28203),a=r(25155),l=r.n(a),i=r(67292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let c=["",{children:["admin",{children:["content",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,55355)),"/home/runner/work/PartFiles/PartFiles/src/app/admin/content/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,69096)),"/home/runner/work/PartFiles/PartFiles/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/runner/work/PartFiles/PartFiles/src/app/admin/content/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/content/page",pathname:"/admin/content",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},80075:(e,t,r)=>{Promise.resolve().then(r.bind(r,97533)),Promise.resolve().then(r.bind(r,44994))},63043:(e,t,r)=>{Promise.resolve().then(r.bind(r,82052)),Promise.resolve().then(r.bind(r,76641))},12592:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(96331).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},82052:(e,t,r)=>{"use strict";r.d(t,{ContentManager:()=>M});var s=r(45512),n=r(58009),a=r(39400),l=r(77722),i=r(47630),o=r(78447),c=r(73463),d=r(35223),p=r(96331);let x=(0,p.A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),h=(0,p.A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),u=(0,p.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),m=(0,p.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var f=r(44269);let g=(0,p.A)("image-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]),y=(0,p.A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),j=(0,p.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var b=r(12592);let v=(0,p.A)("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]),w=(0,p.A)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),k=(0,p.A)("unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),A=(0,p.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),N=(0,p.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var C=r(28531),S=r.n(C),$=r(91542);function R(e){return!!e&&new Date(e)<new Date}function P({ext:e}){let t=e.replace(/^\./,"").toUpperCase(),{bg:r,accent:n}=function(e){let t=e.toLowerCase().replace(/^\./,"");return["pdf"].includes(t)?{bg:"bg-ctp-red/10",fg:"text-ctp-red",accent:"bg-ctp-red"}:["doc","docx","odt","rtf","txt"].includes(t)?{bg:"bg-ctp-blue/10",fg:"text-ctp-blue",accent:"bg-ctp-blue"}:["xls","xlsx","ods","csv"].includes(t)?{bg:"bg-ctp-green/10",fg:"text-ctp-green",accent:"bg-ctp-green"}:["ppt","pptx","odp"].includes(t)?{bg:"bg-ctp-peach/10",fg:"text-ctp-peach",accent:"bg-ctp-peach"}:["zip","tar","gz","bz2","7z","rar"].includes(t)?{bg:"bg-ctp-yellow/10",fg:"text-ctp-yellow",accent:"bg-ctp-yellow"}:["mp3","wav","ogg","flv"].includes(t)?{bg:"bg-ctp-mauve/10",fg:"text-ctp-mauve",accent:"bg-ctp-mauve"}:["mp4","webm","avi","mov","mkv"].includes(t)?{bg:"bg-ctp-pink/10",fg:"text-ctp-pink",accent:"bg-ctp-pink"}:["jpg","jpeg","png","gif","webp","bmp","ico","tiff","avif"].includes(t)?{bg:"bg-ctp-flamingo/10",fg:"text-ctp-flamingo",accent:"bg-ctp-flamingo"}:["json","xml","yaml","yml"].includes(t)?{bg:"bg-ctp-teal/10",fg:"text-ctp-teal",accent:"bg-ctp-teal"}:["woff","woff2","ttf","otf","eot"].includes(t)?{bg:"bg-ctp-lavender/10",fg:"text-ctp-lavender",accent:"bg-ctp-lavender"}:{bg:"bg-ctp-overlay0/10",fg:"text-ctp-overlay0",accent:"bg-ctp-overlay0"}}(e);return(0,s.jsxs)("div",{className:`relative w-10 h-10 rounded-md ${r} flex flex-col items-center justify-end overflow-hidden border`,children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-3 h-3",children:(0,s.jsx)("div",{className:"absolute top-0 right-0 w-0 h-0 border-t-12 border-t-background border-l-12 border-l-transparent"})}),(0,s.jsx)("div",{className:`${n} rounded-sm px-1 py-1 mb-1.5`,children:(0,s.jsx)("span",{className:"text-[8px] font-extrabold leading-none text-white tracking-wide",children:t})})]})}function M({contentBaseUrl:e}){let[t,r]=(0,n.useState)([]),[p,C]=(0,n.useState)(!0),[M,F]=(0,n.useState)(""),[E,_]=(0,n.useState)("all"),[z,q]=(0,n.useState)("all"),[U,L]=(0,n.useState)("all"),[T,B]=(0,n.useState)("all"),[D,V]=(0,n.useState)("createdAt"),[G,O]=(0,n.useState)("desc"),H=(0,n.useCallback)(async()=>{try{let e=new URLSearchParams;"all"!==z&&e.set("expired",z);let t=e.toString(),s=await fetch(`/api/admin/content${t?`?${t}`:""}`),n=await s.json();r(n.content||[])}catch{$.oR.error("Failed to load content")}finally{C(!1)}},[z]),I=(0,n.useMemo)(()=>({types:[...new Set(t.map(e=>e.fileExtension))].sort(),uploaders:[...new Set(t.map(e=>e.uploadedBy.username))].sort(),directories:[...new Set(t.map(e=>e.directory).filter(Boolean))].sort()}),[t]),J=""!==M||"all"!==E||"all"!==z||"all"!==U||"all"!==T,K=(0,n.useMemo)(()=>{let e=t;if(M){let t=M.toLowerCase();e=e.filter(e=>e.filename.toLowerCase().includes(t)||e.originalFilename.toLowerCase().includes(t))}return"all"!==E&&(e=e.filter(e=>e.fileExtension===E)),"all"!==U&&(e=e.filter(e=>e.uploadedBy.username===U)),"all"!==T&&(e="_none"===T?e.filter(e=>!e.directory):e.filter(e=>e.directory===T)),e=[...e].sort((e,t)=>{let r=0;switch(D){case"filename":r=e.filename.localeCompare(t.filename);break;case"fileExtension":r=e.fileExtension.localeCompare(t.fileExtension);break;case"fileSize":r=e.fileSize-t.fileSize;break;case"uploadedBy":r=e.uploadedBy.username.localeCompare(t.uploadedBy.username);break;case"expiresAt":r=(e.expiresAt?new Date(e.expiresAt).getTime():1/0)-(t.expiresAt?new Date(t.expiresAt).getTime():1/0);break;case"createdAt":r=new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}return"asc"===G?r:-r})},[t,M,E,U,T,D,G]);function X(e){D===e?O(e=>"asc"===e?"desc":"asc"):(V(e),O("asc"))}function Q({field:e}){return D!==e?(0,s.jsx)(x,{className:"ml-1 h-3 w-3 opacity-40"}):"asc"===G?(0,s.jsx)(h,{className:"ml-1 h-3 w-3"}):(0,s.jsx)(u,{className:"ml-1 h-3 w-3"})}async function W(t){if(confirm(`Delete "${t.filename}"? This cannot be undone.`))try{let r=await fetch(`${e}/api/admin/content/${t.id}`,{method:"DELETE"});if(r.ok)$.oR.success(`"${t.filename}" deleted`),H();else{let e=await r.json();$.oR.error(e.error||"Failed to delete content")}}catch{$.oR.error("Failed to delete content")}}async function Y(t){let r=prompt("Enter a new short slug for /s/ URL:");if(r)try{let s=await fetch(`${e}/api/admin/content/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({addSlugs:[r]})});if(s.ok)$.oR.success(`Short URL added: /s/${r}`),H();else{let e=await s.json();$.oR.error(e.error||"Failed to add slug")}}catch{$.oR.error("Failed to add slug")}}async function Z(t,r){if(confirm(`Remove short URL /s/${r}?`))try{let s=await fetch(`${e}/api/admin/content/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({removeSlugs:[r]})});if(s.ok)$.oR.success(`Short URL /s/${r} removed`),H();else{let e=await s.json();$.oR.error(e.error||"Failed to remove slug")}}catch{$.oR.error("Failed to remove slug")}}async function ee(t){try{(await fetch(`${e}/api/admin/content/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({expiresAt:null})})).ok?($.oR.success("Expiry removed"),H()):$.oR.error("Failed to update content")}catch{$.oR.error("Failed to update content")}}return p?(0,s.jsx)("p",{className:"text-muted-foreground",role:"status","aria-live":"polite",children:"Loading content..."}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-end gap-3",children:[(0,s.jsx)("div",{className:"flex-1 min-w-[200px] max-w-sm",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground pointer-events-none","aria-hidden":"true"}),(0,s.jsx)(l.p,{placeholder:"Search filenames...",value:M,onChange:e=>F(e.target.value),className:"pl-9","aria-label":"Search filenames"})]})}),(0,s.jsxs)(c.l6,{value:E,onValueChange:_,children:[(0,s.jsx)(c.bq,{"aria-label":"Filter by file type",children:(0,s.jsx)(c.yv,{placeholder:"File type"})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"all",children:"All types"}),I.types.map(e=>(0,s.jsx)(c.eb,{value:e,children:e},e))]})]}),(0,s.jsxs)(c.l6,{value:z,onValueChange:q,children:[(0,s.jsx)(c.bq,{"aria-label":"Filter by expiry status",children:(0,s.jsx)(c.yv,{placeholder:"Status"})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"all",children:"All statuses"}),(0,s.jsx)(c.eb,{value:"active",children:"Active"}),(0,s.jsx)(c.eb,{value:"expired",children:"Expired"})]})]}),I.uploaders.length>1&&(0,s.jsxs)(c.l6,{value:U,onValueChange:L,children:[(0,s.jsx)(c.bq,{"aria-label":"Filter by uploader",children:(0,s.jsx)(c.yv,{placeholder:"Uploaded by"})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"all",children:"All uploaders"}),I.uploaders.map(e=>(0,s.jsx)(c.eb,{value:e,children:e},e))]})]}),I.directories.length>0&&(0,s.jsxs)(c.l6,{value:T,onValueChange:B,children:[(0,s.jsx)(c.bq,{"aria-label":"Filter by directory",children:(0,s.jsx)(c.yv,{placeholder:"Directory"})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"all",children:"All directories"}),(0,s.jsx)(c.eb,{value:"_none",children:"No directory"}),I.directories.map(e=>(0,s.jsx)(c.eb,{value:e,children:e},e))]})]}),J&&(0,s.jsxs)(a.$,{variant:"ghost",size:"sm",onClick:function(){F(""),_("all"),q("all"),L("all"),B("all")},className:"h-9 gap-1.5 text-muted-foreground",children:[(0,s.jsx)(f.A,{className:"h-3.5 w-3.5"}),"Clear"]})]}),(0,s.jsx)("p",{className:"text-muted-foreground","aria-live":"polite",children:K.length===t.length?`${t.length} item(s)`:`${K.length} of ${t.length} item(s)`}),(0,s.jsx)("div",{className:"rounded-md border overflow-x-auto",role:"region","aria-label":"Content table",tabIndex:0,children:(0,s.jsxs)(i.XI,{"aria-label":"Uploaded content",children:[(0,s.jsx)(i.A0,{children:(0,s.jsxs)(i.Hj,{children:[(0,s.jsx)(i.nd,{className:"w-10",children:(0,s.jsx)("span",{className:"sr-only",children:"Preview"})}),(0,s.jsx)(i.nd,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center hover:text-foreground transition-colors",onClick:()=>X("filename"),children:["Filename ",(0,s.jsx)(Q,{field:"filename"})]})}),(0,s.jsx)(i.nd,{className:"w-12",children:(0,s.jsx)("span",{className:"sr-only",children:"Actions"})}),(0,s.jsx)(i.nd,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center hover:text-foreground transition-colors",onClick:()=>X("fileExtension"),children:["Type ",(0,s.jsx)(Q,{field:"fileExtension"})]})}),(0,s.jsx)(i.nd,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center hover:text-foreground transition-colors",onClick:()=>X("fileSize"),children:["Size ",(0,s.jsx)(Q,{field:"fileSize"})]})}),(0,s.jsx)(i.nd,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center hover:text-foreground transition-colors",onClick:()=>X("uploadedBy"),children:["Uploaded By ",(0,s.jsx)(Q,{field:"uploadedBy"})]})}),(0,s.jsx)(i.nd,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center hover:text-foreground transition-colors",onClick:()=>X("expiresAt"),children:["Expiry ",(0,s.jsx)(Q,{field:"expiresAt"})]})}),(0,s.jsx)(i.nd,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center hover:text-foreground transition-colors",onClick:()=>X("createdAt"),children:["Created ",(0,s.jsx)(Q,{field:"createdAt"})]})}),(0,s.jsx)(i.nd,{children:"Short URLs"}),(0,s.jsx)(i.nd,{children:"Directory"})]})}),(0,s.jsxs)(i.BF,{children:[K.map(t=>{var r;return(0,s.jsxs)(i.Hj,{className:R(t.expiresAt)?"opacity-50":"",children:[(0,s.jsx)(i.nA,{children:t.mimeType.startsWith("image/")&&t.hasPreview?R(t.expiresAt)?(0,s.jsx)("div",{className:"w-10 h-10 rounded border flex items-center justify-center bg-muted",children:(0,s.jsx)(g,{className:"h-5 w-5 text-muted-foreground","aria-label":"Preview expired"})}):(0,s.jsx)("img",{src:`/api/preview/${t.id}`,alt:t.filename,className:"w-10 h-10 object-cover rounded border",loading:"lazy"}):(0,s.jsx)(P,{ext:t.fileExtension})}),(0,s.jsx)(i.nA,{className:"font-medium max-w-48 truncate",children:(0,s.jsx)(S(),{href:`${e}/c/${t.id}`,className:"text-primary hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-sm",children:t.filename})}),(0,s.jsx)(i.nA,{children:(0,s.jsxs)(d.rI,{children:[(0,s.jsx)(d.ty,{asChild:!0,children:(0,s.jsx)(a.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0","aria-label":`Actions for ${t.filename}`,children:(0,s.jsx)(y,{className:"h-4 w-4","aria-hidden":"true"})})}),(0,s.jsxs)(d.SQ,{align:"end",children:[(0,s.jsxs)(d._2,{onClick:()=>window.open(`${e}/c/${t.id}`,"_blank"),children:[(0,s.jsx)(j,{className:"mr-2 h-4 w-4"}),"View"]}),(0,s.jsxs)(d._2,{onClick:()=>(function(t){let r=t.shortSlugs.length>0?`/s/${t.shortSlugs[0].slug}`:`/c/${t.id}`,s=`${e}${r}`;navigator.clipboard.writeText(s).then(()=>$.oR.success("URL copied"),()=>$.oR.error("Failed to copy"))})(t),children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Copy URL"]}),(0,s.jsxs)(d._2,{onClick:()=>(function(t){let r=t.shortSlugs.length>0?`/e/${t.shortSlugs[0].slug}`:`/r/${t.id}`,s=`${e}${r}`;navigator.clipboard.writeText(s).then(()=>$.oR.success("Raw URL copied"),()=>$.oR.error("Failed to copy"))})(t),children:[(0,s.jsx)(v,{className:"mr-2 h-4 w-4"}),"Copy Raw URL"]}),(0,s.jsx)(d.mB,{}),(0,s.jsxs)(d._2,{onClick:()=>Y(t),children:[(0,s.jsx)(w,{className:"mr-2 h-4 w-4"}),"Add Slug"]}),t.shortSlugs.length>0&&t.shortSlugs.map(({slug:e})=>(0,s.jsxs)(d._2,{onClick:()=>Z(t,e),children:[(0,s.jsx)(k,{className:"mr-2 h-4 w-4"}),"Remove /s/",e]},e)),t.expiresAt&&!R(t.expiresAt)&&(0,s.jsxs)(d._2,{onClick:()=>ee(t),children:[(0,s.jsx)(A,{className:"mr-2 h-4 w-4"}),"Make Permanent"]}),(0,s.jsx)(d.mB,{}),(0,s.jsxs)(d._2,{variant:"destructive",onClick:()=>W(t),children:[(0,s.jsx)(N,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}),(0,s.jsx)(i.nA,{children:(0,s.jsx)(o.E,{variant:"secondary",children:t.fileExtension})}),(0,s.jsx)(i.nA,{children:(r=t.fileSize)<1024?`${r} B`:r<1048576?`${(r/1024).toFixed(1)} KB`:r<0x40000000?`${(r/1048576).toFixed(1)} MB`:`${(r/0x40000000).toFixed(2)} GB`}),(0,s.jsx)(i.nA,{children:t.uploadedBy.username}),(0,s.jsx)(i.nA,{children:t.expiresAt?R(t.expiresAt)?(0,s.jsx)(o.E,{variant:"destructive",children:"Expired"}):(0,s.jsx)("span",{className:"text-sm",children:new Date(t.expiresAt).toLocaleString()}):(0,s.jsx)(o.E,{children:"Permanent"})}),(0,s.jsx)(i.nA,{className:"text-sm",children:new Date(t.createdAt).toLocaleDateString()}),(0,s.jsx)(i.nA,{children:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:t.shortSlugs.length>0?t.shortSlugs.map(({slug:t})=>(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsxs)("a",{href:`${e}/s/${t}`,className:"text-primary underline text-sm",target:"_blank",rel:"noopener noreferrer",children:["/s/",t,(0,s.jsx)("span",{className:"sr-only",children:" (opens in new tab)"})]})},t)):(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"-"})})}),(0,s.jsx)(i.nA,{children:t.directory?(0,s.jsx)(o.E,{variant:"outline",children:t.directory}):(0,s.jsx)("span",{className:"text-muted-foreground",children:"-"})})]},t.id)}),0===K.length&&(0,s.jsx)(i.Hj,{children:(0,s.jsx)(i.nA,{colSpan:10,className:"text-center text-muted-foreground py-8",children:0===t.length?"No content uploaded yet.":"No content matches the current filters."})})]})]})})]})}},55355:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(62740),n=r(31831),a=r(60809),l=r(44994),i=r(23946),o=r(97533),c=r(99111);async function d(){let e=await (0,a.j2)();return e?.user||(0,n.redirect)("/login"),(0,i.qc)(e.user.role)||(0,n.redirect)("/dashboard"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Nav,{role:e.user.role,username:e.user.name??"Unknown"}),(0,s.jsxs)("main",{id:"main-content",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Content Management"}),(0,s.jsx)(o.ContentManager,{contentBaseUrl:(0,c.D)()})]})]})}},97533:(e,t,r)=>{"use strict";r.d(t,{ContentManager:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call ContentManager() from the server but ContentManager is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/PartFiles/PartFiles/src/components/content-table.tsx","ContentManager")},99111:(e,t,r)=>{"use strict";function s(){return process.env.BASE_URL?process.env.BASE_URL.replace(/\/+$/,""):`http://localhost:${process.env.PORT||3e3}`}function n(){return process.env.CONTENT_URL?process.env.CONTENT_URL.replace(/\/+$/,""):s()}r.d(t,{$:()=>s,D:()=>n})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,9187,4981,4926,2787,5522,606,8077,6908,1477,6648,4888,2903],()=>r(84403));module.exports=s})();